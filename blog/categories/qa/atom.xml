<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: QA | atodorov.org]]></title>
  <link href="http://atodorov.org/blog/categories/qa/atom.xml" rel="self"/>
  <link href="http://atodorov.org/"/>
  <updated>2014-01-02T23:24:11+02:00</updated>
  <id>http://atodorov.org/</id>
  <author>
    <name><![CDATA[Alexander Todorov]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Upstream Test Suite Status of Fedora 20]]></title>
    <link href="http://atodorov.org/blog/2013/12/24/upstream-test-suite-status-of-fedora-20/"/>
    <updated>2013-12-24T08:01:00+02:00</updated>
    <id>http://atodorov.org/blog/2013/12/24/upstream-test-suite-status-of-fedora-20</id>
    <content type="html"><![CDATA[<p>Last week I've expressed my thoughts about the state of
<a href="https://lists.fedoraproject.org/pipermail/test/2013-December/119637.html">upstream test suites in Fedora</a>
along with some other ideas. Following the response on this thread I'm starting
to analyze all SRPM packages in Fedora 20 in order to establish a baseline. Here are my initial findings.</p>

<h2>What's Inside</h2>

<p>I've found two source distributions for Fedora 20:</p>

<ul>
<li>The <code>Fedora-20-source-DVD.iso</code> file which to my knowledge contains the sources
of all packages that comprise the installation media;</li>
<li>The <code>Everything/source/SRPMS/</code> directory which appears to contain the sources
of everything else available in the Fedora 20 repositories.</li>
</ul>


<p>There are <strong>2574</strong> SRPM packages in Fedora-20 source DVD and <strong>14364</strong> SRPMs
in the Everything/ directory. 9,2G vs. 41G.</p>

<h2>Test Suite Execution In %check</h2>

<p><a href="https://fedoraproject.org/wiki/Packaging:Guidelines#Test_Suites">Fedora Packaging Guidelines</a>
state</p>

<p><blockquote><p>If the source code of the package provides a test suite,<br/>it should be executed in the %check section,<br/>whenever it is practical to do so.</p></blockquote></p>

<p>In my research I found <strong>738</strong> SRPMs on the DVD which have a %check
section and <strong>4838</strong> such packages under <code>Everything/</code>. This is <strong>28,6%</strong> and <strong>33,6%</strong>
respectively.</p>

<h2>Test Suite Existence</h2>

<p>A quick grep for either <code>test/</code> or <code>tests/</code> directories in the package sources revealed
<strong>870</strong> SRPM packages in the source DVD which are very likely to have a test suite.
This is <strong>33,8%</strong>. <strike>I wasn't able to inspect the <code>Everything/</code> directory with this script
because it takes too long to execute and my system crashed out of memory.
I will update this post later with that info.</strike></p>

<p><em>UPDATE 2014-01-02</em>:
In the <code>Everything/</code> directory only <strong>4481</strong> (<strong>31,2%</strong>) SRPM packages appear to have
test suites.</p>

<p>The scripts and raw output are available at <a href="https://github.com/atodorov/fedora-scripts">https://github.com/atodorov/fedora-scripts</a>.</p>

<p>So it looks like on average <strong>30%</strong> of the packages execute their test suites at build
time in the %check section and less than <strong>35%</strong> have test suites at all!
There's definitely room for improvement and I plan to focus on this during 2014!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Open Source Quality Assurance Infrastructure for Fedora QA]]></title>
    <link href="http://atodorov.org/blog/2013/11/19/open-source-quality-assurance-infrastructure-for-fedora-qa/"/>
    <updated>2013-11-19T14:12:00+02:00</updated>
    <id>http://atodorov.org/blog/2013/11/19/open-source-quality-assurance-infrastructure-for-fedora-qa</id>
    <content type="html"><![CDATA[<p><img src="/images/fedora/beaker.png" title="Beaker test lab" alt="&quot;Beaker test lab&quot;" /></p>

<p>In the last few weeks I've been working together with
<a href="https://fedoraproject.org/wiki/User:Tflink">Tim Flink</a> and
<a href="https://fedoraproject.org/wiki/User:Kparal">Kamil Paral</a> from the Fedora QA
team on bringing some installation testing expertise to Fedora and establishing
an <a href="http://beaker.fedoraproject.org/bkr/">open source test lab</a>
to perform automated testing in. The infrastructure is
already in relatively usable condition so I've decided to share this information
with the community.</p>

<h2>Beaker is Running Our Test Lab</h2>

<p><a href="http://beaker-project.org/">Beaker</a> is the software suite that powers the test
lab infrastructure. It is quite complex, with many components and sometimes not
very straight-forward to set up. Tim has been working on that with me giving it
a try and reporting issues as they have been discovered and fixed.</p>

<p>In the process of working on this I've managed to create
<a href="http://gerrit.beaker-project.org/#/q/owner:%22Alexander+Todorov%22,n,z">couple of patches</a>
against Beaker and friends. They are still pending release in a future version
because of more urgent bug fixes which need to released first.</p>

<h2>SNAKE is The Kickstart Template Server</h2>

<p><a href="https://fedorahosted.org/snake/">SNAKE</a> is a client/server Python framework used
to support Anaconda installations. It supports plain text ks.cfg files, IIRC those
were static templates, no variable substitution.</p>

<p>The other possibility is Python templates based on Pykickstart:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">pykickstart.constants</span> <span class="kn">import</span> <span class="n">KS_SCRIPT_POST</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">pykickstart.parser</span> <span class="kn">import</span> <span class="n">Script</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">installdefaults</span> <span class="kn">import</span> <span class="n">InstallKs</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="nf">ks</span><span class="p">(</span><span class="o">**</span><span class="n">context</span><span class="p">):</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="s">&#39;&#39;&#39;Anaconda autopart&#39;&#39;&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="n">ks</span><span class="o">=</span><span class="n">InstallKs</span><span class="p">()</span>
</span><span class='line'><span class="n">ks</span><span class="o">.</span><span class="n">packages</span><span class="o">.</span><span class="n">add</span><span class="p">([</span><span class="s">&#39;@base&#39;</span><span class="p">])</span>
</span><span class='line'>
</span><span class='line'><span class="n">ks</span><span class="o">.</span><span class="n">clearpart</span><span class="p">(</span><span class="n">initAll</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'><span class="n">ks</span><span class="o">.</span><span class="n">autopart</span><span class="p">(</span><span class="n">autopart</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">script</span> <span class="o">=</span> <span class="s">&#39;&#39;&#39;</span>
</span><span class='line'><span class="s">&lt;/code&gt;&lt;/pre&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="s">&lt;p&gt;cp /tmp/ks.cfg /mnt/sysimage/root/ks.cfg || </span><span class="se">\</span>
</span><span class='line'><span class="s">cp /run/install/ks.cfg /mnt/sysimage/root/ks.cfg</span>
</span><span class='line'><span class="s">&#39;&#39;&#39;</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="n">post</span> <span class="o">=</span> <span class="n">Script</span><span class="p">(</span><span class="n">script</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">KS_SCRIPT_POST</span><span class="p">,</span> <span class="n">inChroot</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</span><span class='line'><span class="n">ks</span><span class="o">.</span><span class="n">scripts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">post</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">return</span> <span class="n">ks</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>At the moment SNAKE is essentially abandoned but feature complete.
I'm thinking about adopting the project just in case we need to make some fixes.
Will let you know more about this when it happens.</p>

<h2>Open Source Test Suite</h2>

<p>I have been working on opening up several test cases for what we (QE) call
a tier #1 installation test suite. They can be found in
<a href="http://taskbot.cloud.fedoraproject.org/cgit/fedora-beaker-tests/">git</a>.
The tests are base on <a href="https://fedorahosted.org/beakerlib/">beakerlib</a> and
the legacy RHTS framework which is now part of Beaker.</p>

<p>This effort has been coordinated with Kamil as part of a pilot
project he's responsible for. I've been executing the same test suite against
earlier Fedora 20 snapshots but using an internal environment. Now everything
is going out in the open.</p>

<h2>Executing The Tests</h2>

<p>Well you can't do that - YET! There are command line client tools for Fedora
but Beaker and SNAKE are not well suited for use outside a restricted network
like LAN or VPN. There are issues with authentication most notably for SNAKE.</p>

<p>At the moment I have to ssh through two different systems to get proper access.
However this is been worked on. I've read about a rewrite which will allow Beaker
to utilize a custom authentication framework like FAS for example. Hopefully that
will be implemented soon enough.</p>

<p>I will also like to see the test systems have direct access to the Internet for
various reasons but this is not without its risks either. This is still to be
decided.</p>

<p>If you are interested anyway see the <code>kick-tests.sh</code> file in the test suite for
examples and command line options.</p>

<h2>Test Results</h2>

<p>The first successfully completed
<a href="http://beaker.fedoraproject.org/bkr/jobs/">test jobs</a> are jobs 50 to 58.
There's a failure in one of the test cases, namely SELinux related
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1027148">RHBZ #1027148</a>.</p>

<p>From what I can tell the lab is now working as expected and we can start doing
some testing against Fedora development snapshots.</p>

<p>Ping me or join #fedora-qa on irc.freenode.net if you'd like to join Fedora QA!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Keeping Backwards Compatibility for pykickstart]]></title>
    <link href="http://atodorov.org/blog/2013/11/13/keeping-backwards-compatibility-for-pykickstart/"/>
    <updated>2013-11-13T23:59:00+02:00</updated>
    <id>http://atodorov.org/blog/2013/11/13/keeping-backwards-compatibility-for-pykickstart</id>
    <content type="html"><![CDATA[<p>Consider the following scenario:</p>

<ul>
<li>I'm using <a href="https://fedorahosted.org/snake/">SNAKE</a> templates as part of my
installation testing work;</li>
<li>SNAKE has a dependency on pykickstart;</li>
<li>To test the latest and greatest kickstart features in Fedora we need the
latest version of pykickstart;</li>
<li>Latest pykickstart needs Python 2.7</li>
<li>Python 2.7 is not available on RHEL 6 which is used to host the test
infrastructure.</li>
</ul>


<p>Just yesterday I hit an issue with the above setup and figured Fedora QA is
in a kind of strange situation - we always need the latest but need it
conservative enough to run on RHEL 6. See the original thread at
<a href="https://www.redhat.com/archives/kickstart-list/2013-November/msg00001.html">kickstart-list</a>.</p>

<p>In this particular case the solution will be to remove the offending code
and implement the same functionality in backward-compatible manner. Also add
more tests. I will be working on this tomorrow (there's an older patch already).</p>

<p>The BIG question remains though - how do you manage software evolution and still
keep it compatible with older execution stacks? Please share your experience in
the comments section.</p>

<hr />

<p>PP: Spoiler - this is part of an ongoing effort to bring open source installation
testing expertise (my domain) into Fedora world, plus establish a community supported
test infrastructure. More info TBA soon.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Fedora 20 GNOME 3.10 Test Day Post-mortem]]></title>
    <link href="http://atodorov.org/blog/2013/10/11/fedora-20-gnome-3-dot-10-test-day-post-mortem/"/>
    <updated>2013-10-11T12:25:00+03:00</updated>
    <id>http://atodorov.org/blog/2013/10/11/fedora-20-gnome-3-dot-10-test-day-post-mortem</id>
    <content type="html"><![CDATA[<p><img src="/images/fedora/sausage-banner.png" title="Fedora sausage banner" alt="&quot;Fedora sausage banner&quot;" /></p>

<p>Here is my summary of the second Fedora Test Day hosted at
<a href="http://initlab.org">init Lab</a> yesterday.</p>

<p>Local attendance was a total disaster, in fact I was testing once again by my own.
This time
there were more people in the lab, all busy with their daily routines and tasks.
There were no people who came for the testing :(. I will have to try different
venues in the future and see if the situation improves.</p>

<p>On the testing front I managed to score 5 bugs against
<a href="https://bugzilla.gnome.org/buglist.cgi?bug_id=709797,709799,709806,709810">GNOME</a>
and <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1017807">Fedora</a>.
You can see the other test results and bugs on the
<a href="https://fedoraproject.org/wiki/Test_Day:2013-10-10_Gnome_3.10">wiki</a>.</p>

<p>There are two things I didn't like in particular</p>

<ul>
<li>GNOME 3 as well as its classic mode - simply not the environment I'm used to;</li>
<li>Having to record test results in the wiki! I'm
<a href="https://lists.fedoraproject.org/pipermail/test/2013-October/118284.html">writing</a>
to the Fedora QA mailing list about that as we speak.</li>
</ul>


<p>At one time I was engaged in a discussion about which Bulgarian keyboard layout
should be the default in GNOME simply because of
<a href="https://bugzilla.gnome.org/show_bug.cgi?id=709799">GNOME #709799</a>. The default
keyboard layout will be Bulgarian (traditional phonetic) aka bg+phonetic.</p>

<p><blockquote><p>(16,13,26) rtcm: atodorov: are you bulgarian and/or live in bulgaria?<br/>(16,14,20) rtcm: atodorov: if yes, I wanted to know which keyboard layout most people expect there to be the default<br/>(16,16,34) atodorov: rtcm: I'm a Bulgarian, however I can't tell which one. Both Phonetic and standard (BDS) are common<br/>(16,16,54) atodorov: a safe bet is to go with phonetic I guess.<br/>(16,19,46) rtcm: atodorov: can you tell me which one is it in XKB terms? is it "bg", "bg+bas_phonetic" or "bg+phonetic" ?<br/>(16,20,51) rtcm: they're labeled as "Bulgarian", "Bulgarian (new phonetic)" and "Bulgarian (traditional phonetic)"<br/>(16,21,30) atodorov: bg+phonetic is the traditional phonetic<br/>(16,22,04) atodorov: bg labeled as "Bulgarian" is the standard one I guess. Here we call it BDS after the standardization institute<br/>(16,22,34) atodorov: bg+bas_phonetic is created from the Bulgarian Academy of Science and is not very popular as far as I know. I've never seen it in use<br/>(16,23,15) rtcm: atodorov: all I want to know is what most people would expect? like what does windows do by default? that's a good bet<br/>(16,27,46) atodorov: rtcm: I'm just being told that new Windows releases use yet another layout by default, which is like phonetic but with some characters in new places and people don't like that<br/>(16,27,53) atodorov: my safe bet goes to bg+phonetic<br/>(16,29,05) rtcm: ok, thanks</p></blockquote></p>

<p>It is a rare occasion when you get to make a decision that affects a large group
of people and I hope you don't hate me for that!</p>

<p>Do you want to see more Fedora Test Days happening in Sofia? Join me and I will
organize some more!</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Fedora 20 Virtualization Test Day Post-mortem]]></title>
    <link href="http://atodorov.org/blog/2013/10/08/fedora-20-virtualization-test-day-post-mortem/"/>
    <updated>2013-10-08T22:01:00+03:00</updated>
    <id>http://atodorov.org/blog/2013/10/08/fedora-20-virtualization-test-day-post-mortem</id>
    <content type="html"><![CDATA[<p><img src="/images/fedora/fedora20-banner.png" title="Fedora 20 banner" alt="&quot;Fedora 20 banner&quot;" /></p>

<p>Here is a quick summary of the first Fedora Test Day in Sofia I hosted at
<a href="http://initlab.org">init Lab</a> today.</p>

<p>Attendance was quite poor, actually nobody else except me participated but
almost nobody else visited the hackespace as well. I get that it is a
working day and Test Days conflict with regular business hours but this
is not going to change anyway. On the other hand where were all the freelancers
and non-office job workers who usually hang around in the Lab? I have no idea!</p>

<p>On IRC there was much better activity, 5 or 6 people were testing across
Asia, Europe and USA time zones. You can see the test results
<a href="http://209.132.184.192/testdays/show_event?event_id=7">here</a>.
I've started filing quite a few bugs in the morning and continued well into the
afternoon. I've managed to file a total of
<a href="https://bugzilla.redhat.com/buglist.cgi?bug_id=1016435,1016449,1016488,1016530,1016604,1016613,1016648,1016663,1016704,1016715">10 bugs</a>.
Some of them were not related to virtualization and some of them turned out to be
duplicates or not a bug. I even managed to file 2 duplicate bugs which likely have the
same root cause myself :).</p>

<p>I've also experienced two bugs filed by other people:
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=967371">RHBZ #967371</a> for MATE desktop
and <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1015636">RHBZ #1015636</a> for
virt-manager's Save/Restore functionality.</p>

<p>I've tried ARM on x86_64 but that didn't get anywhere near a running system.
I will make another post about ARM and what I've discovered there.</p>

<p>The one thing I liked is the
<a href="http://209.132.184.192/testdays/show_event?event_id=7">test results application</a>.
It is not what I'm used to when dealing with RHEL, has far less features but is
very fast and easy to use and suits the Test Days participants just fine.
And is definitely much easier to use compared to filing results in the wiki.</p>

<p>Overall Fedora 20 virtualization status according to me is pretty good.</p>

<p>I hope to see more attendance <a href="http://initlab.org/event/gnome-test-day">on Thursday</a>
when we're going to test GNOME 3.10.</p>
]]></content>
  </entry>
  
</feed>
