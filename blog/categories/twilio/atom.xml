<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: Twilio | atodorov.org]]></title>
  <link href="http://atodorov.org/blog/categories/twilio/atom.xml" rel="self"/>
  <link href="http://atodorov.org/"/>
  <updated>2013-10-11T23:15:05+03:00</updated>
  <id>http://atodorov.org/</id>
  <author>
    <name><![CDATA[Alexander Todorov]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Twilio is Located in Amazon Web Services US East]]></title>
    <link href="http://atodorov.org/blog/2013/06/24/twilio-is-located-in-amazon-web-services-us-east/"/>
    <updated>2013-06-24T23:43:00+03:00</updated>
    <id>http://atodorov.org/blog/2013/06/24/twilio-is-located-in-amazon-web-services-us-east</id>
    <content type="html"><![CDATA[<p><blockquote><p>Where do I store my audio files in order to minimize download and call wait time?</p></blockquote></p>

<p>Twilio is a cloud vendor that provides telephony services.
It can download and <code>&lt;Play&gt;</code> arbitrary audio files and will cache the files
for better performance.</p>

<p>Twilio support told me they are not disclosing the location of their servers,
so from my web application hosted in AWS US East:
<div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>ivr-otb.rhcloud.com logs<span class="o">]</span>&gt; grep TwilioProxy access_log-* | cut -f 1 -d <span class="s1">&#39;-&#39;</span> | sort | uniq
</span><span class='line'>10.125.90.172
</span><span class='line'>10.214.183.239
</span><span class='line'>10.215.187.220
</span><span class='line'>10.245.155.18
</span><span class='line'>10.255.119.159
</span><span class='line'>10.31.197.102
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Now let's map these addresses to host names. From another EC2 system, also in Amazon US East:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
<span class='line-number'>88</span>
<span class='line-number'>89</span>
<span class='line-number'>90</span>
<span class='line-number'>91</span>
<span class='line-number'>92</span>
<span class='line-number'>93</span>
</pre></td><td class='code'><pre><code class='bash'><span class='line'><span class="o">[</span>ec2-user@ip-10-29-206-86 ~<span class="o">]</span><span class="nv">$ </span>dig -x 10.125.90.172 -x 10.214.183.239 -x 10.215.187.220 -x 10.245.155.18 -x 10.255.119.159 -x 10.31.197.102&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;; &amp;lt;&amp;lt;&gt;&gt; DiG 9.8.2rc1-RedHat-9.8.2-0.17.rc1.29.amzn1 &amp;lt;&amp;lt;&gt;&gt; -x 10.125.90.172 -x 10.214.183.239 -x 10.215.187.220 -x 10.245.155.18 -x 10.255.119.159 -x 10.31.197.102
</span><span class='line'>;; global options: +cmd
</span><span class='line'>;; Got answer:
</span><span class='line'>;; -&gt;&gt;HEADER&amp;lt;&amp;lt;- opcode: QUERY, status: NOERROR, id: 43245
</span><span class='line'>;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; QUESTION SECTION:
</span><span class='line'>;172.90.125.10.in-addr.arpa.    IN      PTR&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; ANSWER SECTION:
</span><span class='line'>172.90.125.10.in-addr.arpa. 113 IN      PTR     ip-10-125-90-172.ec2.internal.&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; Query <span class="nb">time</span>: 1 msec
</span><span class='line'>;; SERVER: 172.16.0.23#53<span class="o">(</span>172.16.0.23<span class="o">)</span>
</span><span class='line'>;; WHEN: Mon Jun 24 20:48:21 2013
</span><span class='line'>;; MSG SIZE  rcvd: 87&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; Got answer:
</span><span class='line'>;; -&gt;&gt;HEADER&amp;lt;&amp;lt;- opcode: QUERY, status: NOERROR, id: 52693
</span><span class='line'>;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; QUESTION SECTION:
</span><span class='line'>;239.183.214.10.in-addr.arpa.   IN      PTR&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; ANSWER SECTION:
</span><span class='line'>239.183.214.10.in-addr.arpa. 42619 IN   PTR     domU-12-31-39-0B-B0-01.compute-1.internal.&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; Query <span class="nb">time</span>: 0 msec
</span><span class='line'>;; SERVER: 172.16.0.23#53<span class="o">(</span>172.16.0.23<span class="o">)</span>
</span><span class='line'>;; WHEN: Mon Jun 24 20:48:21 2013
</span><span class='line'>;; MSG SIZE  rcvd: 100&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; Got answer:
</span><span class='line'>;; -&gt;&gt;HEADER&amp;lt;&amp;lt;- opcode: QUERY, status: NOERROR, id: 25255
</span><span class='line'>;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; QUESTION SECTION:
</span><span class='line'>;220.187.215.10.in-addr.arpa.   IN      PTR&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; ANSWER SECTION:
</span><span class='line'>220.187.215.10.in-addr.arpa. 43140 IN   PTR     domU-12-31-39-0C-B8-2E.compute-1.internal.&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; Query <span class="nb">time</span>: 0 msec
</span><span class='line'>;; SERVER: 172.16.0.23#53<span class="o">(</span>172.16.0.23<span class="o">)</span>
</span><span class='line'>;; WHEN: Mon Jun 24 20:48:21 2013
</span><span class='line'>;; MSG SIZE  rcvd: 100&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; Got answer:
</span><span class='line'>;; -&gt;&gt;HEADER&amp;lt;&amp;lt;- opcode: QUERY, status: NOERROR, id: 15099
</span><span class='line'>;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; QUESTION SECTION:
</span><span class='line'>;18.155.245.10.in-addr.arpa.    IN      PTR&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; ANSWER SECTION:
</span><span class='line'>18.155.245.10.in-addr.arpa. 840 IN      PTR     ip-10-245-155-18.ec2.internal.&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; Query <span class="nb">time</span>: 0 msec
</span><span class='line'>;; SERVER: 172.16.0.23#53<span class="o">(</span>172.16.0.23<span class="o">)</span>
</span><span class='line'>;; WHEN: Mon Jun 24 20:48:21 2013
</span><span class='line'>;; MSG SIZE  rcvd: 87&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; Got answer:
</span><span class='line'>;; -&gt;&gt;HEADER&amp;lt;&amp;lt;- opcode: QUERY, status: NOERROR, id: 28878
</span><span class='line'>;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; QUESTION SECTION:
</span><span class='line'>;159.119.255.10.in-addr.arpa.   IN      PTR&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; ANSWER SECTION:
</span><span class='line'>159.119.255.10.in-addr.arpa. 43140 IN   PTR     domU-12-31-39-01-70-51.compute-1.internal.&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; Query <span class="nb">time</span>: 0 msec
</span><span class='line'>;; SERVER: 172.16.0.23#53<span class="o">(</span>172.16.0.23<span class="o">)</span>
</span><span class='line'>;; WHEN: Mon Jun 24 20:48:21 2013
</span><span class='line'>;; MSG SIZE  rcvd: 100&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; Got answer:
</span><span class='line'>;; -&gt;&gt;HEADER&amp;lt;&amp;lt;- opcode: QUERY, status: NOERROR, id: 28727
</span><span class='line'>;; flags: qr rd ra; QUERY: 1, ANSWER: 1, AUTHORITY: 0, ADDITIONAL: 0&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; QUESTION SECTION:
</span><span class='line'>;102.197.31.10.in-addr.arpa.    IN      PTR&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; ANSWER SECTION:
</span><span class='line'>102.197.31.10.in-addr.arpa. 840 IN      PTR     ip-10-31-197-102.ec2.internal.&lt;/p&gt;
</span><span class='line'>
</span><span class='line'>&lt;p&gt;;; Query <span class="nb">time</span>: 0 msec
</span><span class='line'>;; SERVER: 172.16.0.23#53<span class="o">(</span>172.16.0.23<span class="o">)</span>
</span><span class='line'>;; WHEN: Mon Jun 24 20:48:21 2013
</span><span class='line'>;; MSG SIZE  rcvd: 87
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>In short:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>ip-10-125-90-172.ec2.internal.
</span><span class='line'>ip-10-245-155-18.ec2.internal.
</span><span class='line'>ip-10-31-197-102.ec2.internal.
</span><span class='line'>domU-12-31-39-01-70-51.compute-1.internal.
</span><span class='line'>domU-12-31-39-0B-B0-01.compute-1.internal.
</span><span class='line'>domU-12-31-39-0C-B8-2E.compute-1.internal.</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>The <code>ip-*.ec2.internal</code> are clearly in US East. The <code>domU-*.computer-1.internal</code> also
look like US East although I'm not 100% sure what is the difference between the two.
The later ones look like HVM guests while the former ones are para-virtualized.</p>

<p>For comparison here are some internal addresses from my own EC2 systems:</p>

<ul>
<li>ip-10-228-237-207.eu-west-1.compute.internal - EU Ireland</li>
<li>ip-10-248-19-46.us-west-2.compute.internal - US West Oregon</li>
<li>ip-10-160-58-141.us-west-1.compute.internal - US West N. California</li>
</ul>


<p>After relocating my audio files to an S3 bucket in US East the average call length
dropped from 2:30 min to 2:00 min for the same IVR choices. This also minimizes
the costs since Twilio charges per minute of incoming/outgoing calls.
I think the audio quality has improved as well.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Django Tips: Using Cache for Stateful HTTP]]></title>
    <link href="http://atodorov.org/blog/2013/06/19/django-tips-using-cache-for-stateful-http/"/>
    <updated>2013-06-19T13:50:00+03:00</updated>
    <id>http://atodorov.org/blog/2013/06/19/django-tips-using-cache-for-stateful-http</id>
    <content type="html"><![CDATA[<p>How do you keep state when working with a stateless protocol like HTTP?
One possible answer is to use a cache back-end.</p>

<p>I'm working on an IVR application demo with Django and Twilio. The caller
will make multiple choices using the phone keyboard. All of this needs to be
put together and sent back to another server for processing. In my views
I've added a simple cache get/set lines to preserve the selection.</p>

<p>Here's how it looks with actual application logic omitted</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="nf">incoming_call</span><span class="p">(</span><span class="n">request</span><span class="p">):</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="n">call_sid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;CallSid&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">caller_id</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;From&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">state</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;from&#39;</span> <span class="p">:</span> <span class="n">caller_id</span><span class="p">}</span>
</span><span class='line'><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">call_sid</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">&#39;step2.xml&#39;</span><span class="p">)</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="nf">step2</span><span class="p">(</span><span class="n">request</span><span class="p">):</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="n">call_sid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;CallSid&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">selection</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;Digits&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="n">state</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">call_sid</span><span class="p">,</span> <span class="p">{})</span>
</span><span class='line'><span class="n">state</span><span class="p">[</span><span class="s">&#39;step2_selection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">selection</span>
</span><span class='line'><span class="n">cache</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">call_sid</span><span class="p">,</span> <span class="n">state</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">&#39;final_step.xml&#39;</span><span class="p">)</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span><span class="k">def</span> <span class="nf">final_step</span><span class="p">(</span><span class="n">request</span><span class="p">):</span><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="n">call_sid</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;CallSid&#39;</span><span class="p">,</span> <span class="s">&#39;&#39;</span><span class="p">)</span>
</span><span class='line'><span class="n">selection</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">GET</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;Digits&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
</span><span class='line'>
</span><span class='line'><span class="n">state</span> <span class="o">=</span> <span class="n">cache</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">call_sid</span><span class="p">,</span> <span class="p">{})</span>
</span><span class='line'><span class="n">state</span><span class="p">[</span><span class="s">&#39;final_step_selection&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">selection</span>
</span><span class='line'>
</span><span class='line'><span class="n">Backend</span><span class="o">.</span><span class="n">process_user_selections</span><span class="p">(</span><span class="n">state</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="k">return</span> <span class="n">render</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="s">&#39;thank_you.xml&#39;</span><span class="p">)</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>At each step Django will update the current state associated with this call and return
a <a href="https://www.twilio.com/docs/api/twiml">TwiML</a> XML response. <code>CallSid</code> is a handy unique
identifier provided by Twilio.</p>

<p>I am using the latest <a href="http://github.com/atodorov/django-s3-cache">django-s3-cache</a> version
which properly works with directories. When going to production that will likely switch to
Amazon ElastiCache.</p>
]]></content>
  </entry>
  
</feed>
