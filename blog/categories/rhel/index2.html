<!DOCTYPE html>
<html lang="en">

<head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">

            <meta name="google-site-verification" content="XynqZtldWNBbmsynVQZremIxaaO8Wgs6AGR8UZ7KIkM">

        <title>atodorov.org - Tag RHEL</title>

        <link href="http://feeds.feedburner.com/atodorov" type="application/atom+xml" rel="alternate" title="atodorov.org Full Atom Feed" />
        <!-- Bootstrap Core CSS -->
        <link href="http://atodorov.org/theme/css/bootstrap.min.css" rel="stylesheet">

        <!-- Custom CSS -->
        <link href="http://atodorov.org/theme/css/clean-blog.min.css" rel="stylesheet">

        <!-- Code highlight color scheme -->
            <link href="http://atodorov.org/theme/css/code_blocks/github.css" rel="stylesheet">

            <!-- CSS specified by the user -->
            <link href="http://atodorov.org/override.css" rel="stylesheet">

        <!-- Custom Fonts -->
        <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
        <![endif]-->

                <meta property="fb:admins" content="1616937247" >
                <meta property="og:locale" content="en_US">
		<meta property="og:site_name" content="atodorov.org">
            <meta name="twitter:card" content="summary_large_image">
            <meta name="twitter:site" content="@atodorov_">
            <meta name="twitter:title" content="atodorov.org">
            <meta name="twitter:description" content="you can logoff, but you can never leave">
                <meta name="twitter:image" content="http://atodorov.org//images/header_02.jpg">
</head>

<body>

    <!-- Navigation -->
    <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header page-scroll">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="http://atodorov.org/">atodorov.org</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-right">
                        <li><a href="http://mrsenko.com/?utm_source=atodorov.org&utm_medium=blog&utm_campaign=menu">Mr. Senko</a></li>

                </ul>
            </div>
            <!-- /.navbar-collapse -->
        </div>
        <!-- /.container -->
    </nav>

        <header class="intro-header" style="background-image: url('/images/header_02.jpg')">
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <div class="page-heading">
                        <h1>Tag RHEL</h1>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Content -->
    <div class="container">
        <div class="row">
            <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="post-preview">
            <a href="http://atodorov.org/blog/2013/08/23/red-hats-bugzilla-hits-one-million-bugs/" rel="bookmark" title="Permalink to Red Hat's Bugzilla Hits One Million Bugs">
                <h2 class="post-title">
                    Red Hat's Bugzilla Hits One Million Bugs
                </h2>
            </a>
                <p><img alt="&quot;RHBZ 1 million&quot;" src="/images/redhat_1mil_bugs.jpg" title="RHBZ 1 million" /></p>
<p>Red Hat's Bugzilla passed the 1 million bugs milestone yesterday!
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=1000000">RHBZ #1000000</a> has been
filed by Anton Arapov, a kernel engineer and a very nice guy (I know him btw).
I've filed several bugs yesterday but the last one was #999941. A bit too short!</p>
<p>To celebrate this event I dare you to pick some bugs from Bugzilla that you find
interesting or frustrating and I will try to analyze and explain them from a
QA engineer's point of view. Since I've reported over 1000 bugs and been involved in
another close to 5000 I think I will be able to answer almost any question.</p>
<p>Challenge accepted!</p>
            <p class="post-meta">Posted by
                    <a href="http://atodorov.org/author/alexander-todorov.html">Alexander Todorov</a>
                 on Fri 23 August 2013
            </p>
<p>There are <a href="http://atodorov.org/blog/2013/08/23/red-hats-bugzilla-hits-one-million-bugs/#disqus_thread">comments</a>.</p>        </div>
        <div class="post-preview">
            <a href="http://atodorov.org/blog/2013/08/23/how-to-find-your-red-hat-account-number/" rel="bookmark" title="Permalink to Tip: How to Find Your Red Hat Account Number">
                <h2 class="post-title">
                    Tip: How to Find Your Red Hat Account Number
                </h2>
            </a>
                <p><img src="/images/redhat_account_number.png" style="float:left;display:inline-block;margin-right:10px;" /></p>
<p>One thing you need to know when ordering Red Hat subscriptions is your
account number. It is available in the drop down menu at the top right
corner after you login at <a href="https://access.redhat.com">https://access.redhat.com</a>.</p>
<p>New accounts don't have an account number. It will be generated after
the first subscription activation.</p>
<p>If you need to know more about Red Hat's ordering process just ask me!</p>
            <p class="post-meta">Posted by
                    <a href="http://atodorov.org/author/alexander-todorov.html">Alexander Todorov</a>
                 on Fri 23 August 2013
            </p>
<p>There are <a href="http://atodorov.org/blog/2013/08/23/how-to-find-your-red-hat-account-number/#disqus_thread">comments</a>.</p>        </div>
        <div class="post-preview">
            <a href="http://atodorov.org/blog/2013/07/19/ssh-from-linux-to-blackberry-z10/" rel="bookmark" title="Permalink to SSH from Linux to BlackBerry Z10">
                <h2 class="post-title">
                    SSH from Linux to BlackBerry Z10
                </h2>
            </a>
                <p>You can SSH into a <a href="http://amzn.to/12y4ewJ">BlackBerry Z10</a> device even on Linux.
I'm using Red Hat Enterprise Linux 6 and here is how to establish the connection.</p>
<p>1) <a href="/blog/2013/07/17/tip-how-to-enable-usb-networking-between-blackberry-z10-and-red-hat-enterprise-linux-6/">Enable USB networking</a>
between your Linux desktop and the Z10;</p>
<p>2) Install the <a href="https://developer.blackberry.com/develop/platform_choice/ndk.html">Momentics IDE</a>.
You need it to create debug tokens and to start the SSH daemon on the device;</p>
<p>3) Obtain <a href="https://www.blackberry.com/SignedKeys/codesigning.html">signing keys</a>
and create a debug token by following the wizard in the IDE.
I just started a new project and followed the instructions;</p>
<p>4) Install debug token on device using the IDE. From <code>Window -&gt; Preferences</code> select
<code>Blackberry -&gt; Signing</code>. Just create and deploy the debug token on the device. Mine was
automatically discovered so I just had to follow the prompts;</p>
<p>5) Reboot and re-enable development mode (I'm not sure if this was necessary);</p>
<p>6) Generate a <strong>4096 bit</strong> key for SSH. Smaller keys won't work. You can use your
current key if it is 4096 bit;</p>
<div class="highlight"><pre><span class="nv">$ </span>ssh-keygen -t rsa -b 4096
Generating public/private rsa key pair.
Enter file in which to save the key <span class="o">(</span>/home/atodorov/.ssh/id_rsa<span class="o">)</span>: /home/atodorov/.rim/testKey_4096_rsa
/home/atodorov/.rim/testKey_4096_rsa already exists.
Overwrite <span class="o">(</span>y/n<span class="o">)</span>? y
Enter passphrase <span class="o">(</span>empty <span class="k">for</span> no passphrase<span class="o">)</span>:
Enter same passphrase again:
Your identification has been saved in /home/atodorov/.rim/testKey_4096_rsa.
Your public key has been saved in /home/atodorov/.rim/testKey_4096_rsa.pub.
The key fingerprint is:
77:73:55:03:e1:fc:5b:df:a6:e9:2c:b4:d4:1e:0c:b2 atodorov@redbull.mini
The key<span class="err">&#39;</span>s randomart image is:
+--<span class="o">[</span> RSA 4096<span class="o">]</span>----+
<span class="p">|</span>             oo..<span class="p">|</span>
<span class="p">|</span>            o   o<span class="p">|</span>
<span class="p">|</span>             o  .<span class="p">|</span>
<span class="p">|</span>          . . .. <span class="p">|</span>
<span class="p">|</span>        S .oo+...<span class="p">|</span>
<span class="p">|</span>         .E.oo+ <span class="o">=</span><span class="p">|</span>
<span class="p">|</span>           o o o+<span class="p">|</span>
<span class="p">|</span>            o..+ <span class="p">|</span>
<span class="p">|</span>             <span class="nv">o</span><span class="o">=</span>  <span class="p">|</span>
+-----------------+
</pre></div>


<p>7) Update key permissions, since ssh complains:</p>
<div class="highlight"><pre>    $ chmod 600 ~/.rim/testKey_4096_rsa.pub
</pre></div>


<p>8) By default SSH is not listening on your BlackBerry. Use the <code>blackberry-connect</code>
command to start the SSH daemon on the device. It will upload your public SSH key
to the device and start the SSH daemon on the other side. <code>password</code> is your device
password;</p>
<div class="highlight"><pre><span class="nv">$ </span><span class="nb">pwd</span>
/home/atodorov/bbndk/host_10_1_0_231/linux/x86/usr/bin

<span class="nv">$ </span>./blackberry-connect 169.254.0.1 -password <span class="m">123456</span> -sshPublicKey ~/.rim/testKey_4096_rsa.pub
Info: Connecting to target 169.254.0.1:4455
Info: Authenticating with target 169.254.0.1:4455
Info: Encryption parameters verified
Info: Authenticating with target credentials.
Info: Successfully authenticated with target credentials.
Info: Sending ssh key to target 169.254.0.1:4455
Info: ssh key successfully transferred.
Info: Successfully connected. This application must remain running in order to use debug tools. Exiting the application will terminate this connection.
</pre></div>


<p>9) Check if SSH is running on the device</p>
<div class="highlight"><pre><span class="nv">$ </span>nmap 169.254.0.1

Starting Nmap 5.51 <span class="o">(</span> http://nmap.org <span class="o">)</span> at 2013-07-18 10:19 EEST
Stats: 0:00:01 elapsed<span class="p">;</span> <span class="m">0</span> hosts completed <span class="o">(</span><span class="m">1</span> up<span class="o">)</span>, <span class="m">1</span> undergoing Connect Scan
Connect Scan Timing: About 14.30% <span class="k">done</span><span class="p">;</span> ETC: 10:20 <span class="o">(</span>0:00:06 remaining<span class="o">)</span>
Nmap scan report <span class="k">for</span> 169.254.0.1
Host is up <span class="o">(</span>0.00097s latency<span class="o">)</span>.
Not shown: <span class="m">991</span> closed ports
PORT     STATE SERVICE
22/tcp   open  ssh
80/tcp   open  http
139/tcp  open  netbios-ssn
443/tcp  open  https
445/tcp  open  microsoft-ds
1111/tcp open  lmsocialserver
5555/tcp open  freeciv
8000/tcp open  http-alt
8443/tcp open  https-alt

Nmap <span class="k">done</span>: <span class="m">1</span> IP address <span class="o">(</span><span class="m">1</span> host up<span class="o">)</span> scanned in 12.47 seconds
</pre></div>


<p>10)  Use SSH with the specified key to connect to the Z10. Username is <code>devuser</code>.
Here's a simple session:</p>
<div class="highlight"><pre><span class="nv">$ </span>ssh -i ~/.rim/testKey_4096_rsa devuser@169.254.0.1
<span class="nv">$ </span>
<span class="nv">$ </span><span class="nb">pwd</span>
/accounts/devuser
<span class="nv">$ </span>uname -a 
QNX atodorovZ10 8.0.0 2013/05/02-08:42:48EDT OMAP4470_ES1.0_HS_London_Rev:08 armle
<span class="nv">$ </span>date
Fri Jul <span class="m">19</span> 23:39:19 EEST 2013
<span class="nv">$ </span>ifconfig 
lo0: <span class="nv">flags</span><span class="o">=</span>8049&lt;UP,LOOPBACK,RUNNING,MULTICAST&gt; mtu 33192
    inet 127.0.0.1 netmask 0xff000000
    inet6 ::1 prefixlen 128
    inet6 fe80::1%lo0 prefixlen <span class="m">64</span> scopeid 0x1
tiw_drv0: <span class="nv">flags</span><span class="o">=</span>8c02&lt;BROADCAST,OACTIVE,SIMPLEX,MULTICAST&gt; mtu 1500
    address: 1c:69:a5:d0:10:cd
tiw_sta0: <span class="nv">flags</span><span class="o">=</span>40008c43&lt;UP,BROADCAST,RUNNING,OACTIVE,SIMPLEX,MULTICAST,ACCEPTRTADV&gt; mtu 1500
    address: 1c:69:a5:d0:10:cd
    inet 192.168.0.100 netmask 0xffffff00 broadcast 192.168.0.255
    inet6 fe80::1e69:a5ff:fed0:10cd%tiw_sta0 prefixlen <span class="m">64</span> scopeid 0x12
tiw_p2pdev0: <span class="nv">flags</span><span class="o">=</span>8c02&lt;BROADCAST,OACTIVE,SIMPLEX,MULTICAST&gt; mtu 1500
    address: 1c:69:a5:d0:10:cd
tiw_p2pgrp0: <span class="nv">flags</span><span class="o">=</span>8c02&lt;BROADCAST,OACTIVE,SIMPLEX,MULTICAST&gt; mtu 1500
    address: 1c:69:a5:d0:10:cd
tiw_ibss0: <span class="nv">flags</span><span class="o">=</span>8c02&lt;BROADCAST,OACTIVE,SIMPLEX,MULTICAST&gt; mtu 1500
    address: 1c:69:a5:d0:10:cd
pflog0: <span class="nv">flags</span><span class="o">=</span><span class="m">0</span> mtu 33192
lo2: <span class="nv">flags</span><span class="o">=</span>8048&lt;LOOPBACK,RUNNING,MULTICAST&gt; mtu 33192
cellular0: <span class="nv">flags</span><span class="o">=</span>8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500
cellular1: <span class="nv">flags</span><span class="o">=</span>8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500
cellular2: <span class="nv">flags</span><span class="o">=</span>8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500
cellular3: <span class="nv">flags</span><span class="o">=</span>8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500
cellular4: <span class="nv">flags</span><span class="o">=</span>8810&lt;POINTOPOINT,SIMPLEX,MULTICAST&gt; mtu 1500
bptp0: <span class="nv">flags</span><span class="o">=</span>8043&lt;UP,BROADCAST,RUNNING,MULTICAST&gt; mtu 1356
    inet6 fe80::1e69:a5ff:fed0:10cd%bptp0 prefixlen <span class="m">64</span> scopeid 0x2d
    inet6 fd02:42ac:77b2:d543:c158:fabb:6276:80e6 prefixlen 8
ecm0: <span class="nv">flags</span><span class="o">=</span>8a43&lt;UP,BROADCAST,RUNNING,ALLMULTI,SIMPLEX,MULTICAST&gt; mtu 1500
    address: 1e:69:a5:d0:10:cd
    inet 169.254.0.1 netmask 0xfffffffc broadcast 169.254.0.3
    inet6 fe80::1c69:a5ff:fed0:10cd%ecm0 prefixlen <span class="m">64</span> scopeid 0x2e
</pre></div>


<p><strong>IMPORTANT:</strong> you can also use the WiFi address of the device to pass to
<code>backberry-connect</code> and ssh. It works for me.</p>
<p>I'm starting to explore the dark world of QNX in the next couple of days
and will keep you posted! Until then - happy hacking.</p>
            <p class="post-meta">Posted by
                    <a href="http://atodorov.org/author/alexander-todorov.html">Alexander Todorov</a>
                 on Fri 19 July 2013
            </p>
<p>There are <a href="http://atodorov.org/blog/2013/07/19/ssh-from-linux-to-blackberry-z10/#disqus_thread">comments</a>.</p>        </div>
        <div class="post-preview">
            <a href="http://atodorov.org/blog/2013/07/17/tip-how-to-enable-usb-networking-between-blackberry-z10-and-red-hat-enterprise-linux-6/" rel="bookmark" title="Permalink to Tip: How To Enable USB Networking Between BlackBerry Z10 and Red Hat Enterprise Linux 6">
                <h2 class="post-title">
                    Tip: How To Enable USB Networking Between BlackBerry Z10 and Red Hat Enterprise Linux 6
                </h2>
            </a>
                <p>On Linux there is a feature called USB networking which provides you with a 
TCP/IP connection to another device connected via USB cable. Here is how to
connect your <a href="http://amzn.to/12y4ewJ">BlackBerry Z10</a>
to your Linux laptop over USB. I use Red Hat Enterprise Linux but should work
out of the box for other distros too.</p>
<p>Connect the Z10 to your laptop:</p>
<div class="highlight"><pre>    $ lsusb
    Bus 001 Device 005: ID 0fca:8020 Research In Motion, Ltd. Blackberry Playbook (CD-Rom mode)
</pre></div>


<p>By default many USB devices will present a virtual CD-ROM with drivers for Windows.
This is the case here too. To change it go to <code>Settings - Storage and Access</code> and
set <code>USB Connection</code> to <code>Connect to Mac</code>!</p>
<p>If necessary plug out and back in the Z10. </p>
<div class="highlight"><pre>    $ lsusb
    Bus 001 Device 007: ID 0fca:8013 Research In Motion, Ltd.

    $ ifconfig
    usb0      Link encap:Ethernet  HWaddr 1E:69:A5:D0:11:0A  
              inet addr:169.254.0.2  Bcast:169.254.0.3  Mask:255.255.255.252
              inet6 addr: fe80::1c69:a5ff:fed0:110a/64 Scope:Link
              UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
              RX packets:49 errors:0 dropped:0 overruns:0 frame:0
              TX packets:8 errors:0 dropped:0 overruns:0 carrier:0
              collisions:0 txqueuelen:1000 
              RX bytes:16002 (15.6 KiB)  TX bytes:1152 (1.1 KiB)
</pre></div>


<p><strong>IMPORTANT:</strong> In the same <code>Storage and Access</code> screen scroll down to
<code>USB Mass Storage</code> and turn it <code>Off</code>. If you don't do this your Z10 will appear
as USB flash drive and no USB networking will be available. This is how it looks:</p>
<div class="highlight"><pre>    $ lsusb
    Bus 001 Device 008: ID 0fca:8014 Research In Motion, Ltd.
</pre></div>


<p><strong>IMPORTANT:</strong> If you need your Z10 storage accessible together with USB networking
you can try accessing the device over Wi-Fi.
Configure it from the same <code>Storage and Access</code> screen. Then your device will be
available through Samba on its wireless IP address. I've tried it, works for me!</p>
<p>You don't need anything else to get this working. All set!</p>
<p>My intention is to use either USB networking or Wi-Fi to
<a href="http://supportforums.blackberry.com/t5/Testing-and-Deployment/How-to-use-blackberry-connect-to-Enable-SSH-Access/ta-p/1515447">connect to the Z10 shell</a>
and explore it in more details.</p>
            <p class="post-meta">Posted by
                    <a href="http://atodorov.org/author/alexander-todorov.html">Alexander Todorov</a>
                 on Wed 17 July 2013
            </p>
<p>There are <a href="http://atodorov.org/blog/2013/07/17/tip-how-to-enable-usb-networking-between-blackberry-z10-and-red-hat-enterprise-linux-6/#disqus_thread">comments</a>.</p>        </div>
        <div class="post-preview">
            <a href="http://atodorov.org/blog/2013/05/30/configuring-anonymous-ftp-uploads-on-red-hat-enterprise-linux-6/" rel="bookmark" title="Permalink to Configuring Anonymous FTP Uploads On Red Hat Enterprise Linux 6">
                <h2 class="post-title">
                    Configuring Anonymous FTP Uploads On Red Hat Enterprise Linux 6
                </h2>
            </a>
                <p>Install related packages and make configuration changes:</p>
<div class="highlight"><pre>yum -y install vsftp policycoreutils-python
sed -i &quot;s/#anon_upload_enable=YES/anon_upload_enable=YES/&quot; /etc/vsftpd/vsftpd.conf
</pre></div>


<p>Configure writable directory for uploads:</p>
<div class="highlight"><pre>mkdir /var/ftp/pub/upload
chgrp ftp /var/ftp/pub/upload
chmod 730 /var/ftp/pub/upload
</pre></div>


<p>Configure SELinux - this is <strong><a href="https://bugzilla.redhat.com/show_bug.cgi?id=968935">MISSING</a></strong>
from Red Hat's official docs:</p>
<div class="highlight"><pre>setsebool -P allow_ftpd_anon_write=1
semanage fcontext -a -t public_content_rw_t &#39;/var/ftp/pub/upload(/.*)&#39;
chcon -t public_content_rw_t /var/ftp/pub/upload
</pre></div>


<p>Start the service:</p>
<div class="highlight"><pre>chkconfig vsftpd on
service vsftpd start
</pre></div>
            <p class="post-meta">Posted by
                    <a href="http://atodorov.org/author/alexander-todorov.html">Alexander Todorov</a>
                 on Thu 30 May 2013
            </p>
<p>There are <a href="http://atodorov.org/blog/2013/05/30/configuring-anonymous-ftp-uploads-on-red-hat-enterprise-linux-6/#disqus_thread">comments</a>.</p>        </div>
        <div class="post-preview">
            <a href="http://atodorov.org/blog/2013/05/14/dual-password-encryption-with-encfs-on-red-hat-enterprise-linux-6/" rel="bookmark" title="Permalink to Dual Password Encryption With EncFS On Red Hat Enterprise Linux 6">
                <h2 class="post-title">
                    Dual Password Encryption With EncFS On Red Hat Enterprise Linux 6
                </h2>
            </a>
                <p>This article is a step-by-step guide to using two passwords with <a href="http://www.arg0.net/encfs">EncFS</a>.
The primary password is required and may be used to secure all data;
the secondary password is optional and may be stored on USB stick or
other removable media and used to secure more sensitive data. </p>
<p><img src="/images/encfs_raleigh.jpg" alt="Article in Raleigh" style="clear:both;display:block;"/>
The original article in Red Hat's Raleigh HQ!</p>
<p>This article has been originally written for and published by
<a href="http://magazine.redhat.com/2007/06/13/dual-password-encryption-with-encfs/">Red Hat Magazine</a>.
Here is a shortened version with updated commands for Red Hat Enterprise Linux 6.</p>
<h2>Technical Information</h2>
<p>EncFS provides an encrypted filesystem in user-space. EncFS provides security
against offline attacks like a stolen notebook.
EncFS works on files and directories, not an entire block device.
It modifies file names and contents.
The data is stored on the underlying filesystem and meta-data is preserved.
File attributes such as ownership, modification date and permission bits are not encrypted
and are visible to anybody. EncFS is acting like a translator between the user and
the filesystem, encrypting and decrypting on the fly.</p>
<p>EncFS is easy to use and requires no special setup. A local user has to be in the ‘fuse’
group to use EncFS. It does not require ‘root’ privileges.
EncFS can be used with secondary passwords. This could be used to store a separate set of files on the same encrypted filesystem. 
EncFS ignores files which do not decode properly, so files created with separate passwords will 
only be visible when the filesystem is mounted with the associated password.
There is the option to read passwords from an external program or stdin (standard input). 
This option combined with custom scripting makes EncFS very flexible.
By default, all FUSE based filesystems are visible only to the user who mounted them. 
No other users (including root) can view the filesystem contents.</p>
<h2>Installing EncFS</h2>
<p>Install fuse-encfs from <a href="https://fedoraproject.org/wiki/EPEL">EPEL</a>:</p>
<div class="highlight"><pre># yum install fuse-encfs
</pre></div>


<p>Load the FUSE module:</p>
<div class="highlight"><pre># /sbin/modprobe fuse
</pre></div>


<p>And, finally, add any users that will use EncFS to group ‘fuse’:</p>
<div class="highlight"><pre># usermod -Gfuse jdoe
</pre></div>


<h2>Using EncFS</h2>
<p>Using EncFS does not differ from using any other filesystem.
The only thing you need to do is to mount it somewhere and start creating 
files and directories under the mount point.</p>
<p><strong>Warning:</strong> Use only absolute path names with EncFS!</p>
<p>Create working directories:</p>
<div class="highlight"><pre><span class="nv">$ </span>mkdir -p ~/encrypted ~/plain
</pre></div>


<ul>
<li><code>plain/</code> – looks like a normal directory. All files stored here look like normal
files for the user who mounted this directory with EncFS. This acts like a virtual
directory performing encryption and decryption.</li>
<li><code>encrypted/</code> – looks garbled. The actual data is stored here and is encrypted.</li>
</ul>
<p>Now you can mount the new EncFS volume for the first time. This assumes a default configuration:</p>
<div class="highlight"><pre><span class="nv">$ </span>encfs /home/jdoe/encrypted /home/jdoe/plain
Creating new encrypted volume.
Please choose from one of the following options:
 enter <span class="s2">&quot;x&quot;</span> <span class="k">for</span> expert configuration mode,
 enter <span class="s2">&quot;p&quot;</span> <span class="k">for</span> pre-configured paranoia mode,
 anything <span class="k">else</span>, or an empty line will <span class="k">select</span> standard mode.
?&gt; 

Standard configuration selected.

Configuration finished.  The filesystem to be created has
the following properties:
Filesystem cipher: <span class="s2">&quot;ssl/aes&quot;</span>, version 3:0:2
Filename encoding: <span class="s2">&quot;nameio/block&quot;</span>, version 3:0:1
Key Size: <span class="m">192</span> bits
Block Size: <span class="m">1024</span> bytes
Each file contains <span class="m">8</span> byte header with unique IV data.
Filenames encoded using IV chaining mode.
File holes passed through to ciphertext.

Now you will need to enter a password <span class="k">for</span> your filesystem.
You will need to remember this password, as there is absolutely
no recovery mechanism.  However, the password can be changed
later using encfsctl.

New Encfs Password: **********
Verify Encfs Password: **********
</pre></div>


<p>Create a file:</p>
<div class="highlight"><pre><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">&quot;some content&quot;</span> &gt; ~/plain/file.one
</pre></div>


<p>Check contents in <code>plain/</code>:</p>
<div class="highlight"><pre><span class="nv">$ </span>ls -la ~/plain/
total 12
drwxrwxr-x. <span class="m">2</span> jdoe jdoe <span class="m">4096</span> May <span class="m">14</span> 21:31 .
drwx------. <span class="m">6</span> jdoe jdoe <span class="m">4096</span> May <span class="m">14</span> 21:29 ..
-rw-rw-r--. <span class="m">1</span> jdoe jdoe   <span class="m">13</span> May <span class="m">14</span> 21:31 file.one

<span class="nv">$ </span>cat ~/plain/file.one 
some content
</pre></div>


<p>Check what’s in <code>encrypted/</code>:</p>
<div class="highlight"><pre><span class="nv">$ </span>ls -la ~/encrypted/
total 16
drwxrwxr-x. <span class="m">2</span> jdoe jdoe <span class="m">4096</span> May <span class="m">14</span> 21:31 .
drwx------. <span class="m">6</span> jdoe jdoe <span class="m">4096</span> May <span class="m">14</span> 21:29 ..
-rw-rw-r--. <span class="m">1</span> jdoe jdoe <span class="m">1083</span> May <span class="m">14</span> 21:30 .encfs6.xml
-rw-rw-r--. <span class="m">1</span> jdoe jdoe   <span class="m">21</span> May <span class="m">14</span> 21:31 Wq5NZ6q-yP-fYNWYsjzFhHf9
</pre></div>


<p><strong>Warning:</strong> <code>.encfs6.xml</code> is a special file. When performing backups or restoring data,
make sure to keep this file!</p>
<p>Inspect the contents of encrypted file:</p>
<div class="highlight"><pre><span class="nv">$ </span>cat ~/encrypted/Wq5NZ6q-yP-fYNWYsjzFhHf9 
���r�N�M���<span class="s2">&quot;p��</span>
</pre></div>


<p>Unmount the filesystem and mount it again with another password:</p>
<div class="highlight"><pre><span class="nv">$ </span>fusermount -u ~/plain/
<span class="nv">$ </span>encfs --anykey /home/jdoe/encrypted /home/jdoe/plain
EncFS Password: *****
</pre></div>


<p><strong>Caution:</strong> We are using the --anykey option to allow secondary passwords.</p>
<p>Check <code>plain/</code> again. The directory is empty. Previous files were not decoded with the new password.</p>
<div class="highlight"><pre><span class="nv">$ </span>ls -la ~/plain/
total 8
drwxrwxr-x. <span class="m">2</span> jdoe jdoe <span class="m">4096</span> May <span class="m">14</span> 21:31 .
drwx------. <span class="m">6</span> jdoe jdoe <span class="m">4096</span> May <span class="m">14</span> 21:29 ..
</pre></div>


<p>Now create another file that will be in “hidden” mode:</p>
<div class="highlight"><pre><span class="nv">$ </span><span class="nb">echo</span> <span class="s2">&quot;hidden contents&quot;</span> &gt; ~/plain/file.two
</pre></div>


<p>Check again what’s in <code>encrypted/</code>. Both files are stored in the same directory:</p>
<div class="highlight"><pre><span class="nv">$ </span>ls -la ~/encrypted/
total 20
drwxrwxr-x. <span class="m">2</span> jdoe jdoe <span class="m">4096</span> May <span class="m">14</span> 21:35 .
drwx------. <span class="m">6</span> jdoe jdoe <span class="m">4096</span> May <span class="m">14</span> 21:29 ..
-rw-rw-r--. <span class="m">1</span> jdoe jdoe <span class="m">1083</span> May <span class="m">14</span> 21:30 .encfs6.xml
-rw-rw-r--. <span class="m">1</span> jdoe jdoe   <span class="m">24</span> May <span class="m">14</span> 21:35 PfkZHs16YsKkznnTujaVsOuS
-rw-rw-r--. <span class="m">1</span> jdoe jdoe   <span class="m">21</span> May <span class="m">14</span> 21:31 Wq5NZ6q-yP-fYNWYsjzFhHf9
</pre></div>


<p>Unmount and mount again using the first password:</p>
<div class="highlight"><pre><span class="nv">$ </span>fusermount -u ~/plain/
<span class="nv">$ </span>encfs --anykey /home/jdoe/encrypted /home/jdoe/plain
EncFS Password: **********
</pre></div>


<p>Inspect the contents of <code>plain/</code> again. The second file was not decoded properly and is not shown:</p>
<div class="highlight"><pre><span class="nv">$ </span>ls -la ~/plain/
total 12
drwxrwxr-x. <span class="m">2</span> jdoe jdoe <span class="m">4096</span> May <span class="m">14</span> 21:35 .
drwx------. <span class="m">6</span> jdoe jdoe <span class="m">4096</span> May <span class="m">14</span> 21:29 ..
-rw-rw-r--. <span class="m">1</span> jdoe jdoe   <span class="m">13</span> May <span class="m">14</span> 21:31 file.one
</pre></div>


<h2>Summary</h2>
<p>You have learned how to use encryption to protect your data.
There is also a nice graphical application 
for using EncFS with KDE called <a href="http://kde-apps.org/content/show.php?content=54078">K-EncFS</a>.
I'll be happy to answer any questions or comments.</p>
            <p class="post-meta">Posted by
                    <a href="http://atodorov.org/author/alexander-todorov.html">Alexander Todorov</a>
                 on Tue 14 May 2013
            </p>
<p>There are <a href="http://atodorov.org/blog/2013/05/14/dual-password-encryption-with-encfs-on-red-hat-enterprise-linux-6/#disqus_thread">comments</a>.</p>        </div>
        <div class="post-preview">
            <a href="http://atodorov.org/blog/2013/03/20/virtualization-platforms-supported-by-red-hat-enterprise-linux/" rel="bookmark" title="Permalink to Virtualization Platforms Supported by Red Hat Enterprise Linux">
                <h2 class="post-title">
                    Virtualization Platforms Supported by Red Hat Enterprise Linux
                </h2>
            </a>
                <p>This is mostly for my own reference, to have a handy list
of supported virtualization platforms by Red Hat Enterprise Linux.</p>
<h2>Software virtualization solutions</h2>
<p>A guest RHEL operating system is supported if it runs on the following
platforms:</p>
<ul>
<li>Xen shipped with RHEL Server</li>
<li>KVM shipped with RHEL Server or RHEV for Servers</li>
<li><a href="https://hardware.redhat.com/VMware">VMware</a> ESX/vSphere</li>
<li><a href="https://hardware.redhat.com/Microsoft">Microsoft Hyper-V</a></li>
</ul>
<p>Red Hat does not support Citrix XenServer. However, customers can
<a href="http://otb.bg">buy RHEL Server</a> and use it with Citrix XenServer
with the understanding that Red Hat will only support technical
issues that can be reproduced on bare metal.</p>
<p>The 
<a href="http://www.redhat.com/resourcelibrary/articles/enterprise-linux-virtualization-support">official virtualization support matrix</a>
shows which host/guest operating systems combinations are supported.</p>
<h2>Hardware partitioning</h2>
<p>Red Hat supports RHEL on hardware partitioning and virtualization solutions such as:</p>
<ul>
<li><a href="https://hardware.redhat.com/list.cgi?product=Red+Hat+Hardware+Certification&amp;quicksearch=IBM+System+Z">IBM System Z</a></li>
<li><a href="https://hardware.redhat.com/list.cgi?product=Red+Hat+Hardware+Certification&amp;quicksearch=IBM+POWER">IBM Power</a></li>
<li><a href="https://hardware.redhat.com/list.cgi?product=Red+Hat+Hardware+Certification&amp;quicksearch=PRIMEQUEST">Fujitsu PRIMEQUEST</a></li>
<li><a href="https://hardware.redhat.com/list.cgi?product=Red+Hat+Hardware+Certification&amp;quicksearch=Virtage">Hitachi Virtage</a></li>
</ul>
<p>Unfortunately the <a href="https://access.redhat.com/knowledge/articles/263573">recently updated</a>
hardware catalog
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=923802">doesn't allow to filter by hardware partitioning vs. virtualization platform</a>
so you need to know what you are looking for to find it :(.</p>
<h2>Red Hat Enterprise Linux as a guest on the Cloud</h2>
<p>Multiple public cloud providers are supported. Comprehensive list can be found here:
http://www.redhat.com/solutions/cloud-computing/public-cloud/find-partner/</p>
<p>You can also try <a href="http://redhat.force.com/finder/">Red Hat Partner Locator's</a>
advanced search. However at the time of this writing there are no partners
listed in the Cloud / Virtualization category.</p>
<p><strong>Warning:</strong> It is known that Amazon uses Xen with custom
modifications (not sure what version) and HP Cloud uses KVM but there
is not much public record about hypervisor technology used by most cloud providers.
Red Hat has partner agreements with these vendors and will commercially support 
only their platforms. This means that if you decide to use upstream Xen or anything
else not listed above, you are on your own. <strong>You have been warned!</strong></p>
<h2>Unsupported but works</h2>
<p>I'm not a big fan of running on top of unsupported environments
and I don't have the need to do so.
I've heard about people running CentOS (RHEL compatible) on VirtualBox
but I have no idea how well it works.</p>
<p>If you are using a different virtualization platform
(like LXC, OpenVZ, UML, 
<a target="_blank" href="http://www.amazon.com/s/?_encoding=UTF8&camp=1789&creative=390957&field-brandtextbin=Parallels%20Software&linkCode=ur2&node=229534&tag=atodorovorg-20">Parallels</a><img src="https://www.assoc-amazon.com/e/ir?t=atodorovorg-20&l=ur2&o=1" width="1" height="1" border="0"  style="border:none !important; margin:0px !important;" />
or other) let me know if CentOS/Fedora works on it.
Alternatively I can give it a try if you can provide me with ssh/VNC access to the machine.</p>
            <p class="post-meta">Posted by
                    <a href="http://atodorov.org/author/alexander-todorov.html">Alexander Todorov</a>
                 on Wed 20 March 2013
            </p>
<p>There are <a href="http://atodorov.org/blog/2013/03/20/virtualization-platforms-supported-by-red-hat-enterprise-linux/#disqus_thread">comments</a>.</p>        </div>
        <div class="post-preview">
            <a href="http://atodorov.org/blog/2013/02/13/secure-vnc-installation-red-hat-enterprise-linux/" rel="bookmark" title="Permalink to Secure VNC Installation of Red Hat Enterprise Linux 6">
                <h2 class="post-title">
                    Secure VNC Installation of Red Hat Enterprise Linux 6
                </h2>
            </a>
                <p><img src="/images/rhel6_welcome.png" alt="RHEL 6 welcome screen" />
Image CC-BY-SA,
<a href="https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Installation_Guide/sn-welcome-s390.html">Red Hat</a></p>
<p>From time to time I happen to remotely
<a href="http://otb.bg">install Red Hat Enterprise Linux</a>
servers via the Internet.
When the system configuration is not decided upfront you need
to use interactive mode. This means VNC in my case.</p>
<p>In this tutorial I will show you how to make VNC installations more secure
when using public networks to connect to the server.</p>
<h2>Meet your tools</h2>
<p>Starting with Red Hat Enterprise Linux 6 and all the latest Fedora releases, the
installer supports SSH connections during install.</p>
<blockquote>
<p>Note that by default, root has a blank password.</p>
<p>If you don't want any user to be able to ssh in and have full access to your hardware, 
you must specify sshpw for username root. Also note that if Anaconda fails to parse the 
kickstart file, it will allow anyone to login as root and have full access to your hardware.</p>
<p>Fedora Kickstart manual https://fedoraproject.org/wiki/Anaconda/Kickstart#sshpw</p>
</blockquote>
<h2>Preparation</h2>
<p>We are going to use SSH port forwarding and tunnel VNC traffic through it.
Create a kickstart file as shown below:</p>
<div class="highlight"><pre>install
url --url http://example.com/path/to/rhel6
lang en_US.UTF-8
keyboard us
network --onboot yes --device eth0 --bootproto dhcp
vnc --password=s3cr3t
sshpw --user=root s3cr3t
</pre></div>


<p>The first 5 lines configure the loader portion of the installer. They will setup
networking and fetch the installer image called stage2. This is completely automated.
<strong>NB:</strong> If you miss some of the lines or have a syntax error the installer will prompt for
values. You either need a remote console access or somebody present at the server console!</p>
<p>The last 2 lines configure passwords for VNC and SSH respectively.</p>
<p>Make this file
<a href="https://fedoraproject.org/wiki/Anaconda/Kickstart#Chapter_6._Making_the_Kickstart_File_Available">available</a>
over HTTP(S), FTP or NFS.</p>
<p><strong>NB:</strong> Make sure that the file is available on the same network where your server is,
or use HTTPS if on public networks.</p>
<h2>Installation</h2>
<p>Now, using your favorite installation media start the
installation process like this: </p>
<div class="highlight"><pre><span class="n">boot</span><span class="o">:</span> <span class="n">linux</span> <span class="n">sshd</span><span class="o">=</span><span class="mi">1</span> <span class="n">ks</span><span class="o">=</span><span class="n">http</span><span class="o">://</span><span class="n">example</span><span class="o">.</span><span class="na">com</span><span class="o">/</span><span class="n">ks</span><span class="o">.</span><span class="na">cfg</span>
</pre></div>


<p>After a minute or more the installer will load stage2, with the
interactive VNC session. You need to know the IP address or hostname
of the server. Either look into DHCP logs, have somebody look at the
server console and tell you that (it's printed on tty1) or script it in
a <a href="https://fedoraproject.org/wiki/Anaconda/Kickstart#Chapter_4._Pre-installation_Script">%pre</a>
script which will send you an email for example.</p>
<p>When ready, redirect one of your local ports through SSH to the VNC port on the server:</p>
<div class="highlight"><pre><span class="nv">$ </span>ssh -L 5902:localhost:5901 -N root@server.example.com
</pre></div>


<p>Now connect to DISPLAY :2 on your system to begin the installation:</p>
<div class="highlight"><pre><span class="nv">$ </span>vncviewer localhost:2 <span class="p">&amp;</span>
</pre></div>


<h2>Warning Bugs Present</h2>
<p>As it happens, I find bugs everywhere. This is no exception.
Depending on your network/DHCP configuration IP address during install may 
change mid-air and cause VNC client connection to freeze.</p>
<p>The reason for this bug is evident from the code (rhel6-branch):</p>
<div class="highlight"><span class="filename">iw/timezone_gui.py</span><pre><span class="k">if</span> <span class="ow">not</span> <span class="n">anaconda</span><span class="o">.</span><span class="n">isKickstart</span><span class="p">:</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">utcCheckbox</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="ow">not</span> <span class="n">hasWindows</span><span class="p">(</span><span class="n">anaconda</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">bootloader</span><span class="p">))</span>
</pre></div>


<div class="highlight"><span class="filename">textw/timezone_text.py</span><pre><span class="k">if</span> <span class="ow">not</span> <span class="n">anaconda</span><span class="o">.</span><span class="n">isKickstart</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">hasWindows</span><span class="p">(</span><span class="n">anaconda</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">bootloader</span><span class="p">):</span>
    <span class="n">asUtc</span> <span class="o">=</span> <span class="bp">True</span>
</pre></div>


<p>Because we are using a kickstart file Anaconda will assume the system clock <strong>DOES NOT</strong>
use UTC. If you forget to configure it manually you may see time on the server shifting
back or forward (depending on your timezone) while installing. If your DHCP is configured
for short lease time the address will expire before the installation completes. When new
address is requested from DHCP it may be different and this will cause your VNC connection
to freeze.</p>
<p>To workaround this issue select the appropriate value for the system clock settings during install
and possibly use static IP address during the installation.</p>
<h2>Feedback</h2>
<p>As always I'd love to hear your feedback in the comments section below. Let me know 
your tips and tricks to perform secure remote installations using public networks.</p>
            <p class="post-meta">Posted by
                    <a href="http://atodorov.org/author/alexander-todorov.html">Alexander Todorov</a>
                 on Wed 13 February 2013
            </p>
<p>There are <a href="http://atodorov.org/blog/2013/02/13/secure-vnc-installation-red-hat-enterprise-linux/#disqus_thread">comments</a>.</p>        </div>
        <div class="post-preview">
            <a href="http://atodorov.org/blog/2012/07/13/mission-impossible-abrt-bugzilla-plugin-on-rhel6/" rel="bookmark" title="Permalink to Mission Impossible - ABRT Bugzilla Plugin on RHEL6">
                <h2 class="post-title">
                    Mission Impossible - ABRT Bugzilla Plugin on RHEL6
                </h2>
            </a>
                <p>Some time ago Red Hat introduced Automatic Bug Reporting Tool to their Red Hat Enterprise Linux
platform. This is a nice tool which lets users report bugs easily to Red Hat.
However one of the plugins in the latest version doesn't seem usable at all.</p>
<p>First make sure you have <code>libreport-plugin-bugzilla</code> package installed. This is the plugin to
report bugs directly to <a href="https://bugzilla.redhat.com">Bugzilla</a>. It may not be installed by default
because customers are supposed to report issues to Support first - this is why they pay anyway.
If you are a tech savvy user though, you may want to skip Support and go straight to the developers.</p>
<p>To enable Bugzilla plugin: </p>
<ul>
<li>Edit the file <code>/etc/libreport/events.d/bugzilla_event.conf</code> change the line<div class="highlight"><pre>EVENT=report_Bugzilla analyzer=libreport reporter-bugzilla -b
</pre></div>


</li>
</ul>
<p>to</p>
<div class="highlight"><pre>    EVENT=report_Bugzilla reporter-bugzilla -b
</pre></div>


<ul>
<li>
<p>Make sure ABRT will collect meaningful backtrace. If debuginfo is missing it will not let you continue.
Edit the file <code>/etc/libreport/events.d/ccpp_event.conf</code>. There should be something like this:</p>
<div class="highlight"><pre><span class="x">EVENT=analyze_LocalGDB analyzer=CCpp</span>
<span class="x">        abrt-action-analyze-core --core=coredump -o build_ids &amp;&amp;</span>
<span class="x">        abrt-action-generate-backtrace &amp;&amp;</span>
<span class="x">        abrt-action-analyze-backtrace</span>
<span class="x">        (</span>
<span class="x">            bug_id=</span><span class="p">$(</span><span class="err">reporter-bugzilla</span> <span class="err">-h</span> <span class="err">`cat</span> <span class="err">duphash`</span><span class="p">)</span><span class="x"> &amp;&amp;</span>
<span class="x">            if test -n &quot;</span><span class="p">$</span><span class="nv">bug_id</span><span class="x">&quot;; then</span>
<span class="x">                abrt-bodhi -r -b </span><span class="p">$</span><span class="nv">bug_id</span><span class="x"></span>
<span class="x">            fi</span>
<span class="x">        )</span>
</pre></div>


</li>
<li>
<p>Change it to look like this - i.e. add the missing <code>/usr/libexec/</code> line:</p>
<div class="highlight"><pre><span class="x">EVENT=analyze_LocalGDB analyzer=CCpp</span>
<span class="x">        abrt-action-analyze-core --core=coredump -o build_ids &amp;&amp;</span>
<span class="x">        /usr/libexec/abrt-action-install-debuginfo-to-abrt-cache --size_mb=4096 &amp;&amp;</span>
<span class="x">        abrt-action-generate-backtrace &amp;&amp;</span>
<span class="x">        abrt-action-analyze-backtrace &amp;&amp;</span>
<span class="x">        (</span>
<span class="x">            bug_id=</span><span class="p">$(</span><span class="err">reporter-bugzilla</span> <span class="err">-h</span> <span class="err">`cat</span> <span class="err">duphash`</span><span class="p">)</span><span class="x"> &amp;&amp;</span>
<span class="x">            if test -n &quot;</span><span class="p">$</span><span class="nv">bug_id</span><span class="x">&quot;; then</span>
<span class="x">                abrt-bodhi -r -b </span><span class="p">$</span><span class="nv">bug_id</span><span class="x"></span>
<span class="x">            fi</span>
<span class="x">        )</span>
</pre></div>


</li>
</ul>
<p>Supposedly after everything is configured properly ABRT will install missing debuginfo packages,
generate the backtrace and let you report it to Bugzilla. Because of
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=759443">bug 759443</a> this will not happen.</p>
<p>To work around the problem you can try to manually install the missing debuginfo packages.
Go to your system profile in RHN and subscribe the system to all appropriate debuginfo channels.
Then install the packages. In my case:</p>
<div class="highlight"><pre>    # debuginfo-install firefox
</pre></div>


<p>And finally - <a href="https://bugzilla.redhat.com/show_bug.cgi?id=800754">bug 800754</a> which was already reported!</p>
            <p class="post-meta">Posted by
                    <a href="http://atodorov.org/author/alexander-todorov.html">Alexander Todorov</a>
                 on Fri 13 July 2012
            </p>
<p>There are <a href="http://atodorov.org/blog/2012/07/13/mission-impossible-abrt-bugzilla-plugin-on-rhel6/#disqus_thread">comments</a>.</p>        </div>
        <div class="post-preview">
            <a href="http://atodorov.org/blog/2012/07/12/combining-pdf-files-on-the-command-line/" rel="bookmark" title="Permalink to Combining PDF Files On The Command Line">
                <h2 class="post-title">
                    Combining PDF Files On The Command Line
                </h2>
            </a>
                <p><strong>VERSION</strong></p>
<p>Red Hat Enterprise Linux 6</p>
<p><strong>PROBLEM</strong></p>
<p>You have to create a single PDF file by combining multiple files -
for example individually scanned pages.</p>
<p><strong>ASSUMPTIONS</strong></p>
<p>You know how to start a shell and havigate to the directory containing the files.</p>
<p><strong>SOLUTION</strong></p>
<p>If individual PDF files are named, for example, <code>doc_01.pdf</code>, <code>doc_02.pdf</code>, <code>doc_03.pdf</code>,
<code>doc_04.pdf</code>, then you can combine them with the <code>gs</code> command:</p>
<div class="highlight"><pre>    $ gs -dBATCH -dNOPAUSE -sDEVICE=pdfwrite -sOutputFile=mydocument.pdf doc_*.pdf
</pre></div>


<p>The resulting PDF file will contain all pages from the individual files.</p>
<p><strong>MORE INFO</strong></p>
<p>The <code>gs</code> command is part of the <a href="http://www.ghostscript.com/">ghostscript</a> rpm package.
You can find more about it using <code>man gs</code>, the documentation file <code>/usr/share/doc/ghostscript-*/index.html</code>
or <a href="http://www.ghostscript.com">http://www.ghostscript.com</a>.</p>
            <p class="post-meta">Posted by
                    <a href="http://atodorov.org/author/alexander-todorov.html">Alexander Todorov</a>
                 on Thu 12 July 2012
            </p>
<p>There are <a href="http://atodorov.org/blog/2012/07/12/combining-pdf-files-on-the-command-line/#disqus_thread">comments</a>.</p>        </div>
        <div class="post-preview">
            <a href="http://atodorov.org/blog/2011/09/15/protected-rpm-repositories-with-yum-and-ssl/" rel="bookmark" title="Permalink to Protected RPM repositories with yum and SSL">
                <h2 class="post-title">
                    Protected RPM repositories with yum and SSL
                </h2>
            </a>
                <p>In this article I'm going to describe a simple way to set-up RPM repositories with access control using only standard tools such as yum, SSL and Apache.
I've been talking about this at one of the monthly conferences of Linux for Bulgarians!</p>
<p><strong>Objective:</strong><br />
Create RPM repository with access control. Access is allowed only for some systems and forbidden for the rest. This is a similar to what Red Hat Network does. </p>
<p><strong>Solution:</strong><br />
We're going to use yum and Apache capabilities to work with SSL certificates. The client side (yum) will identify itself using SSL certificate and the server (Apache) will use this information to control the access.</p>
<p><strong>Client side set-up:</strong><br />
<ol>
  <li>
Yum version 3.2.27 or newer supports SSL certificates for client authentication. This version is available in Red Hat Enterprise Linux 6. 
  </li></p>
<p><li>
First you need to generate a private key and certificate using OpenSSL:</p>
<div class="highlight"><pre><span class="cp"># openssl genrsa -out /var/lib/yum/client.key 1024</span>
<span class="n">Generating</span> <span class="n">RSA</span> <span class="n">private</span> <span class="n">key</span><span class="p">,</span> <span class="mi">1024</span> <span class="n">bit</span> <span class="kt">long</span> <span class="n">modulus</span>
<span class="p">....</span><span class="o">++++++</span>
<span class="p">.......</span><span class="o">++++++</span>
<span class="n">e</span> <span class="n">is</span> <span class="mi">65537</span> <span class="p">(</span><span class="mh">0x10001</span><span class="p">)</span>

<span class="cp"># openssl req -new -x509 -text -key /var/lib/yum/client.key -out /var/lib/yum/client.cert</span>
<span class="n">You</span> <span class="n">are</span> <span class="n">about</span> <span class="n">to</span> <span class="n">be</span> <span class="n">asked</span> <span class="n">to</span> <span class="n">enter</span> <span class="n">information</span> <span class="n">that</span> <span class="n">will</span> <span class="n">be</span> <span class="n">incorporated</span>
<span class="n">into</span> <span class="n">your</span> <span class="n">certificate</span> <span class="n">request</span><span class="p">.</span>
<span class="n">What</span> <span class="n">you</span> <span class="n">are</span> <span class="n">about</span> <span class="n">to</span> <span class="n">enter</span> <span class="n">is</span> <span class="n">what</span> <span class="n">is</span> <span class="n">called</span> <span class="n">a</span> <span class="n">Distinguished</span> <span class="n">Name</span> <span class="n">or</span> <span class="n">a</span> <span class="n">DN</span><span class="p">.</span>
<span class="n">There</span> <span class="n">are</span> <span class="n">quite</span> <span class="n">a</span> <span class="n">few</span> <span class="n">fields</span> <span class="n">but</span> <span class="n">you</span> <span class="n">can</span> <span class="n">leave</span> <span class="n">some</span> <span class="n">blank</span>
<span class="n">For</span> <span class="n">some</span> <span class="n">fields</span> <span class="n">there</span> <span class="n">will</span> <span class="n">be</span> <span class="n">a</span> <span class="k">default</span> <span class="n">value</span><span class="p">,</span>
<span class="n">If</span> <span class="n">you</span> <span class="n">enter</span> <span class="sc">&#39;.&#39;</span><span class="p">,</span> <span class="n">the</span> <span class="n">field</span> <span class="n">will</span> <span class="n">be</span> <span class="n">left</span> <span class="n">blank</span><span class="p">.</span>
<span class="o">-----</span>
<span class="n">Country</span> <span class="n">Name</span> <span class="p">(</span><span class="mi">2</span> <span class="n">letter</span> <span class="n">code</span><span class="p">)</span> <span class="p">[</span><span class="n">XX</span><span class="p">]</span><span class="o">:</span><span class="n">BG</span>
<span class="n">State</span> <span class="n">or</span> <span class="n">Province</span> <span class="n">Name</span> <span class="p">(</span><span class="n">full</span> <span class="n">name</span><span class="p">)</span> <span class="p">[]</span><span class="o">:</span><span class="n">Sofia</span>
<span class="n">Locality</span> <span class="n">Name</span> <span class="p">(</span><span class="n">eg</span><span class="p">,</span> <span class="n">city</span><span class="p">)</span> <span class="p">[</span><span class="n">Default</span> <span class="n">City</span><span class="p">]</span><span class="o">:</span><span class="n">Sofia</span>
<span class="n">Organization</span> <span class="n">Name</span> <span class="p">(</span><span class="n">eg</span><span class="p">,</span> <span class="n">company</span><span class="p">)</span> <span class="p">[</span><span class="n">Default</span> <span class="n">Company</span> <span class="n">Ltd</span><span class="p">]</span><span class="o">:</span><span class="n">Open</span> <span class="n">Technologies</span> <span class="n">Bulgaria</span>
<span class="n">Organizational</span> <span class="n">Unit</span> <span class="n">Name</span> <span class="p">(</span><span class="n">eg</span><span class="p">,</span> <span class="n">section</span><span class="p">)</span> <span class="p">[]</span><span class="o">:</span><span class="n">IT</span>
<span class="n">Common</span> <span class="n">Name</span> <span class="p">(</span><span class="n">eg</span><span class="p">,</span> <span class="n">your</span> <span class="n">name</span> <span class="n">or</span> <span class="n">your</span> <span class="n">server</span><span class="err">&#39;</span><span class="n">s</span> <span class="n">hostname</span><span class="p">)</span> <span class="p">[]</span><span class="o">:</span>
<span class="n">Email</span> <span class="n">Address</span> <span class="p">[]</span><span class="o">:</span><span class="n">no</span><span class="o">-</span><span class="n">spam</span><span class="p">@</span><span class="n">otb</span><span class="p">.</span><span class="n">bg</span>
</pre></div>


</li>

<p><li>
For better security you can change file permissions of <em>client.key</em>:</p>
<div class="highlight"><pre># chmod 600 /var/lib/yum/client.key
</pre></div>


</li>

<p><li>
You need to define the protected repository in a .repo file. It needs to look something like this:</p>
<div class="highlight"><pre># cat /etc/yum.repos.d/protected.repo
[protected]
name=SSL protected repository
baseurl=https://repos.example.com/protected
enabled=1
gpgcheck=1
gpgkey=https://repos.example.com/RPM-GPG-KEY

sslverify=1
sslclientcert=/var/lib/yum/client.cert
sslclientkey=/var/lib/yum/client.key
</pre></div>


</li>

<p><li>
If you use self-signed server certificate you can specify  <em>sslverify=0</em>, but this is not recommended.
  </li>
</ol></p>
<p>Whenever yum tries to reach the URL of the repository it will identify itself using the specified certificate.</p>
<p><strong>Server side set-up:</strong><br />
<ol>
  <li>
Install and configure the <em>mod_ssl</em> module for Apache.
  </li></p>
<p><li>
Create a directory for the repository which will be available over HTTPS.
  </li></p>
<p><li>
In the repository directory add <em>.htaccess</em>, which looks something like this:</p>
<div class="highlight"><pre>Action rpm-protected /cgi-bin/rpm.cgi
AddHandler rpm-protected .rpm .drpm
SSLVerifyClient optional_no_ca
</pre></div>


</li>

<p><li>
The <em>Action</em> and <em>AddHandler</em> directives instruct Apache to run the <em>rpm.cgi</em> CGI script every time someone tries to access files with extension .rpm and .drpm.
  </li></p>
<p><li>
The <em>SSLVerifyClient</em> directive tells Apache that the http client may present a valid certificate but it has not to be (successfully) verifyable.
For more information on this configuration please see
<a href="http://www.modssl.org/docs/2.1/ssl_reference.html#ToC13">http://www.modssl.org/docs/2.1/ssl_reference.html#ToC13</a>.
  </li></p>
<p><li>
The simplest form of <em>rpm.cgi</em> script may look like this:</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span class="c">#!/bin/bash</span>

<span class="k">if</span> <span class="o">[</span> <span class="s2">&quot;</span><span class="nv">$SSL_CLIENT_M_SERIAL</span><span class="s2">&quot;</span> <span class="o">==</span> <span class="s2">&quot;9F938211B53B4F44&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;Content-type: application/x-rpm&quot;</span>
    <span class="nb">echo</span> <span class="s2">&quot;Content-length: </span><span class="k">$(</span>stat --printf<span class="o">=</span><span class="s1">&#39;%s&#39;</span> <span class="nv">$PATH_TRANSLATED</span><span class="k">)</span><span class="s2">&quot;</span>
    <span class="nb">echo</span>

<span class="nb">    </span>cat <span class="nv">$PATH_TRANSLATED</span>
<span class="k">else</span>
    <span class="nb">echo</span> <span class="s2">&quot;Status: 403&quot;</span>
    <span class="nb">echo</span>
<span class="k">fi</span>
</pre></div>
</td></tr></table>

</li>

<p><li>
The script will allow access to a client which uses a certificate with serial number <em>9F938211B53B4F44</em>. Other clients will be denied access and the server will return standard 403 error code.
  </li>
</ol></p>
<p><strong>In practice:</strong><br />
The above set-up is very basic and only demonstrates the technology behind this. In a real world configuration you will need some more tools to make this really usable. </p>
<p>My company <a href="http://otb.bg">Open Technologies Bulgaria, Ltd.</a> has developed a custom solution for our customers based on the above example called Voyager. It features a Drupal module, a CGI script and a client side yum plugin. </p>
<p>The Drupal module acts as web interface to the system and allows some basic tasks. Administrators can define software channels and subscription expiration. Customers can register and entitle their systems to particular channels. The functionality is similar to Red Hat Network but without all the extra features which we don't need.</p>
<p>The CGI script acts as a glue between the client side and the Drupal backend. It will read information about client credentials and act as first line of defence against non-authorized access. Then it will communicate with the Drupal database and get more information about this customer. If everything is OK then access will be allowed. </p>
<p>The yum plugin has the task to communicate with the Drupal backend and dynamically update repository definitions based on available subscriptions. Then it will send a request for the RPM file back to the Apache server where the CGI script will handle it.</p>
<p>The client side also features a tool to generate the client certificate and register the system to the server. </p>
<p>All communications are entirely over HTTPS. </p>
<p>This custom solution has the advantage that it is simple and easy to maintain as well as easy to use. It integrates well with other plugins (e.g. yum-presto for delta rpm support and yum-rhnplugin) and can be used via yum or PackageKit which are the standard package management tools on Red Hat Enterprise Linux 6.</p>
            <p class="post-meta">Posted by
                    <a href="http://atodorov.org/author/alexander-todorov.html">Alexander Todorov</a>
                 on Thu 15 September 2011
            </p>
<p>There are <a href="http://atodorov.org/blog/2011/09/15/protected-rpm-repositories-with-yum-and-ssl/#disqus_thread">comments</a>.</p>        </div>
        <div class="post-preview">
            <a href="http://atodorov.org/blog/2011/03/14/usb-multi-seat-on-red-hat-enterprise-linux-6/" rel="bookmark" title="Permalink to USB multi-seat on Red Hat Enterprise Linux 6">
                <h2 class="post-title">
                    USB multi-seat on Red Hat Enterprise Linux 6
                </h2>
            </a>
                <p>Multiseat configurations are well known in the Linux community and have been used for a number of years now. In the last few years USB docking stations emerged on the market and are becoming popular among multiseat enthusiasts. </p>
<p>My company <a href="http://otb.bg">Open Technologies Bulgaria, Ltd.</a> offers full support of USB multiseat for Red Hat Enterprise Linux 6 as a downstream vendor. We use the name SUMU (simple usb multi user) to refer to the entire multiseat bundle and in this article I'm going to describe the current state of technologies surrounding multiseat, how that works on RHEL 6 and some practical observations.</p>
<h2>COMPONENTS</h2>
<p>To build a multiseat system you need a number of individual components:</p>
<p><img src="/images/plugable_docking_station.png" alt="UD-160-A" style="float: right;"/></p>
<ul>
  <li>
    USB docking station like Plugable's <a href="http://plugable.com/products/UD-160-A">UD-160-A</a> or a combination of <a href="http://plugable.com/products/">USB video card</a> and stand alone USB hub. It is also possible to use USB docking stations from other vendors but I'm not aware of anyone who did it.
  </li>

  <li>
<em>udlfb</em> - a kernel driver for USB graphics adapters which use DisplayLink based chips. As of January 2011 udlfb.c is part of the mainline kernel tree and is on track for 2.6.38. On RHEL6 this can easily be built as a stand alone module. There are no issues with this package.

We also use a custom patch that will draw the string "fbX" onto the green screen. This is useful for easier identification of the display. The patch can be found <a href="http://otb-sources.googlecode.com/svn/trunk/sumu/udlfb-kmod/fbX-numbering.patch">here</a>.
  </li>

  <li>
<em>Xorg</em> - this is the standard graphics server on Linux. In RHEL 6 we have xorg-x11-server-Xorg-1.7.7-26 which works perfectly in a multiseat environment.
  </li>

  <li>
<em>xorg-x11-drv-fbdev</em> with extensions - Xorg driver based on the <em>fbdev</em> driver. The extensions add support for the X DAMAGE protocol. This is a temporary solution until Xorg adds support for the damage protocol. Our package is called <em>xorg-x11-drv-fbdev-displaylink</em> to avoid conflict with the stock package provided by the distribution and it installs the files in <em>/usr/local</em>. You can also change the compiler flags and produce a binary under a different name (say <em>displaylink_drv.so</em> instead of <em>fbdev_drv.so</em>).
  </li>

  <li>
<em>GDM</em> with multiseat support - GDM will manage multiple local displays and has the ability to add/remove displays dynamically. This functionality is present in versions up to 2.20 and since RHEL6 includes gdm-2.30.4-21.el6 this is a tough choice. There are several possibilities:
<ol>
  <li>
Use older <em>GDM</em>, preferably from a previous RHEL release. This gives you a tested piece of software and as long as the previous release is maintained you have (at least some) opportunity of fixing bugs in this code base. However this conflicts with current <em>GDM</em> in the distro which is also integrated with <em>ConsoleKit</em>, <em>Plymouth</em> and <em>PulseAudio</em>.
  </li>

  <li>
Use <em>GDM</em> and <em>ConsoleKit</em> that are available in RHEL6 and apply the multiseat patches available at
https://bugs.freedesktop.org/show_bug.cgi?id=19333 and http://bugzilla.gnome.org/show_bug.cgi?id=536355.

Those patches are quite big (around 3000 lines each) and are not yet fully integrated upstream. They also conflict with custom patches that Red Hat is shipping into these packages. Your patched packages will also conflict with the stock distro packages and you will not receive any support for that. Since <em>ConsoleKit</em> seems like fairly important application I'd not recommend modifying it.
  </li>

  <li>
Use another display manager that can handle multiple displays. https://help.ubuntu.com/community/MultiseatX suggests to use <em>KDM</em> instead of <em>GDM</em>. As far as I can tell the configuration is only static and this can break any time due to the fact that USB device discovery is unpredictable and unreliable. It also lacks an alternative for <em>gdmdynamic</em> according to http://lists.kde.org/?l=kde-devel&m=129898381127854&w=2 which makes it a no-go for plug-and-play multiseat support.

There are other less popular display managers but I haven't spend much time in research.
  </li>

  <li>
Just for the record it is also possible that one writes a custom display manager for multiseat operations. This sounds like an overkill and there are many factors which need to be taken into account. If you have enough resources and knowledge to write a display manager you'd better give upstream a hand instead of reinventing the wheel. 
  </li>
</ol>

We've decided to use <em>GDM 2.16</em> from RHEL5 due to the above factors. In practice it turns out that there aren't many issues with this version.
  </li>

  <li>
<em>A GDM theme</em> - since the GDM version we're using requires a theme which is missing in RHEL6 this is also provided as a separate package. A GDM theme is an XML file plus some images.
  </li>

  <li>
<em>udev rules, scripts and config files</em> - this is the glue between all the other components. Their primary job is to group the display-mouse-keyboard pairs for a given seat and start the display with the appropriate configuration settings. We also have support for <em>PulseAudio</em>.
  </li>
</ul>

<h2>RHEL6 SPECIFICS</h2>
<p>For detailed description of multiseat configuration take a look at http://plugable.com/2009/11/16/setting-up-usb-multiseat-with-displaylink-on-linux-gdm-up-to-2-20/ or at our <a href="http://otb-sources.googlecode.com/svn/trunk/sumu/">source code</a>. I'm going to describe only the differences in RHEL6.</p>
<p><em>GDM</em>, <em>udlfb</em> and <em>xorg-x11-drv-fbdev-displaylink</em> need to be compiled and installed on the system. </p>
<p>To build an older <em>GDM</em> on RHEL6 you will need to adjust some of the patches in the src.rpm package to apply cleanly and tweak the .spec file to your needs. This also includes using the appropriate version of <em>ltmain.sh</em> from the distro.</p>
<p>The udev rules and scripts are slightly different due to the different device paths in RHEL6:</p>
<div class="highlight"><pre>SYSFS<span class="o">{</span>idVendor<span class="o">}==</span><span class="s2">&quot;17e9&quot;</span>, SYSFS<span class="o">{</span>bConfigurationValue<span class="o">}==</span><span class="s2">&quot;2&quot;</span>, <span class="nv">RUN</span><span class="o">=</span><span class="s2">&quot;/bin/echo 1 &gt; /sys%p/bConfigurationValue&quot;</span>

<span class="nv">ACTION</span><span class="o">==</span><span class="s2">&quot;add&quot;</span>,    <span class="nv">KERNEL</span><span class="o">==</span><span class="s2">&quot;fb*&quot;</span>, <span class="nv">SUBSYSTEM</span><span class="o">==</span><span class="s2">&quot;graphics&quot;</span>, <span class="nv">SUBSYSTEMS</span><span class="o">==</span><span class="s2">&quot;usb&quot;</span>, <span class="nv">PROGRAM</span><span class="o">=</span><span class="s2">&quot;/usr/bin/sumu-hub-id /sys/%p/device/../&quot;</span>, SYMLINK+<span class="o">=</span><span class="s2">&quot;usbseat/%c/display&quot;</span>,  RUN+<span class="o">=</span><span class="s2">&quot;/etc/udev/scripts/start-seat %c&quot;</span>
<span class="nv">ACTION</span><span class="o">==</span><span class="s2">&quot;remove&quot;</span>, <span class="nv">KERNEL</span><span class="o">==</span><span class="s2">&quot;fb*&quot;</span>, <span class="nv">SUBSYSTEM</span><span class="o">==</span><span class="s2">&quot;graphics&quot;</span>, RUN+<span class="o">=</span><span class="s2">&quot;/etc/udev/scripts/stop-seat %k&quot;</span>

<span class="nv">KERNEL</span><span class="o">==</span><span class="s2">&quot;control*&quot;</span>, <span class="nv">SUBSYSTEM</span><span class="o">==</span><span class="s2">&quot;sound&quot;</span>, <span class="nv">BUS</span><span class="o">==</span><span class="s2">&quot;usb&quot;</span>, <span class="nv">PROGRAM</span><span class="o">=</span><span class="s2">&quot;/usr/bin/sumu-hub-id /sys/%p/device/../../../../&quot;</span>, SYMLINK+<span class="o">=</span><span class="s2">&quot;usbseat/%c/sound&quot;</span>
<span class="nv">KERNEL</span><span class="o">==</span><span class="s2">&quot;event*&quot;</span>, <span class="nv">SUBSYSTEM</span><span class="o">==</span><span class="s2">&quot;input&quot;</span>, <span class="nv">BUS</span><span class="o">==</span><span class="s2">&quot;usb&quot;</span>, SYSFS<span class="o">{</span>bInterfaceClass<span class="o">}==</span><span class="s2">&quot;03&quot;</span>, SYSFS<span class="o">{</span>bInterfaceProtocol<span class="o">}==</span><span class="s2">&quot;01&quot;</span>, <span class="nv">PROGRAM</span><span class="o">=</span><span class="s2">&quot;/usr/bin/sumu-hub-id /sys/%p/device/../../../../&quot;</span>, SYMLINK+<span class="o">=</span><span class="s2">&quot;usbseat/%c/keyboard&quot;</span>, RUN+<span class="o">=</span><span class="s2">&quot;/etc/udev/scripts/start-seat %c&quot;</span>
<span class="nv">KERNEL</span><span class="o">==</span><span class="s2">&quot;event*&quot;</span>, <span class="nv">SUBSYSTEM</span><span class="o">==</span><span class="s2">&quot;input&quot;</span>, <span class="nv">BUS</span><span class="o">==</span><span class="s2">&quot;usb&quot;</span>, SYSFS<span class="o">{</span>bInterfaceClass<span class="o">}==</span><span class="s2">&quot;03&quot;</span>, SYSFS<span class="o">{</span>bInterfaceProtocol<span class="o">}==</span><span class="s2">&quot;02&quot;</span>, <span class="nv">PROGRAM</span><span class="o">=</span><span class="s2">&quot;/usr/bin/sumu-hub-id /sys/%p/device/../../../../&quot;</span>, SYMLINK+<span class="o">=</span><span class="s2">&quot;usbseat/%c/mouse&quot;</span>,    RUN+<span class="o">=</span><span class="s2">&quot;/etc/udev/scripts/start-seat %c&quot;</span>
</pre></div>


<p>We also use only <em>/dev/event*</em> devices for both mouse and keyboard.</p>
<p>The <em>sumu-hub-id</em> script returns the string busX-devY indicating the location of the device:</p>
<div class="highlight"><pre><span class="c">#!/bin/bash</span>
<span class="k">if</span> <span class="o">[</span> -d <span class="s2">&quot;</span><span class="nv">$1</span><span class="s2">&quot;</span> <span class="o">]</span><span class="p">;</span> <span class="k">then</span>
    <span class="nb">echo</span> <span class="s2">&quot;bus</span><span class="k">$(</span>cat <span class="nv">$1</span>/busnum<span class="k">)</span><span class="s2">-dev</span><span class="k">$(</span>cat <span class="nv">$1</span>/devnum<span class="k">)</span><span class="s2">&quot;</span>
    <span class="nb">exit </span>0
<span class="k">else</span>
    <span class="nb">exit </span>1
<span class="k">fi</span>
</pre></div>


<p>USB device numbering is unique per bus and there isn't a global device identifier as far as I know. On systems with 2 or more USB buses this can lead to mismatch between devices/seats.</p>
<p>For seat/display numbering we use the number of the framebuffer device associated with the seat. This is unique, numbers start from 1 (<em>fb0</em> is the text console) and are sequential unlike USB device numbers. This also ensures easy match between <em>$DISPLAY</em> and <em>/dev/fbX</em> for debugging purposes.</p>
<p>Our <em>xorg.conf.sed</em> template uses evdev as the input driver. This driver is the default in RHEL6:</p>
<div class="highlight"><pre>Section &quot;InputDevice&quot;
    Identifier &quot;keyboard&quot;
    Driver      &quot;evdev&quot;
    Option      &quot;CoreKeyboard&quot;
    Option      &quot;Device&quot;        &quot;/dev/usbseat/%SEAT_PATH%/keyboard&quot;
    Option      &quot;XkbModel&quot;      &quot;evdev&quot;
EndSection

Section &quot;InputDevice&quot;
    Identifier &quot;mouse&quot;
    Driver      &quot;evdev&quot;
    Option      &quot;CorePointer&quot;
    Option      &quot;Protocol&quot; &quot;auto&quot;
    Option      &quot;Device&quot;   &quot;/dev/usbseat/%SEAT_PATH%/mouse&quot;
    Option      &quot;Buttons&quot; &quot;5&quot;
    Option      &quot;ZAxisMapping&quot; &quot;4 5&quot;
EndSection
</pre></div>


<p>We also use a custom <em>gdm.conf</em> file to avoid conflicts with stock packages. Only the important settings are shown:</p>
<div class="highlight"><pre><span class="k">[daemon]</span>
<span class="na">AlwaysRestartServer</span><span class="o">=</span><span class="s">false</span>
<span class="na">DynamicXServers</span><span class="o">=</span><span class="s">true</span>
<span class="na">FlexibleXServers</span><span class="o">=</span><span class="s">0</span>
<span class="na">VTAllocation</span><span class="o">=</span><span class="s">false</span>

<span class="k">[servers]</span>
<span class="na">0</span><span class="o">=</span><span class="s">inactive</span>
</pre></div>


<p>AlwaysRestartServer=false is necessary to avoid a bug in <em>Xorg</em>. See below for issues description.</p>
<p>Audio is supported by setting $PULSE_SINK/$PULSE_SOURCE environment variables using a script in <em>/etc/profile.d</em> which executes after login.</p>
<h2>SCALABILITY AND PERFORMANCE</h2>
<p><strong>Maximum seats</strong>:<br />
The USB standard specifies a maximum of 127 USB devices connected to a single host controller. This means around 30 seats per USB controller depending on the number of devices connected to a USB hub. In practice you will have hard time finding a system which has that many port available. I've used Fujitsu's <a href="http://ts.fujitsu.com/products/standard_servers/tower/primergy_tx100s1.html">TX100 S1</a> and <a href="http://ts.fujitsu.com/products/standard_servers/tower/primergy_tx100s2.html">TX100 S2</a> which can be expanded to 15 or 16 USB ports using all external and internal ports and additional PCI-USB extension card.</p>
<p>While larger configuration are possible by using more PCI cards or intermediate hubs those are limited by the USB 2.0 transfer speed (more devices on a single hub, slower graphics) and a <a href="https://bugzilla.kernel.org/show_bug.cgi?id=28682">bug</a> in the Linux kernel.</p>
<p><strong>Space and cable length</strong>:<br />
USB 2.0 limits the cable length to 5 meters. On the market I've found good quality cables running 4.5 meters. This means that your multiseat system needs to be confined is small physical space due to these limitations. In practice using medium sized multiseat system in a 30 square meters space is doable and fits into these limits. This is roughly the size of a class-room in a school.</p>
<p>You can of course use daisy chaining (up to 5 hubs) and active USB extension cords (11 meters) or USB over CAT5 cables (up to 45 meters) but all of these interfere with USB signal strength and can lead to unpredictable behavior. For example I've see errors opening USB devices when power is not sufficient or too high. Modern computer systems have built in hardware protection and shut off USB ports or randomly reboot when the current on the wire is too strong. I've seen this on a number of occasions and the fix was to completely power off and unplug the system then power it on again.</p>
<p>Also don't forget that USB video consumes a great deal of the limited USB 2.0 bandwidth. Depending on the workload of the system (e.g. office applications vs. multimedia) you could experience slow graphical response if using extension cords and daisy chaining.</p>
<p><strong>Performance</strong>:<br />
For regular desktop use (i.e. nothing in particular) I'd recommend using 32bit operating system. On 64bit systems objects take a lot more memory and you'll need 3-4 times more for the same workload as on 32bit. For example 16 users running Eclipse, gnome-terminal and Firefox will need less that 8GB of memory on 32bit and more than 16GB on 64bit. Python and Java are particularly known to use much more memory on 64bit.</p>
<p>Regular desktop usage is not CPU intensive and a modern Xeon CPU has no issues with it. One exception is Flash which always causes your CPU to choke. On multiseat that becomes even a bigger problem. If possible disable/remove Flash from the system.</p>
<p>Multiseat doesn't make any difference when browsing, sending e-mail, etc. You shouldn't experience issues with networking unless your workload doesn't require hi-speed connection or your bandwidth is too low. If this is the case you'd better use the USB NICs available in the docking stations and bond them together, add external PCI NICs or upgrade your networking infrastructure.</p>
<p>Disk performance is critical in multiseat especially because it affects the look and feel of the system and is visible by the end users. It is usually good practice to place /home on a separate partition and even on a separate disk. Also consider disabling unnecessary caching in user space applications such as Firefox and Nautilus (thumbnails and cache). </p>
<p>On a system with 2 x 7,2K RPM disks in BIOS RAID1 configuration and a standard RHEL6 installation (i.e. no optimizations configured) where /, swap and /home are on the same RAID array we have 15 users using GNOME, gedit, Firefox, gnome-terminal and gcc. The performance is comparable to stand alone desktop with occasional spikes which cause GNOME to freeze for a second or two. It is expected that disabling unnecessary caching will make things better.</p>
<p>Depending on the workload (reads vs. writes) you should consider different RAID levels, file system types and settings and changing disk parameters. A good place to start is the "Storage Administration Guide" and "I/O Tuning Guide" at http://docs.redhat.com.</p>
<h2>KNOWN ISSUES</h2>
<ul>
 <li>
<a href="https://bugzilla.kernel.org/show_bug.cgi?id=28682">Bug 28682 - input drivers support limited device numbers (EVDEV_MINORS is 32)</a> - this bug will block you from adding more than 32 input devices of the same type. For multiseat that means 32 devices which are handled by the event driver which includes mice, keyboards, joystick and special platform events such as the Reboot/Poweroff buttons. This limits the available seats to around 15.
 </li>

 <li>
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=679122">Bug 679122 - gnome-volume-control: Sound at 100% and no sound output</a> - upon first login the user will not hear any sound regardless of the fact that the volume control application shows volume is at 100%.
 </li>

 <li>
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=682562">Bug 682562 - gnome-volume-control doesn't respect PULSE_SINK/PULSE_SOURCE</a> - the volume control application will not behave correctly and may confuse users.
 </li>

 <li>
Xorg will cause 100% CPU usage after logout - this is due to several factors. The <a href="http://plugable.com/2009/11/16/setting-up-usb-multiseat-with-displaylink-on-linux-gdm-up-to-2-20/">initial multiseat configuration</a> had a problem with input duplication. This was fixed by removing "-sharevts -novtswitch" from the X start line and substituting a specific VT - "vt07". 

This works fine unless one of the users logs out of their GNOME session. After that GDM will kill and restart it's process and new Xorg process will be spawned. The restarted instance will loop endlessly executing the following code:


wzxhzdk:4


If you search on the Internet you will find plenty of bug reports related to this code block. The problem is in <em>Xorg</em> which doesn't properly handle the situation where it can't take control over the terminal. The solution is to not restart <em>Xorg</em> after user session ends. This is done by setting AlwaysRestartServer=false in <em>gdm.conf</em>.
 </li>

 <li>
No integration with <em>SELinux</em> and <em>ConsoleKit</em> - while configuring <em>SELinux</em> in Permissive mode is easy workaround there's no easy workaround for <em>ConsoleKit</em>. 

Newer <em>GDM</em> versions register the user session with <em>ConsoleKit</em> and integrate that into the desktop. Missing integration means that some things will fail. For example <em>NetworkManager</em> will not allow the user to connect to a VPN connection because it thinks this user is not logged in:


wzxhzdk:5

</li>

 <li>
No ACLs for external USB flash drives - this is missing upstream and is supposed to land in <em>ConsoleKit</em>. When a user plugs their USB flash drive on a multiseat system GNOME will try to mount it automatically. If there are multiple users logged in this will either fail or all of them will be able to access the flash drive. 
 </li>
</ul>

<h2>PICTURES AND VIDEO</h2>
<p>Pictures from one of our deployments can be found on Facebook (no login required):
<a href="http://www.facebook.com/album.php?aid=54571&amp;id=180150925328433">http://www.facebook.com/album.php?aid=54571&amp;id=180150925328433</a>.
A demonstration video from the same deployment can be found at <a href="http://www.youtube.com/watch?v=7GYbCDGTz-4">http://www.youtube.com/watch?v=7GYbCDGTz-4</a></p>
<p>If you are interested in commercial support please contact me!</p>
<h2>FUTURE</h2>
<p>In the open source world everything is changing and multiseat is no exception. While <em>GDM</em> and <em>ConsoleKit</em> patches are not yet integrated upstream there's a new project called <a href="http://www.freedesktop.org/wiki/Software/systemd">systemd</a> which aims at replacing the SysV init scripts system. It already has several configuration files for multiseat and I expect it will influence multiseat deployments in the future. Systemd will be available in Fedora 15.</p>
            <p class="post-meta">Posted by
                    <a href="http://atodorov.org/author/alexander-todorov.html">Alexander Todorov</a>
                 on Mon 14 March 2011
            </p>
<p>There are <a href="http://atodorov.org/blog/2011/03/14/usb-multi-seat-on-red-hat-enterprise-linux-6/#disqus_thread">comments</a>.</p>        </div>

    <hr>
    <!-- Pager -->
    <ul class="pager">
        <li class="next">
                <a href="http://atodorov.org/blog/categories/rhel/index.html"> &larr; Newest Posts</a>
        </li>
    </ul>
    Page 2 / 2
    <hr>
            </div>
        </div>
    </div>

    <hr>

    <!-- Footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
                    <ul class="list-inline text-center">
                            <li>
                                <a href="https://twitter.com/atodorov_">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="https://github.com/atodorov">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-github fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="https://bg.linkedin.com/in/alextodorov">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="http://feeds.feedburner.com/atodorov">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="https://www.youtube.com/playlist?list=PLFjlI7p-h1hxBP3cIjEqePSeoBDHud5Db">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-youtube fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="http://amzn.to/1ivu2q4">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-amazon fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                            <li>
                                <a href="http://mrsenko.com/?utm_source=atodorov.org&utm_medium=blog&utm_campaign=social_icon">
                                    <span class="fa-stack fa-lg">
                                        <i class="fa fa-circle fa-stack-2x"></i>
                                        <i class="fa fa-user-secret fa-stack-1x fa-inverse"></i>
                                    </span>
                                </a>
                            </li>
                    </ul>
<section>
    <p>
        I am a QA contractor at Red Hat responsible for finding over
        <a href="/blog/2014/02/19/7-years-1400-bugs-red-hat-qa/">1600 bugs</a>,
        a general purpose open source developer, Red Hat Certified professional,
        cloud hacker and an entrepreneur! My latest start-up is
        <a href="http://mrsenko.com/?utm_source=atodorov.org&utm_medium=blog&utm_campaign=footer">Mr. Senko</a>!
    </p>
    <p>
        I am living in the <a href="http://planet.sofiavalley.com">Sofia Valley</a>
        which is emerging as a busy place for start-up founders and tech enthusiasts
        in Eastern Europe! You can find more about me <a href="/blog/2013/01/25/about-me/">here</a>.
    </p>
    <p>
        <small>
            <em>
                Some of the links contained within this site have my referral id (e.g.,
                <a target="_blank" href="http://www.amazon.com/ref=as_li_ss_tl?_encoding=UTF8&camp=1789&creative=390957&linkCode=ur2&tag=atodorovorg-20&linkId=L6Q34XAXQS5RDMOY">Amazon</a><img src="https://ir-na.amazon-adsystem.com/e/ir?t=atodorovorg-20&l=ur2&o=1" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />),
                which provides me with a small commission for each sale. Thank you for your support.
            </em>
        </small>
    </p>
</section>

<form action="http://google.com/search" method="get" style="width:300px;margin:0 auto;">
    <fieldset role="search">
        <input type="hidden" name="sitesearch" value="http://atodorov.org" />
        <input class="search" type="text" name="q" placeholder="Search" style="width:100%"/>
    </fieldset>
</form>

<p class="copyright text-muted">
    <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">CC-BY-SA</a> &amp;
    <a rel="license" href="http://opensource.org/licenses/MIT">MIT</a>
    2011-2016 &diams; Alexander Todorov &diams;
    <a href="http://planet.sofiavalley.com">SofiaValley Blog</a>
</p>

<script type='text/javascript'>
window.__lo_site_id = 55936;
    (function() {
        var wa = document.createElement('script'); wa.type = 'text/javascript'; wa.async = true;
        wa.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://cdn') + '.luckyorange.com/w.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(wa, s);
      })();
</script>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="http://atodorov.org/theme/js/jquery.js"></script>

    <!-- Bootstrap Core JavaScript -->
    <script src="http://atodorov.org/theme/js/bootstrap.min.js"></script>


    <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37979549-1']);
    _gaq.push(['_trackPageview']);
    (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
<script type="text/javascript">
    var disqus_shortname = 'atodorov';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>

</html>