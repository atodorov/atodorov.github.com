<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: RHEL | atodorov.org]]></title>
  <link href="http://atodorov.github.com/blog/categories/rhel/atom.xml" rel="self"/>
  <link href="http://atodorov.github.com/"/>
  <updated>2013-05-02T01:45:34+03:00</updated>
  <id>http://atodorov.github.com/</id>
  <author>
    <name><![CDATA[Alexander Todorov]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Virtualization Platforms Supported by Red Hat Enterprise Linux]]></title>
    <link href="http://atodorov.github.com/blog/2013/03/20/virtualization-platforms-supported-by-red-hat-enterprise-linux/"/>
    <updated>2013-03-20T15:04:00+02:00</updated>
    <id>http://atodorov.github.com/blog/2013/03/20/virtualization-platforms-supported-by-red-hat-enterprise-linux</id>
    <content type="html"><![CDATA[<p>This is mostly for my own reference, to have a handy list
of supported virtualization platforms by Red Hat Enterprise Linux.</p>

<h2>Software virtualization solutions</h2>

<p>A guest RHEL operating system is supported if it runs on the following
platforms:</p>

<ul>
<li>Xen</li>
<li>KVM</li>
<li><a href="https://hardware.redhat.com/VMware">VMware ESX</a></li>
<li><a href="https://hardware.redhat.com/Microsoft">Microsoft Hyper-V</a></li>
</ul>


<p>The
<a href="http://www.redhat.com/resourcelibrary/articles/enterprise-linux-virtualization-support">official virtualization support matrix</a>
doesn't specify which versions of Xen and KVM are supported. It is safe to assume that
only the ones provided with another RHEL version are supported.</p>

<h2>Hardware partitioning</h2>

<p>Red Hat supports RHEL on hardware partitioning and virtualization solutions such as:</p>

<ul>
<li><a href="https://hardware.redhat.com/list.cgi?product=Red+Hat+Hardware+Certification&amp;quicksearch=IBM+System+Z">IBM System Z</a></li>
<li><a href="https://hardware.redhat.com/list.cgi?product=Red+Hat+Hardware+Certification&amp;quicksearch=IBM+POWER">IBM Power</a></li>
<li><a href="https://hardware.redhat.com/list.cgi?product=Red+Hat+Hardware+Certification&amp;quicksearch=PRIMEQUEST">Fujitsu PRIMEQUEST</a></li>
<li><a href="https://hardware.redhat.com/list.cgi?product=Red+Hat+Hardware+Certification&amp;quicksearch=Virtage">Hitachi Virtage</a></li>
</ul>


<p>Unfortunately the <a href="https://access.redhat.com/knowledge/articles/263573">recently updated</a>
hardware catalog
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=923802">doesn't allow to filter by hardware partitioning vs. virtualization platform</a>
so you need to know what you are looking for to find it :(.</p>

<h2>Red Hat Enterprise Linux as a guest on the Cloud</h2>

<p>Multiple public cloud providers are supported. Comprehensive list can be found here:
http://www.redhat.com/solutions/cloud-computing/public-cloud/find-partner/</p>

<p>You can also try <a href="http://redhat.force.com/finder/">Red Hat Partner Locator's</a>
advanced search. However at the time of this writing there are no partners
listed in the Cloud / Virtualization category.</p>

<p><strong>Warning:</strong> It is known that Amazon uses Xen with custom
modifications (not sure what version) and HP Cloud uses KVM but there
is not much public record about hypervisor technology used by most cloud providers.
Red Hat has partner agreements with these vendors and will commercially support
only their platforms. This means that if you decide to use upstream Xen or anything
else not listed above, you are on your own. <strong>You have been warned!</strong></p>

<h2>Unsupported but works</h2>

<p>I'm not a big fan of running on top of unsupported environments
and I don't have the need to do so.
I've heard about people running CentOS (RHEL compatible) on VirtualBox
but I have no idea how well it works.</p>

<p>If you are using a different virtualization platform
(like LXC, OpenVZ, UML,
<a target="_blank" href="http://www.amazon.com/s/?_encoding=UTF8&camp=1789&creative=390957&field-brandtextbin=Parallels%20Software&linkCode=ur2&node=229534&tag=atodorovorg-20">Parallels</a><img src="https://www.assoc-amazon.com/e/ir?t=atodorovorg-20&l=ur2&o=1" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />
or other) let me know if CentOS/Fedora works on it.
Alternatively I can give it a try if you can provide me with ssh/VNC access to the machine.</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Secure VNC Installation of Red Hat Enterprise Linux 6]]></title>
    <link href="http://atodorov.github.com/blog/2013/02/13/secure-vnc-installation-red-hat-enterprise-linux/"/>
    <updated>2013-02-13T15:40:00+02:00</updated>
    <id>http://atodorov.github.com/blog/2013/02/13/secure-vnc-installation-red-hat-enterprise-linux</id>
    <content type="html"><![CDATA[<p><img src="http://atodorov.github.com/images/rhel6_welcome.png" alt="RHEL 6 welcome screen" />
Image CC-BY-SA,
<a href="https://access.redhat.com/knowledge/docs/en-US/Red_Hat_Enterprise_Linux/6/html/Installation_Guide/sn-welcome-s390.html">Red Hat</a></p>

<p>From time to time I happen to remotely
<a href="http://otb.bg">install Red Hat Enterprise Linux</a>
servers via the Internet.
When the system configuration is not decided upfront you need
to use interactive mode. This means VNC in my case.</p>

<p>In this tutorial I will show you how to make VNC installations more secure
when using public networks to connect to the server.</p>

<h2>Meet your tools</h2>

<p>Starting with Red Hat Enterprise Linux 6 and all the latest Fedora releases, the
installer supports SSH connections during install.</p>

<p><blockquote><p>Note that by default, root has a blank password.</p></p><p><p>If you don't want any user to be able to ssh in and have full access to your hardware,<br/>you must specify sshpw for username root. Also note that if Anaconda fails to parse the<br/>kickstart file, it will allow anyone to login as root and have full access to your hardware.</p><footer><strong>Fedora</strong> <cite><a href='https://fedoraproject.org/wiki/Anaconda/Kickstart#sshpw'>Kickstart Manual</a></cite></footer></blockquote></p>

<h2>Preparation</h2>

<p>We are going to use SSH port forwarding and tunnel VNC traffic through it.
Create a kickstart file as shown below:</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>ks.cfg </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='cfg'><span class='line'><span class="err">install</span>
</span><span class='line'><span class="err">url</span> <span class="err">--url</span> <span class="err">http://example.com/path/to/rhel6</span>
</span><span class='line'><span class="err">lang</span> <span class="err">en_US.UTF-8</span>
</span><span class='line'><span class="err">keyboard</span> <span class="err">us</span>
</span><span class='line'><span class="err">network</span> <span class="err">--onboot</span> <span class="err">yes</span> <span class="err">--device</span> <span class="err">eth0</span> <span class="err">--bootproto</span> <span class="err">dhcp</span>
</span><span class='line'><span class="na">vnc --password</span><span class="o">=</span><span class="s">s3cr3t</span>
</span><span class='line'><span class="na">sshpw --user</span><span class="o">=</span><span class="s">root s3cr3t</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>The first 5 lines configure the loader portion of the installer. They will setup
networking and fetch the installer image called stage2. This is completely automated.
<strong>NB:</strong> If you miss some of the lines or have a syntax error the installer will prompt for
values. You either need a remote console access or somebody present at the server console!</p>

<p>The last 2 lines configure passwords for VNC and SSH respectively.</p>

<p>Make this file
<a href="https://fedoraproject.org/wiki/Anaconda/Kickstart#Chapter_6._Making_the_Kickstart_File_Available">available</a>
over HTTP(S), FTP or NFS.</p>

<p><strong>NB:</strong> Make sure that the file is available on the same network where your server is,
or use HTTPS if on public networks.</p>

<h2>Installation</h2>

<p>Now, using your favorite installation media start the
installation process like this:</p>

<pre><code>boot: linux sshd=1 ks=http://example.com/ks.cfg
</code></pre>

<p>After a minute or more the installer will load stage2, with the
interactive VNC session. You need to know the IP address or hostname
of the server. Either look into DHCP logs, have somebody look at the
server console and tell you that (it's printed on tty1) or script it in
a <a href="https://fedoraproject.org/wiki/Anaconda/Kickstart#Chapter_4._Pre-installation_Script">%pre</a>
script which will send you an email for example.</p>

<p>When ready, redirect one of your local ports through SSH to the VNC port on the server:</p>

<pre><code>$ ssh -L 5902:localhost:5901 -N root@server.example.com
</code></pre>

<p>Now connect to DISPLAY :2 on your system to begin the installation:</p>

<pre><code>$ vncviewer localhost:2 &amp;
</code></pre>

<h2>Warning Bugs Present</h2>

<p>As it happens, I find bugs everywhere. This is no exception.
Depending on your network/DHCP configuration IP address during install may
change mid-air and cause VNC client connection to freeze.</p>

<p>The reason for this bug is evident from the code (rhel6-branch):</p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>iw/timezone_gui.py  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="k">if</span> <span class="ow">not</span> <span class="n">anaconda</span><span class="o">.</span><span class="n">isKickstart</span><span class="p">:</span>
</span><span class='line'>    <span class="bp">self</span><span class="o">.</span><span class="n">utcCheckbox</span><span class="o">.</span><span class="n">set_active</span><span class="p">(</span><span class="ow">not</span> <span class="n">hasWindows</span><span class="p">(</span><span class="n">anaconda</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">bootloader</span><span class="p">))</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p><div class='bogus-wrapper'><notextile><figure class='code'><figcaption><span>textw/timezone_text.py  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&lt;/</span><span class="n">p</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">pre</span><span class="o">&gt;&lt;</span><span class="n">code</span><span class="o">&gt;</span><span class="k">if</span> <span class="ow">not</span> <span class="n">anaconda</span><span class="o">.</span><span class="n">isKickstart</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">hasWindows</span><span class="p">(</span><span class="n">anaconda</span><span class="o">.</span><span class="n">id</span><span class="o">.</span><span class="n">bootloader</span><span class="p">):</span>
</span><span class='line'>    <span class="n">asUtc</span> <span class="o">=</span> <span class="bp">True</span>
</span><span class='line'><span class="o">&lt;/</span><span class="n">code</span><span class="o">&gt;&lt;/</span><span class="n">pre</span><span class="o">&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="o">&lt;</span><span class="n">p</span><span class="o">&gt;</span>
</span></code></pre></td></tr></table></div></figure></notextile></div></p>

<p>Because we are using a kickstart file Anaconda will assume the system clock <strong>DOES NOT</strong>
use UTC. If you forget to configure it manually you may see time on the server shifting
back or forward (depending on your timezone) while installing. If your DHCP is configured
for short lease time the address will expire before the installation completes. When new
address is requested from DHCP it may be different and this will cause your VNC connection
to freeze.</p>

<p>To workaround this issue select the appropriate value for the system clock settings during install
and possibly use static IP address during the installation.</p>

<h2>Feedback</h2>

<p>As always I'd love to hear your feedback in the comments section below. Let me know
your tips and tricks to perform secure remote installations using public networks.</p>
]]></content>
  </entry>
  
</feed>
