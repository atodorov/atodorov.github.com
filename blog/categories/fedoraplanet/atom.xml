<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>atodorov.org</title><link href="http://atodorov.org/" rel="alternate"></link><link href="http://atodorov.org/blog/categories/fedoraplanet/atom.xml" rel="self"></link><id>http://atodorov.org/</id><updated>2016-10-18T13:27:00+03:00</updated><entry><title>Updated MacBook Air Drivers for RHEL 7.3</title><link href="http://atodorov.org/blog/2016/10/18/updated-macbook-air-drivers-for-rhel-7.3/" rel="alternate"></link><updated>2016-10-18T13:27:00+03:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-10-18:blog/2016/10/18/updated-macbook-air-drivers-for-rhel-7.3/</id><summary type="html">&lt;p&gt;Today I have re-build the wifi and backlight drivers for MacBook Air
against the upcoming Red Hat Enterprise Linux 7.3 kernel.
&lt;em&gt;wl-kmod&lt;/em&gt; again needed a
&lt;a href="https://github.com/atodorov/wl-kmod-for-rhel7/commit/c6b3d0fde66dd29671df5f52c40f7395f1e1e59e"&gt;small patch&lt;/a&gt;
before it can be compiled. &lt;em&gt;mba6x_bl&lt;/em&gt; has been updated to the latest
upstream and compiled without errors. The current RPM versions are&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;akmod-wl-6.30.223.248-9.el7.x86_64.rpm
kmod-wl-3.10.0-513.el7.x86_64-6.30.223.248-9.el7.x86_64.rpm
kmod-wl-6.30.223.248-9.el7.x86_64.rpm
wl-kmod-debuginfo-6.30.223.248-9.el7.x86_64.rpm
&lt;/pre&gt;&lt;/div&gt;


&lt;div class="highlight"&gt;&lt;pre&gt;kmod-mba6x_bl-20161018.d05c125-1.el7.x86_64.rpm
kmod-mba6x_bl-3.10.0-513.el7.x86_64-20161018.d05c125-1.el7.x86_64.rpm
mba6x_bl-common-20161018.d05c125-1.el7.x86_64.rpm
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;and they seem to work fine for me. Let me know if you have any issues
after RHEL 7.3 comes out officially.&lt;/p&gt;
&lt;p&gt;PS: The &lt;a href="https://github.com/patjak/bcwc_pcie"&gt;bcwc_pcie&lt;/a&gt; driver for the video camera
appears to be ready for general use, regardless of some issues. No promises here
but I'll try to compile that one as well and provide it in my
&lt;a href="http://atodorov.org/blog/2015/04/29/rhel-7-repository-for-macbook-air/"&gt;Macbook Air RHEL 7 repository&lt;/a&gt;.&lt;/p&gt;</summary><category term="Mac"></category><category term="RHEL"></category><category term="fedora.planet"></category></entry><entry><title>PhantomJS 2.1.1 in Ubuntu different from upstream</title><link href="http://atodorov.org/blog/2016/07/23/phantomjs-211-in-ubuntu-different-from-upstream/" rel="alternate"></link><updated>2016-07-23T11:30:00+03:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-07-23:blog/2016/07/23/phantomjs-211-in-ubuntu-different-from-upstream/</id><summary type="html">&lt;p&gt;For some time now I've been hitting
&lt;a href="https://github.com/ariya/phantomjs/issues/12506"&gt;PhantomJS #12506&lt;/a&gt; with the
latest 2.1.1 version. The problem is supposedly fixed in 2.1.0 but this is not
always the case. If you use a .deb package from the latest Ubuntu then the problem
still exists, see
&lt;a href="https://bugs.launchpad.net/ubuntu/+source/phantomjs/+bug/1605628"&gt;Ubuntu #1605628&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;It turns out the root cause of this, and probably other problems, is the way
PhantomJS packages are built. Ubuntu builds the package against their stock
Qt5WebKit libraries which leads to&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;ldd usr/lib/phantomjs/phantomjs &lt;span class="p"&gt;|&lt;/span&gt; grep -i qt
    libQt5WebKitWidgets.so.5 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; /lib64/libQt5WebKitWidgets.so.5 &lt;span class="o"&gt;(&lt;/span&gt;0x00007f5173ebf000&lt;span class="o"&gt;)&lt;/span&gt;
    libQt5PrintSupport.so.5 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; /lib64/libQt5PrintSupport.so.5 &lt;span class="o"&gt;(&lt;/span&gt;0x00007f5173e4d000&lt;span class="o"&gt;)&lt;/span&gt;
    libQt5Widgets.so.5 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; /lib64/libQt5Widgets.so.5 &lt;span class="o"&gt;(&lt;/span&gt;0x00007f51737b6000&lt;span class="o"&gt;)&lt;/span&gt;
    libQt5WebKit.so.5 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; /lib64/libQt5WebKit.so.5 &lt;span class="o"&gt;(&lt;/span&gt;0x00007f5171342000&lt;span class="o"&gt;)&lt;/span&gt;
    libQt5Gui.so.5 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; /lib64/libQt5Gui.so.5 &lt;span class="o"&gt;(&lt;/span&gt;0x00007f5170df8000&lt;span class="o"&gt;)&lt;/span&gt;
    libQt5Network.so.5 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; /lib64/libQt5Network.so.5 &lt;span class="o"&gt;(&lt;/span&gt;0x00007f5170c9a000&lt;span class="o"&gt;)&lt;/span&gt;
    libQt5Core.so.5 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; /lib64/libQt5Core.so.5 &lt;span class="o"&gt;(&lt;/span&gt;0x00007f517080d000&lt;span class="o"&gt;)&lt;/span&gt;
    libQt5Sensors.so.5 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; /lib64/libQt5Sensors.so.5 &lt;span class="o"&gt;(&lt;/span&gt;0x00007f516b218000&lt;span class="o"&gt;)&lt;/span&gt;
    libQt5Positioning.so.5 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; /lib64/libQt5Positioning.so.5 &lt;span class="o"&gt;(&lt;/span&gt;0x00007f516b1d7000&lt;span class="o"&gt;)&lt;/span&gt;
    libQt5OpenGL.so.5 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; /lib64/libQt5OpenGL.so.5 &lt;span class="o"&gt;(&lt;/span&gt;0x00007f516b17c000&lt;span class="o"&gt;)&lt;/span&gt;
    libQt5Sql.so.5 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; /lib64/libQt5Sql.so.5 &lt;span class="o"&gt;(&lt;/span&gt;0x00007f516b136000&lt;span class="o"&gt;)&lt;/span&gt;
    libQt5Quick.so.5 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; /lib64/libQt5Quick.so.5 &lt;span class="o"&gt;(&lt;/span&gt;0x00007f5169dad000&lt;span class="o"&gt;)&lt;/span&gt;
    libQt5Qml.so.5 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; /lib64/libQt5Qml.so.5 &lt;span class="o"&gt;(&lt;/span&gt;0x00007f5169999000&lt;span class="o"&gt;)&lt;/span&gt;
    libQt5WebChannel.so.5 &lt;span class="o"&gt;=&lt;/span&gt;&amp;gt; /lib64/libQt5WebChannel.so.5 &lt;span class="o"&gt;(&lt;/span&gt;0x00007f5169978000&lt;span class="o"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;While building from the upstream sources gives&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;ldd /tmp/bin/phantomjs &lt;span class="p"&gt;|&lt;/span&gt; grep -i qt
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you take a closer look at PhantomJS's sources you will notice there are
3 git submodules in their repository - &lt;code&gt;3rdparty&lt;/code&gt;, &lt;code&gt;qtbase&lt;/code&gt; and &lt;code&gt;qtwebkit&lt;/code&gt;.
Then in their &lt;code&gt;build.py&lt;/code&gt; you can clearly see that this local fork of &lt;code&gt;QtWebKit&lt;/code&gt;
is built first, then the &lt;code&gt;phantomjs&lt;/code&gt; binary is built against it.&lt;/p&gt;
&lt;p&gt;The problem is that these custom forks include additional patches to make
WebKit suitable for Phantom's needs. And these patches are not available
in the stock WebKit library that Ubuntu uses.&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;Yes, that's correct. We need additional functionality that
vanilla QtWebKit doesn't have. That's why we use custom version.&lt;/p&gt;
&lt;p&gt;Vitaly Slobodin, PhantomJS&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;At the moment of this writing Vitaly's qtwebkit fork is 28 commits ahead and
39 commits behind qt:dev. I'm surprised Ubuntu's PhantomJS even works.&lt;/p&gt;
&lt;p&gt;The solution IMO is to bundle the additional sources into the src.deb package
and use the same building procedure as upstream.&lt;/p&gt;</summary><category term="QA"></category><category term="fedora.planet"></category></entry><entry><title>Testing the 8-bit computer Puldin</title><link href="http://atodorov.org/blog/2016/07/12/testing-the-8-bit-computer-puldin/" rel="alternate"></link><updated>2016-07-12T14:10:00+03:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-07-12:blog/2016/07/12/testing-the-8-bit-computer-puldin/</id><summary type="html">&lt;p&gt;&lt;img alt="Puldin creators" src="/images/puldin_creators.jpg" title="Puldin creators" /&gt;&lt;/p&gt;
&lt;p&gt;Last weekend I visited &lt;a href="http://tuxcon.mobi"&gt;TuxCon&lt;/a&gt; in Plovdiv and
was very happy to meet and talk to some of the creators of the Puldin
computer! On the picture above are (left to right) Dimitar Georgiev
- wrote the text editor, Ivo Nenov - BIOS, DOS and core OS developer,
Nedyalko Todorov - director of the vendor company and Orlin Shopov -
BIOS, DOS, compiler and core OS developer.&lt;/p&gt;
&lt;p&gt;Puldin is 100% pure Bulgarian development, while the “Pravetz” brand
was copy of Apple ][ (Pravetz 8A, 8C, 8M), Oric (Pravets 8D) and IBM-PC
(Pravetz 16). The Puldin computers were build from scratch both hardware
and software and were produced in Plovdiv in the late 80s and early 90s.
50000 pieces were made, at least 35000 of them have been exported to Russia
and paid for. A typical configuration in a Russian class room consisted of
several Puldin computers and a single Pravetz 16. According to Russian sources
the last usage of these computers was in 2003 serving as Linux terminals
and being maintained without any support from the vendor
(b/c it ceased to exist).&lt;/p&gt;
&lt;p&gt;&lt;img alt="Puldin 601" src="/images/puldin601.jpg" title="Puldin 601" /&gt;&lt;/p&gt;
&lt;p&gt;One of the main objectives of Puldin was full compatibility with IBM-PC.
At the time IBM had been releasing extensive documentation about how their
software and hardware works which has been used by Puldin's creators as
their software specs. Despite IBM-PC using faster CPU the Puldin 601 had
a comparable performance due to aggressive software and compiler optimizations.&lt;/p&gt;
&lt;p&gt;Testing wise the guys used to compare Puldin's functionality with that of IBM-PC.
It was a hard requirement to have full compatibility on the file storage layer,
that means floppy disks written on Puldin had to be readable on IBM-PC and vice
versa. Same goes for programs compiled on Puldin - they had to execute on IBM-PC.&lt;/p&gt;
&lt;p&gt;Everything of course had been tested manually and on top of that all the software
had to be burned to ROM before you can do anything with it. As you can imagine the
testing process had been quite slow and painful compared to today's standards.
I've asked the guys if they'd happened to find a bug in IBM-PC which wasn't present
in their code but they couldn't remember.&lt;/p&gt;
&lt;p&gt;What was interesting for me on the hardware side was the fact that you can plug
the computer directly to a cheap TV set and that it's been one of the first computers
which could operate on 12V DC, powered directly from a car battery.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Pravetz 8" src="/images/pravetz16.jpg" title="Pravetz 8" /&gt;&lt;/p&gt;
&lt;p&gt;There was also a fully functional Pravetz 8 with an additional VGA port to
connect it to the LCD monitor as well as a SD card reader wired to function as a
floppy disk reader (the small black dot behind the joystick).&lt;/p&gt;
&lt;p&gt;For those who missed it (and understand Bulgarian) I have a
&lt;a href="https://www.youtube.com/watch?v=uFGnrqa2RSY&amp;amp;list=PLFjlI7p-h1hxBP3cIjEqePSeoBDHud5Db&amp;amp;index=1"&gt;video recording on YouTube&lt;/a&gt;.
For more info about the history and the hardware please check-out
&lt;a href="https://olimex.wordpress.com/2015/01/12/retro-computer-puldin-the-only-bulgarian-8-bit-computer-developed-from-scratch/"&gt;Olimex post on Puldin&lt;/a&gt;
(in English). For more info on Puldin and Pravetz please visit
&lt;a href="http://pyldin.info"&gt;pyldin.info&lt;/a&gt; (in Russian) and
&lt;a href="http://pravetz8.com"&gt;pravetz8.com&lt;/a&gt; (in Bulgarian)
using Google translate if need be.&lt;/p&gt;</summary><category term="QA"></category><category term="fedora.planet"></category><category term="events"></category></entry><entry><title>Testing Data Structures in Pykickstart</title><link href="http://atodorov.org/blog/2016/07/06/testing-data-structures-in-pykickstart/" rel="alternate"></link><updated>2016-07-06T15:10:00+03:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-07-06:blog/2016/07/06/testing-data-structures-in-pykickstart/</id><summary type="html">&lt;p&gt;When designing automated test cases we often think either about increasing
coverage or in terms of testing more use-cases aka behavior scenarios. Both
are valid approaches to improve testing and both of them seem to focus
around execution control flow (or business logic). However program behavior
is sometimes controlled via the contents of its data structures and this is
something which is rarely tested. &lt;/p&gt;
&lt;p&gt;In
&lt;a href="https://github.com/rhinstaller/pykickstart/pull/26#discussion_r32790705"&gt;this comment&lt;/a&gt;
Brian C. Lane and Vratislav Podzimek from Red Hat are talking about a data structure
which maps Fedora versions to particular implementations of kickstart commands.
For example&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;RHEL7Handler&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;BaseHandler&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="n"&gt;version&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;RHEL7&lt;/span&gt;

    &lt;span class="n"&gt;commandMap&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;auth&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;authconfig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FC3_Authconfig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;authconfig&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;authconfig&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FC3_Authconfig&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;autopart&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;autopart&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;F20_AutoPart&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;autostep&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;autostep&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;FC3_AutoStep&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;bootloader&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt; &lt;span class="n"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;bootloader&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;RHEL7_Bootloader&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
    &lt;span class="p"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In their particular case the Fedora 21 &lt;code&gt;logvol&lt;/code&gt; implementation introduced the
&lt;code&gt;--profile&lt;/code&gt; parameter but in
Fedora 22 and Fedora 23 the &lt;code&gt;logvol&lt;/code&gt; command mapped to the Fedora 20 implementation and the
&lt;code&gt;--profile&lt;/code&gt; parameter wasn't available. This is unexpected change in program behavior
although the &lt;code&gt;logvol.py&lt;/code&gt; and &lt;code&gt;handlers/f22.py&lt;/code&gt; files have
&lt;a href="https://github.com/atodorov/pykickstart-coverage/blob/master/coverage-report.log"&gt;99% and 100% code coverage&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;This morning I did some coding and created an automated test for this problem. The test
iterates over all command maps. For each command in the map (that is data structure member)
we load the module which provides all possible implementations for that command. In the
loaded module
we search for implementations which have newer versions than what is in the map,
but not newer than the current Fedora version under test. With a little bit of pruning
the current list of offenses is&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;ERROR&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;handlers&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;devel&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;py&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;fcoe&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt; &lt;span class="n"&gt;maps&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;F13_Fcoe&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;
&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;pykickstart&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fcoe&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt; &lt;span class="n"&gt;there&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;newer&lt;/span&gt; &lt;span class="n"&gt;implementation&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;RHEL7_Fcoe&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;ERROR&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;handlers&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;devel&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;py&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;FcoeData&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;maps&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;F13_FcoeData&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;
&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;pykickstart&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;fcoe&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt; &lt;span class="n"&gt;there&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;newer&lt;/span&gt; &lt;span class="n"&gt;implementation&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;RHEL7_FcoeData&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;ERROR&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;handlers&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;devel&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;py&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;user&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt; &lt;span class="n"&gt;maps&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;F19_User&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;
&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;pykickstart&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;user&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt; &lt;span class="n"&gt;there&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;newer&lt;/span&gt; &lt;span class="n"&gt;implementation&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;F24_User&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;ERROR&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;handlers&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f24&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;py&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;user&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt; &lt;span class="n"&gt;maps&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;F19_User&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;
&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;pykickstart&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;user&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt; &lt;span class="n"&gt;there&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;newer&lt;/span&gt; &lt;span class="n"&gt;implementation&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;F24_User&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;ERROR&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;handlers&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f22&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;py&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;logvol&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt; &lt;span class="n"&gt;maps&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;F20_LogVol&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;
&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;pykickstart&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logvol&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt; &lt;span class="n"&gt;there&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;newer&lt;/span&gt; &lt;span class="n"&gt;implementation&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;F21_LogVol&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;ERROR&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;handlers&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f22&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;py&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;LogVolData&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;maps&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;F20_LogVolData&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;
&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;pykickstart&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;logvol&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt; &lt;span class="n"&gt;there&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;newer&lt;/span&gt; &lt;span class="n"&gt;implementation&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;F21_LogVolData&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;

&lt;span class="n"&gt;ERROR&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="n"&gt;In&lt;/span&gt; &lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;handlers&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;f18&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;py&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt; &lt;span class="n"&gt;the&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;network&amp;quot;&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt; &lt;span class="n"&gt;maps&lt;/span&gt; &lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;F16_Network&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="k"&gt;in&lt;/span&gt;
&lt;span class="err"&gt;`&lt;/span&gt;&lt;span class="n"&gt;pykickstart&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;commands&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="na"&gt;network&lt;/span&gt;&lt;span class="err"&gt;`&lt;/span&gt; &lt;span class="n"&gt;there&lt;/span&gt; &lt;span class="k"&gt;is&lt;/span&gt; &lt;span class="n"&gt;newer&lt;/span&gt; &lt;span class="n"&gt;implementation&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;F18_Network&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The first two are possibly false negatives or related to the naming conventions used
in this module. However the rest appear to be legitimate problems. The &lt;code&gt;user&lt;/code&gt; command
has introduced the &lt;code&gt;--groups&lt;/code&gt; parameter in Fedora 24 (devel is Fedora 25 currently) but the
parser will fail to recognize this parameter. The &lt;code&gt;logvol&lt;/code&gt; problem is recognized as well
since it was never patched. And the Fedora 18 &lt;code&gt;network&lt;/code&gt; command implements a new property called
&lt;code&gt;hostname&lt;/code&gt; which has probably never been available to be used.&lt;/p&gt;
&lt;p&gt;You can follow my current work in
&lt;a href="https://github.com/rhinstaller/pykickstart/pull/91"&gt;PR #91&lt;/a&gt; and happy testing your
data structures.&lt;/p&gt;</summary><category term="QA"></category><category term="fedora.planet"></category></entry><entry><title>Don't Upgrade Galaxy S5 to Android 6.0</title><link href="http://atodorov.org/blog/2016/06/09/dont-upgrade-galaxy-s5-to-android-60/" rel="alternate"></link><updated>2016-06-09T00:10:00+03:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-06-09:blog/2016/06/09/dont-upgrade-galaxy-s5-to-android-60/</id><summary type="html">&lt;p&gt;Samsung is shipping out buggy software like a boss, no doubt about it.
I've written a bit about &lt;a href="http://atodorov.org/blog/categories/samsung/"&gt;their bugs&lt;/a&gt; previously.
However I didn't expect them to release Android 6.0.1 and render my
&lt;a href="http://amzn.to/1tiiqze"&gt;Galaxy S5&lt;/a&gt; completely useless with respect
to the feature I use the most.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Lockscreen" src="/images/samsung/lockscreen_bug.jpg" title="Lockscreen" /&gt;&lt;/p&gt;
&lt;h2&gt;Tell me the weather for Brussels&lt;/h2&gt;
&lt;p&gt;So on Monday I've let Android upgrade to 6.0.1 to be completely surprised
that the lockscreen shows the weather report for Brussels, while
I'm based in Sofia. I've checked &lt;em&gt;AccuWeather&lt;/em&gt; (I did go to
&lt;a href="http://atodorov.org/blog/2016/02/02/fosdem-2016-report/"&gt;Brussels earlier this year&lt;/a&gt;)
but it displayed only Sofia and Thessaloniki. To get rid of this widget
go to &lt;code&gt;Settings -&amp;gt; Lockscreen -&amp;gt; Additional information&lt;/code&gt; and turn it off!&lt;/p&gt;
&lt;p&gt;I think this weather report comes from GPS/Location based data, which I
have turned off by default but did use a while back ago. After turning
the widget off and back on it didn't appear on the lockscreen. I suspect
they fall back to showing the last good known value when data is missing
instead of handling the error properly.&lt;/p&gt;
&lt;h2&gt;Apps are gone&lt;/h2&gt;
&lt;p&gt;Some of my installed apps are missing now. So far I've noticed that the
&lt;em&gt;Gallery&lt;/em&gt; and &lt;em&gt;S Health&lt;/em&gt; icons have disappeared from my homescreen. I think
&lt;em&gt;S Health&lt;/em&gt; came from Samsung's app store but still they shouldn't have removed
it silently. Now I wonder what happened to my data.&lt;/p&gt;
&lt;p&gt;I don't see why &lt;em&gt;Gallery&lt;/em&gt; was removed though. The only way to view pictures
is to use the camera app preview functionality which is kind of grose.&lt;/p&gt;
&lt;h2&gt;Grayscale in powersafe mode is gone&lt;/h2&gt;
&lt;p&gt;The killer feature on these higher end Galaxy devices is the &lt;em&gt;Powersafe mode&lt;/em&gt;
and &lt;em&gt;Ultra Powersafe mode&lt;/em&gt;. I use them a lot and by default have my phone in
&lt;em&gt;Powersafe mode&lt;/em&gt; with grayscale colors enabled. It is easier on the eyes and
also safes your battery.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; grayscale colors don't affect some displays but these devices use
AMOLED screens which need different amounts of power to display different
colors. More black means less power required!&lt;/p&gt;
&lt;p&gt;After the upgrade grayscale is no more. There's not even an on/off switch.
I've managed to find a workaround though. First you need to enable developer mode
by tapping 7 times on &lt;code&gt;About device -&amp;gt; Build number&lt;/code&gt;. Then go to
&lt;code&gt;Settings -&amp;gt; Developer options&lt;/code&gt;, look for the &lt;code&gt;Hardware Accelerated Rendering&lt;/code&gt;
section and select &lt;code&gt;Simulate Color Space -&amp;gt; Monochromacy&lt;/code&gt;! This is a bit ugly
hack and doesn't have the convenience of turning colors on/off by tapping
the quick Powersafe mode button at the top of the screen!&lt;/p&gt;
&lt;p&gt;It looks like Samsung didn't think this upgrade well enough or didn't test it
well enough ? In my line of work (installation and upgrade testing) I've rarely
seen such a big blunder. Thanks for reading and happy testing!&lt;/p&gt;</summary><category term="QA"></category><category term="fedora.planet"></category><category term="Samsung"></category></entry><entry><title>How To Hire Software Testers, Pt. 3</title><link href="http://atodorov.org/blog/2016/06/03/how-to-hire-software-testers-pt-3/" rel="alternate"></link><updated>2016-06-03T11:15:00+03:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-06-03:blog/2016/06/03/how-to-hire-software-testers-pt-3/</id><summary type="html">&lt;p&gt;In previous posts (links below) I have described my process of interviewing
QA candidates. Today I'm quoting an excerpt from the book
&lt;a href="http://it-interviews.com/"&gt;Mission: My IT career&lt;/a&gt;(Bulgarian only) by Ivaylo Hristov,
one of &lt;a href="http://komfo.com"&gt;Komfo&lt;/a&gt;'s co-founders.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Fedora pen" src="/images/fedora/pen.png" title="Fedora pen" /&gt;&lt;/p&gt;
&lt;p&gt;He writes&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;Probably the most important personal trait of a QA engineer is to
be able to think outside given boundaries and prejudices
(about software that is). When necessary to be non-conventional and
apply different approaches to the problems being solved. This will help
them find defect which nobody else will notice.

Most often errors/mistakes in software development are made due to
wrong expectations or wrong assumptions. Very often this happens because
developers hope their software will be used in one particular way
(as it was designed to) or that a particular set of data will be returned.
Thus the skill to think outside the box is the most important skill
we (as employers) are looking to find in a QA candidate. At job interviews
you can expect to be given tasks and questions which examine those skills.
&lt;/pre&gt;&lt;/div&gt;


&lt;h2&gt;How would you test a pen?&lt;/h2&gt;
&lt;p&gt;This is Ivaylo's favorite question for QA candidates. He's looking for
attention to details and knowing when to stop testing. Some of the possible
answers related to core functionality are&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Does the pen write in the correct color&lt;/li&gt;
&lt;li&gt;Does the color fades over time&lt;/li&gt;
&lt;li&gt;Does the pen operate normally at various temperatures? What temperature
  intervals would you choose for testing&lt;/li&gt;
&lt;li&gt;Does the pen operate normally at various atmospheric pressure&lt;/li&gt;
&lt;li&gt;When writing, does the pen leave excessive ink&lt;/li&gt;
&lt;li&gt;When writing, do you get a continuous line or not&lt;/li&gt;
&lt;li&gt;What pressure does the user need to apply in order to write a
  continuous line&lt;/li&gt;
&lt;li&gt;What surfaces can the pen write on? What surfaces would you test&lt;/li&gt;
&lt;li&gt;Are you able to write on a piece of paper if there is something soft underneath&lt;/li&gt;
&lt;li&gt;What is the maximum inclination angle at which the pen is able to write
  without problems&lt;/li&gt;
&lt;li&gt;Does the ink dry fast&lt;/li&gt;
&lt;li&gt;If we spill different liquids onto a sheet of paper, on which we had written
  something, does the ink stay intact or smear&lt;/li&gt;
&lt;li&gt;Can you use pencil rubber to erase the ink? What else would you test&lt;/li&gt;
&lt;li&gt;How long can you write before we run out of ink&lt;/li&gt;
&lt;li&gt;How fat is the ink line&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Then Ivaylo gives a few more non-obvious answers&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Verify that all labels on the pen/ink cartridge are correctly spelled
  and how durable they are (try to erase them)&lt;/li&gt;
&lt;li&gt;Strength test - what is the maximum height you can drop the pen from
  without breaking it&lt;/li&gt;
&lt;li&gt;Verify that dimensions are correct&lt;/li&gt;
&lt;li&gt;Test if the pen keeps writing after not being used for some time
  (how long)&lt;/li&gt;
&lt;li&gt;Testing individual pen components under different temperature and
  atmospheric conditions&lt;/li&gt;
&lt;li&gt;Verify that materials used to make the pen are safe, e.g. when you put
  the pen in your mouth&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;When should you stop ? According to the book there can be between 50 and 100
test cases for a single pen, maybe more. It's not a good sign if you stop at
the first 3!&lt;/p&gt;
&lt;p&gt;If you want to know what skills are revealed via these questions please
read my other posts on the topic:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;a href="http://atodorov.org/blog/2016/04/12/how-to-hire-software-testers-pt-1/"&gt;The login form question&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="http://atodorov.org/blog/2016/04/16/how-to-hire-software-testers-pt-2/"&gt;How do you test a Sudoku solver&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Thanks for reading and happy testing!&lt;/p&gt;</summary><category term="QA"></category><category term="fedora.planet"></category></entry><entry><title>DEVit Conf 2016</title><link href="http://atodorov.org/blog/2016/05/25/devit-conf-2016/" rel="alternate"></link><updated>2016-05-25T16:01:00+03:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-05-25:blog/2016/05/25/devit-conf-2016/</id><summary type="html">&lt;p&gt;It's been another busy week after &lt;a href="http://devitconf.org/"&gt;DEVit conf&lt;/a&gt; took place in
Thessaloniki. Here are my impressions.&lt;/p&gt;
&lt;p&gt;&lt;img alt="DEVit 2016" src="/images/devit2016.jpg" title="DEVit 2016" /&gt;&lt;/p&gt;
&lt;h2&gt;Pre-conference&lt;/h2&gt;
&lt;p&gt;&lt;a href="http://techministry.gr"&gt;TechMinistry&lt;/a&gt; is Thessaloniki's hacker space which
is hosted at a central location, near major shopping streets.
I've attended an
&lt;a href="http://discourse.techministry.gr/t/18-05-2016-19-30-open-source-wednesday/67"&gt;Open Source Wednesday&lt;/a&gt;
meeting. From the event description I thought that
there was going to be a discussion about getting involved with
Firefox. However that was not the case.
Once people started coming in they formed organic groups and
started discussing various topics on their own.&lt;/p&gt;
&lt;p&gt;I was also shown their 3D printer which IMO is the most precise of 3D printers
I've seen so far. Imagine what it would be like to click &lt;em&gt;Print&lt;/em&gt;, sometime
in the future, and have your online orders appear on your desk over night.
That would be quite cool!&lt;/p&gt;
&lt;p&gt;I've met with &lt;a href="https://twitter.com/bacharakis"&gt;Christos Bacharakis&lt;/a&gt;, a Mozilla
representative for Greece, who gave me some goodies for my students at HackBulgaria!&lt;/p&gt;
&lt;p&gt;On Thursday I spent the day merging pull requests for
&lt;a href="https://github.com/MrSenko/pelican-octopress-theme"&gt;MrSenko/pelican-octopress-theme&lt;/a&gt;
and attended the DEVit Speakers dinner at
&lt;a href="https://www.facebook.com/massaliathessaloniki/"&gt;Massalia&lt;/a&gt;.
Food and drinks were very good and I even found a new recipe for mushrooms with
ouzo, of which I think I had a bit too many :).&lt;/p&gt;
&lt;p&gt;I was also told that &lt;em&gt;"a full stack developer is a developer who can introduce
a bug to every layer of the software stack"&lt;/em&gt;. I can't agree more!&lt;/p&gt;
&lt;h2&gt;DEVit&lt;/h2&gt;
&lt;p&gt;The conference day started with a huge delay due to long queues for registration.
The fist talk I attended, and the best one IMO was
&lt;a href="https://www.youtube.com/watch?v=nCGBgI1MNwE&amp;amp;index=1&amp;amp;list=PLFjlI7p-h1hxBP3cIjEqePSeoBDHud5Db"&gt;Need It Robust? Make It Fragile!&lt;/a&gt;
by Yegor Bugayenko (watch the video). There he talked about two different approaches to writing
software: fail safe vs. fail fast.&lt;/p&gt;
&lt;p&gt;He argues that when software is designed to
fail fast bugs are discovered earlier in the development cycle/software lifetime
and thus are easier to fix, making the whole system more robust and more stable.
On the other hand when software is designed to hide failures and tries to
recover auto-magically the same problems remain hidden for longer and when they
are finally discovered they are harder to fix. This is mostly due to the fact that
the original error condition is hidden and manifested in a different way which
makes it harder to debug.&lt;/p&gt;
&lt;p&gt;Yegor made several examples, all of which are valid code, which he considers
bad practice. For example imagine we have a function that accepts a filename
as parameter:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;read_file_fail_safe&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fname&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exists&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fname&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;

    &lt;span class="c"&gt;# read the file, do something else&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;bytes_read&lt;/span&gt;


&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;read_file_fail_fast&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fname&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="ow"&gt;not&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exists&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fname&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;raise&lt;/span&gt; &lt;span class="ne"&gt;Exception&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;File does not exist&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c"&gt;# read the file, do something else&lt;/span&gt;
    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;bytes_read&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;In the first example &lt;code&gt;read_file_fail_safe&lt;/code&gt; returns -1 on error. The trouble is
whoever is calling this method may not check for errors thus corrupting the
flow of the program further down the line. You may also want to collect metrics and
update your database with the number of bytes processed - this will totally
skew your metrics. C programmers out there will quickly remember at least
one case when they didn't check the return code for errors!&lt;/p&gt;
&lt;p&gt;The second example &lt;code&gt;read_file_fail_fast&lt;/code&gt; will raise an exception the moment
it encounters a problem. It's not its fault that the file doesn't exist and
there's nothing it can do about it, nor is its job to do anything about it.
Raising an exception will surface back to the caller and they will be notified
about the problem, taking appropriate actions to resolve it.&lt;/p&gt;
&lt;p&gt;Yegor was also unhappy that many books teach fail safe and even IDEs (for Java)
generate fail safe boiler-plate code (need to check this)!
Indeed it is me who asks the first question
&lt;em&gt;Are there any tools to detect fail safe code patterns?&lt;/em&gt; and it turns out there aren't
(for the majority of cases that is). If you happen to know such a tool
please post a link in the comments below.&lt;/p&gt;
&lt;p&gt;I was a bit disappointed by the rest of the talks. They were all high-level
overviews IMO and didn't go deep technical. Last year was better. I also
wanted to attend the GitHub Patchwork workshop but looking at the agenda
it looked like this is for users who are starting with git and GitHub
(which I'm not).&lt;/p&gt;
&lt;p&gt;The closing session of the day was
&lt;em&gt;"Real time front-end alchemy, or: capturing, playing, altering and encoding
video and audio streams, without servers or plugins!"&lt;/em&gt; by Soledad Penades from
Mozilla. There she gave a demo about the latest and greatest in terms of
audio and video capturing, recording and mixing natively in the browser.
This is definitively very cool for apps in the audio/video space but I can
also imagine an application for us software testers.&lt;/p&gt;
&lt;p&gt;Depending on computational and memory requirements you should be able to
record everything the user does in their browser (while on your website)
and send it back home when they want to report an error or contact support.
Definitely better than screenshots and having to go back and forth until
the exact steps to reproduce are established.&lt;/p&gt;</summary><category term="fedora.planet"></category><category term="events"></category></entry><entry><title>Mismatch in Pyparted Interfaces</title><link href="http://atodorov.org/blog/2016/04/26/mismatch-in-pyparted-interfaces/" rel="alternate"></link><updated>2016-04-26T10:50:00+03:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-04-26:blog/2016/04/26/mismatch-in-pyparted-interfaces/</id><summary type="html">&lt;p&gt;Last week my co-worker Marek Hruscak, from Red Hat, found an interesting case of
mismatch between the two interfaces provided by pyparted. In this article
I'm going to give an example, using simplified code and explain what is
happening. From pyparted's documentation we learn the following&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;pyparted is a set of native Python bindings for libparted.  libparted is the
library portion of the GNU parted project.  With pyparted, you can write
applications that interact with disk partition tables and filesystems.&lt;/p&gt;
&lt;p&gt;The Python bindings are implemented in two layers.  Since libparted itself
is written in C without any real implementation of objects, a simple 1:1
mapping of externally accessible libparted functions was written.  This
mapping is provided in the _ped Python module.  You can use that module if
you want to, but it's really just meant for the larger parted module.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nx"&gt;_ped&lt;/span&gt;       &lt;span class="nx"&gt;libparted&lt;/span&gt; &lt;span class="nx"&gt;Python&lt;/span&gt; &lt;span class="nx"&gt;bindings&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;direct&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt; &lt;span class="kd"&gt;function&lt;/span&gt; &lt;span class="nx"&gt;mapping&lt;/span&gt;
&lt;span class="nx"&gt;parted&lt;/span&gt;     &lt;span class="nx"&gt;Native&lt;/span&gt; &lt;span class="nx"&gt;Python&lt;/span&gt; &lt;span class="nx"&gt;code&lt;/span&gt; &lt;span class="nx"&gt;building&lt;/span&gt; &lt;span class="nx"&gt;on&lt;/span&gt; &lt;span class="nx"&gt;_ped&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;complete&lt;/span&gt; &lt;span class="kd"&gt;with&lt;/span&gt; &lt;span class="nx"&gt;classes&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
           &lt;span class="nx"&gt;exceptions&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nx"&gt;and&lt;/span&gt; &lt;span class="nx"&gt;advanced&lt;/span&gt; &lt;span class="nx"&gt;functionality&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;/blockquote&gt;
&lt;p&gt;The two interfaces are the &lt;code&gt;_ped&lt;/code&gt; and &lt;code&gt;parted&lt;/code&gt; modules. As a user I expect them
to behave exactly the same but they don't. For example some partition properties
are read-only in libparted and &lt;code&gt;_ped&lt;/code&gt; but not in &lt;code&gt;parted&lt;/code&gt;. This is the mismatch
I'm talking about.&lt;/p&gt;
&lt;p&gt;Consider the following tests (also available on
&lt;a href="https://github.com/atodorov/pyparted/tree/not_read_only_demo"&gt;GitHub&lt;/a&gt;)&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="gh"&gt;diff --git a/tests/baseclass.py b/tests/baseclass.py&lt;/span&gt;
&lt;span class="gh"&gt;index 4f48b87..30ffc11 100644&lt;/span&gt;
&lt;span class="gd"&gt;--- a/tests/baseclass.py&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/tests/baseclass.py&lt;/span&gt;
&lt;span class="gu"&gt;@@ -168,6 +168,12 @@ class RequiresPartition(RequiresDisk):&lt;/span&gt;
         self._part = _ped.Partition(disk=self._disk, type=_ped.PARTITION_NORMAL,
         self._part = _ped.Partition(disk=self._disk, type=_ped.PARTITION_NORMAL,
                                     start=0, end=100, fs_type=_ped.file_system_type_get(&amp;quot;ext2&amp;quot;))
 
&lt;span class="gi"&gt;+        geom = parted.Geometry(self.device, start=100, length=100)&lt;/span&gt;
&lt;span class="gi"&gt;+        fs = parted.FileSystem(type=&amp;#39;ext2&amp;#39;, geometry=geom)&lt;/span&gt;
&lt;span class="gi"&gt;+        self.part = parted.Partition(disk=self.disk, type=parted.PARTITION_NORMAL,&lt;/span&gt;
&lt;span class="gi"&gt;+                                    geometry=geom, fs=fs)&lt;/span&gt;
&lt;span class="gi"&gt;+&lt;/span&gt;
&lt;span class="gi"&gt;+&lt;/span&gt;
 # Base class for any test case that requires a hash table of all
 # _ped.DiskType objects available
 class RequiresDiskTypes(unittest.TestCase):
&lt;span class="gh"&gt;diff --git a/tests/test__ped_partition.py b/tests/test__ped_partition.py&lt;/span&gt;
&lt;span class="gh"&gt;index 7ef049a..26449b4 100755&lt;/span&gt;
&lt;span class="gd"&gt;--- a/tests/test__ped_partition.py&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/tests/test__ped_partition.py&lt;/span&gt;
&lt;span class="gu"&gt;@@ -62,8 +62,10 @@ class PartitionGetSetTestCase(RequiresPartition):&lt;/span&gt;
         self.assertRaises(exn, setattr, self._part, &amp;quot;num&amp;quot;, 1)
         self.assertRaises(exn, setattr, self._part, &amp;quot;fs_type&amp;quot;,
             _ped.file_system_type_get(&amp;quot;fat32&amp;quot;))
&lt;span class="gd"&gt;-        self.assertRaises(exn, setattr, self._part, &amp;quot;geom&amp;quot;,&lt;/span&gt;
&lt;span class="gd"&gt;-                                     _ped.Geometry(self._device, 10, 20))&lt;/span&gt;
&lt;span class="gi"&gt;+        with self.assertRaises((AttributeError, TypeError)):&lt;/span&gt;
&lt;span class="gi"&gt;+#            setattr(self._part, &amp;quot;geom&amp;quot;, _ped.Geometry(self._device, 10, 20))&lt;/span&gt;
&lt;span class="gi"&gt;+            self._part.geom = _ped.Geometry(self._device, 10, 20)&lt;/span&gt;
&lt;span class="gi"&gt;+&lt;/span&gt;
         self.assertRaises(exn, setattr, self._part, &amp;quot;disk&amp;quot;, self._disk)
 
         # Check that values have the right type.
&lt;span class="gh"&gt;diff --git a/tests/test_parted_partition.py b/tests/test_parted_partition.py&lt;/span&gt;
&lt;span class="gh"&gt;index 0a406a0..8d8d0fd 100755&lt;/span&gt;
&lt;span class="gd"&gt;--- a/tests/test_parted_partition.py&lt;/span&gt;
&lt;span class="gi"&gt;+++ b/tests/test_parted_partition.py&lt;/span&gt;
&lt;span class="gu"&gt;@@ -23,7 +23,7 @@&lt;/span&gt;
 import parted
 import unittest
 
&lt;span class="gd"&gt;-from tests.baseclass import RequiresDisk&lt;/span&gt;
&lt;span class="gi"&gt;+from tests.baseclass import RequiresDisk, RequiresPartition&lt;/span&gt;
 
 # One class per method, multiple tests per class.  For these simple methods,
 # that seems like good organization.  More complicated methods may require
&lt;span class="gu"&gt;@@ -34,11 +34,11 @@ class PartitionNewTestCase(unittest.TestCase):&lt;/span&gt;
         # TODO
         self.fail(&amp;quot;Unimplemented test case.&amp;quot;)
 
&lt;span class="gd"&gt;-@unittest.skip(&amp;quot;Unimplemented test case.&amp;quot;)&lt;/span&gt;
&lt;span class="gd"&gt;-class PartitionGetSetTestCase(unittest.TestCase):&lt;/span&gt;
&lt;span class="gi"&gt;+class PartitionGetSetTestCase(RequiresPartition):&lt;/span&gt;
     def runTest(self):
&lt;span class="gd"&gt;-        # TODO&lt;/span&gt;
&lt;span class="gd"&gt;-        self.fail(&amp;quot;Unimplemented test case.&amp;quot;)&lt;/span&gt;
&lt;span class="gi"&gt;+        with self.assertRaises((AttributeError, TypeError)):&lt;/span&gt;
&lt;span class="gi"&gt;+            #setattr(self.part, &amp;quot;geometry&amp;quot;, parted.Geometry(self.device, start=10, length=20))&lt;/span&gt;
&lt;span class="gi"&gt;+            self.part.geometry = parted.Geometry(self.device, start=10, length=20)&lt;/span&gt;
 
 @unittest.skip(&amp;quot;Unimplemented test case.&amp;quot;)
 class PartitionGetFlagTestCase(unittest.TestCase):
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The test in &lt;code&gt;test__ped_partition.py&lt;/code&gt; works without problems, I've modified it for
visual reference only. This was also the inspiration behind the test in
&lt;code&gt;test_parted_partition.py&lt;/code&gt;. However the second test fails with&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;======================================================================
FAIL: runTest (tests.test_parted_partition.PartitionGetSetTestCase)
----------------------------------------------------------------------
Traceback (most recent call last):
  File &amp;quot;/tmp/pyparted/tests/test_parted_partition.py&amp;quot;, line 41, in runTest
    self.part.geometry = parted.Geometry(self.device, start=10, length=20)
AssertionError: (&amp;lt;type &amp;#39;exceptions.AttributeError&amp;#39;&amp;gt;, &amp;lt;type &amp;#39;exceptions.TypeError&amp;#39;&amp;gt;) not raised

----------------------------------------------------------------------
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now it's clear that something isn't quite the same between the two interfaces.
If we look at &lt;code&gt;src/parted/partition.py&lt;/code&gt; we see the following snippet&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;137     fileSystem = property(lambda s: s._fileSystem, lambda s, v: setattr(s, &amp;quot;_fileSystem&amp;quot;, v))
138     geometry = property(lambda s: s._geometry, lambda s, v: setattr(s, &amp;quot;_geometry&amp;quot;, v))
139     system = property(lambda s: s.__writeOnly(&amp;quot;system&amp;quot;), lambda s, v: s.__partition.set_system(v))
140     type = property(lambda s: s.__partition.type, lambda s, v: setattr(s.__partition, &amp;quot;type&amp;quot;, v))
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;The geometry property is indeed read-write but the system property is write-only.
&lt;code&gt;git blame&lt;/code&gt; leads us to the interesting
&lt;a href="https://github.com/rhinstaller/pyparted/commit/2fc0ee2b"&gt;commit 2fc0ee2b&lt;/a&gt;, which changes
definitions for quite a few properties and removes the &lt;code&gt;_readOnly&lt;/code&gt; method which raises
an exception. Even more interesting is the fact that the &lt;code&gt;Partition.geometry&lt;/code&gt; property
hasn't been changed. If you look closer you will notice that the deleted definition and
the new one are exactly the same. Looks like the problem existed even before this change.&lt;/p&gt;
&lt;p&gt;Digging down even further we find
&lt;a href="https://github.com/rhinstaller/pyparted/commit/7599aa1ae505f3784ca4936b58b38b8dffb752ff"&gt;commit 7599aa1&lt;/a&gt;
which is the very first implementation of the &lt;code&gt;parted&lt;/code&gt; module. There you can see the
&lt;code&gt;_readOnly&lt;/code&gt; method and some properties like &lt;code&gt;path&lt;/code&gt; and &lt;code&gt;disk&lt;/code&gt; correctly marked as such
but &lt;code&gt;geometry&lt;/code&gt; isn't.&lt;/p&gt;
&lt;p&gt;Shortly after this commit the first test was added (4b9de0e) and a bit
later the second, empty test class, was added (c85a5e6). This only goes
to show that every piece of software needs appropriate QA coverage, which
pyparted was kind of lacking (and I'm trying to change that).&lt;/p&gt;
&lt;p&gt;The reason this bug went unnoticed for so long
is the limited exposure of pyparted. To my knowledge anaconda, the Fedora installer
is its biggest (if not single) consumer and maybe it uses only the &lt;code&gt;_ped&lt;/code&gt;
interface (I didn't check) or it doesn't try to do silly things like setting
a value to a read-only property.&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;
The lesson from this story is to test all of your interfaces and also
make sure they are behaving in exactly the same manner!
&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Thanks for reading and happy testing!&lt;/p&gt;</summary><category term="QA"></category><category term="Python"></category><category term="fedora.planet"></category></entry><entry><title>How To Hire Software Testers, Pt. 2</title><link href="http://atodorov.org/blog/2016/04/16/how-to-hire-software-testers-pt-2/" rel="alternate"></link><updated>2016-04-16T10:34:00+03:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-04-16:blog/2016/04/16/how-to-hire-software-testers-pt-2/</id><summary type="html">&lt;p&gt;In my
&lt;a href="http://atodorov.org/blog/2016/04/12/how-to-hire-software-testers-pt-1/"&gt;previous post&lt;/a&gt; I have
described the process I follow when interviewing candidates for a QA position.
The first question is designed to expose the applicant's way of thinking.
My second question is designed to examine their technical understanding
and to a lesser extent their way of thinking.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Sudoku" src="/images/sudoku.png" title="Sudoku" /&gt;&lt;/p&gt;
&lt;h2&gt;How do You Test a Sudoku Solving Function&lt;/h2&gt;
&lt;p&gt;You have implementation of a sudoku solver function with the following pseudocode:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;func Sudoku(Array[2]) {
    ...
    return Array[2]
}
&lt;/pre&gt;&lt;/div&gt;


&lt;ul&gt;
&lt;li&gt;The function solves a sudoku puzzle;&lt;/li&gt;
&lt;li&gt;Input parameter is a two-dimensional array with the known numbers (from 1 to 9) in the Sudoku grid;&lt;/li&gt;
&lt;li&gt;The output is a two-dimensional array with the numbers from the solved puzzle.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;You have 10 minutes to write down a list of all test cases you can think of!&lt;/p&gt;
&lt;h2&gt;Behind The Scenes&lt;/h2&gt;
&lt;p&gt;One set of possible tests is to examine the input and figure out if the
function has been passed valid data.
In the real-world programs interact with each other, they are not alone.
Sometimes it happens that a valid output from one program isn't a
valid input for the next one. Also we have malicious users who will try to
break the program.&lt;/p&gt;
&lt;p&gt;If a person manages to test for this case then
I know they have a bit more clue about how software is used in the real-world.
This also touches a bit on white-box testing, where the tester has full info
about the software under test. In this example the implementation is
intentionally left blank.&lt;/p&gt;
&lt;p&gt;OTOH I've seen answers where the applicant blindly assumes that the input
is 1-9, because the spec says so, and excludes the entire input testing from
their scope. I classify this answer as immediate failure, because a tester should
never assume anything and test to verify their initial conditions are indeed
as stated in the documentation.&lt;/p&gt;
&lt;p&gt;Another set of possible tests is to verify the correct work of the function.
That is to verify the proposed Sudoku solution is indeed following the rules
of the game. This is what we usually refer to black-box testing. The tester
doesn't know how the SUT works internally, they only know the input data and
the expected output. &lt;/p&gt;
&lt;p&gt;If a person fails to describe at least one such test case
they have essentially failed the question. What is the point of a SUT which
doesn't crash (suppose that all previous tests passed) but doesn't
produce the desired correct result ?&lt;/p&gt;
&lt;p&gt;Then there are test cases related to the environment in which this Sudoku
solver function operates. This is where I examine the creativity of the person,
their familiarity with other platforms and to some extent their thinking out of
the box. Is the Sudoku solver iterative or recursive ? What if we're on an
embedded system and recursion is too heavy for it ? How much power does the
function require, how fast it works, etc.&lt;/p&gt;
&lt;p&gt;A person that provides at least one answer in this category has bonus points
over the others who didn't. IMO it is very important for a tester to have
experience with various platforms and environments because this helps them
see edge cases which others will not be able to see. I also consider a strong
plus if the person shows they can operate outside their comfort zone.&lt;/p&gt;
&lt;p&gt;If we have time I may ask the applicant to write the tests using a programming
language they know. This is to verify their coding and automation skills.&lt;/p&gt;
&lt;p&gt;OTOH having the tests as code will show me how much the person knows about testing
vs. coding. I've seen solutions where people write a for loop, looping over all
numbers from 1 to 100 and testing if they are a valid input to &lt;code&gt;Sudoku()&lt;/code&gt;.
Obviously this is pointless and they failed the test.&lt;/p&gt;
&lt;p&gt;Last but not least, the question asks for testing a particular Sudoku solver
implementation. I expect the answers to be designed around the given function.
However I've seen answers designed around a
&lt;a href="http://sudoku-solutions.com/"&gt;Sudoku solver website&lt;/a&gt; or described as
intermediate states in an interactive Sudoku game (e.g. wrong answers shown in red).
I consider these invalid because the question is to test a particular
given function, not anything Sudoku related. If you do this in real-life that
means you are not testing the SUT directly but maybe touching it indirectly
(at best). This is not what a QA job is about.&lt;/p&gt;
&lt;h2&gt;What Are The Correct Answers&lt;/h2&gt;
&lt;p&gt;Here are some of the possible tests.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Test with single dimensional input array - we expect an error;&lt;/li&gt;
&lt;li&gt;Test with 3 dimensional input array - we expect an error;&lt;/li&gt;
&lt;li&gt;Then proceed testing with 2 dimensional array;&lt;/li&gt;
&lt;li&gt;Test with number less than 1 (usually 0) - expect error;&lt;/li&gt;
&lt;li&gt;Test with number greater than 9 (usually 10) - expect error;&lt;/li&gt;
&lt;li&gt;Test how the function handles non-numerical data - chars &amp;amp; symbols
(essentially the same thing for our function);&lt;/li&gt;
&lt;li&gt;Test with strings which actually represent a number, e.g. "1";&lt;/li&gt;
&lt;li&gt;Test with floating point numbers, e.g. 1.0, 2.0, 3.0 - may or may not
work depending on how the code is written;&lt;/li&gt;
&lt;li&gt;If floating point numbers are accepted, then test with a different locale.
Is "1.0" the same as "1,0";&lt;/li&gt;
&lt;li&gt;Test with &lt;code&gt;null&lt;/code&gt;, &lt;code&gt;nil&lt;/code&gt;, &lt;code&gt;None&lt;/code&gt; (whatever the language supports) -
this should be a valid value for unknown numbers and not cause a crash;&lt;/li&gt;
&lt;li&gt;Test if the function validates that the provided input follows the
Sudoku rules by passing it duplicate numbers in one row, column or
square. It should produce an error;&lt;/li&gt;
&lt;li&gt;Test if the input data contains the minimum number of givens, 17
for a general Sudoku, so that a solution can be found. Otherwise the function
may go into an
&lt;a href="http://atodorov.org/blog/2015/01/05/endless-loop-bug-candy-crush-saga-level-80/"&gt;endless loop&lt;/a&gt;;&lt;/li&gt;
&lt;li&gt;Verify the proposed solution conforms to Sudoku rules;&lt;/li&gt;
&lt;li&gt;Test with a fully solved puzzle as input - output should be exactly the same;&lt;/li&gt;
&lt;li&gt;If on mobile, measure battery consumption for 1 minute of operation. I've
seen a game which uses 1% battery power for 1 minute of game play;&lt;/li&gt;
&lt;li&gt;Test for buffer overflows;&lt;/li&gt;
&lt;li&gt;Test for speed of execution (performance);&lt;/li&gt;
&lt;li&gt;Test performance on single and multiple (core) CPUs - depending on the
language and how the function is written this may produce a difference or not;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I'm sure I'm missing something so please use the comments below to tell me your suggestions.&lt;/p&gt;
&lt;p&gt;Thanks for reading and happy testing!&lt;/p&gt;</summary><category term="QA"></category><category term="fedora.planet"></category></entry><entry><title>How To Hire Software Testers, Pt. 1</title><link href="http://atodorov.org/blog/2016/04/12/how-to-hire-software-testers-pt-1/" rel="alternate"></link><updated>2016-04-12T12:34:00+03:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-04-12:blog/2016/04/12/how-to-hire-software-testers-pt-1/</id><summary type="html">&lt;p&gt;Many people have asked me how do I make sure a person who applies for a
QA/software tester position is a good fit ? On the opposite side people
have asked online how do they give correct answers on test related questions
at job interviews. I have two general questions to help me decide if a
person knows about testing and if they are a good fit for the team or not.&lt;/p&gt;
&lt;p&gt;&lt;img alt="Login form" src="/images/login_form_wireframe.jpg" title="Login form" /&gt;&lt;/p&gt;
&lt;h2&gt;How do You Test a Login Form&lt;/h2&gt;
&lt;p&gt;You are given the login form above and the following constraints:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Log in is possible with username and password or through the social networks;&lt;/li&gt;
&lt;li&gt;After successful registration an email with the following content is sent to the user:&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;code&gt;Helo and welcome to atodorov.org! Click _here_ to confirm your emeil address.&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;You have 10 minutes to write down a list of all test cases you can think of!&lt;/p&gt;
&lt;h2&gt;Behind The Scenes&lt;/h2&gt;
&lt;p&gt;The question looks trivial but isn't as easy to answer as you may think.
If you haven't spent the last 20 years of your life in a cave, chances are
that you will give technically correct answers but this is not the only
thing I'm looking for.&lt;/p&gt;
&lt;p&gt;The question is designed to simulate a real-world scenario, where the QA
person is given a piece of software, or requirements document and tasked with
creating a test plan for it. The question is intentionally vague because that's
how real-world works, most often testers don't have all the requirements and
specifications available beforehand.&lt;/p&gt;
&lt;p&gt;The time constrain, especially when the interview is performed in person,
simulates work under pressure - get the job done as soon as possible.&lt;/p&gt;
&lt;p&gt;While I review the answers I'm trying to figure out how does the person think,
not how much about technology they know. I'm trying to figure out what are their
strong areas and where they need to improve. IMO being able to think as a tester
and having attention to details, being able to easily spot corner cases and
look at the problem from different angles is much more important than
technical knowledge in a particular domain.&lt;/p&gt;
&lt;p&gt;As long as a person is suited to think like a tester they can learn to
apply their critical thinking to any software under test and use various
testing techniques to discover or safeguard against problems.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;A person that answers quickly and intuitively is better than a person who
takes a long time to figure out what to test. I can see they are active
thinkers and can work without micro-management and hand-holding.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A person that goes on and on
describing different test cases is better than one who limits themselves to
the most obvious cases. I can see they have an exploratory passion, which
is the key to finding many bugs and making the software better;&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A person that goes to explore the system in breadth is better than one who
keeps banging on the same test case with more and more variations. I can see
they are noticing the various aspects of the software (e.g. social login,
email confirmation, etc) but also to some extent, not investing all of their
resources (the remaining time to answer) into a single direction. Also in
real-world testing, testing the crap out of something is useful up to a point.
Afterwards we don't really see any significant value from additional testing
efforts.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A person that is quick to figure out one or two corner cases is better
than a person who can't. This tells me they are thinking about what goes
on under the hood and trying to predict unpredictable behavior - for example
what happens if you try to register with already registered username or email?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;A person that asks questions in order to minimize uncertainty and vagueness
is better than the one who doesn't. In real-world if the tester doesn't know
something they have to ask. Quite often even developers and product managers
don't know the answer. Then how are we developing software if we don't know
what it is supposed to do ?&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;If given more time (writing interview), a person that organizes their answers
into steps (1, 2, 3) is a bit better than one who simply throws at you random
answers without context. Similar thought applies to people who write down their
test pre-conditions before writing down scenarios. From this I can see that
the person is well organized and will have no trouble writing detailed test cases,
with pre-conditions, steps to execute and expected results. This is what QAs do.
Also we have the, sometimes tedious, task of organizing all test results into
a test case management system (aka test book) for further reference.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;The question intentionally includes some mistakes. In this example 2 spelling
errors in the email text. Whoever manages to spot them and tell me about it is
better than others who don't spot the errors or assume that's how it is. QAs job
is to always question everything and never blindly trust that the state of the
system is the way it is. Also simple errors like typos can be
&lt;a href="http://atodorov.org/blog/2016/01/15/tesla-needs-more-qa/"&gt;embarrassing&lt;/a&gt; or generate
unnecessary support calls.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;Bravo if you tested not only the outgoing email but also social login. This
shows attention to details, not to mention social is 1/3rd of our example system.
It also shows that QA's job doesn't end with testing
the core, perceived functionality of the system. QA tests everything,
even interactions with external systems if that is necessary.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h2&gt;What Are The Correct Answers&lt;/h2&gt;
&lt;p&gt;I will document some of the possible answers as I recall them from memory.
I will update the list with other interesting answers given by students who
applied to my
&lt;a href="https://github.com/HackBulgaria/QA-and-Automation-101"&gt;QA and Automation 101&lt;/a&gt;
course, answering this very same question.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Test if users can register using valid username, email and password;&lt;/li&gt;
&lt;li&gt;Test if SUT gives an error message when email or password (or username)
format doesn't follow a particular format (e.g. no special symbols);&lt;/li&gt;
&lt;li&gt;After registration, test that the user can login successfully;&lt;/li&gt;
&lt;li&gt;Depending on requirements test if the user can login before they have
confirmed their email address;&lt;/li&gt;
&lt;li&gt;Test that upon registration a confirmation email is actually sent;&lt;/li&gt;
&lt;li&gt;Spell-check the email text;&lt;/li&gt;
&lt;li&gt;Test if the &lt;em&gt;click here&lt;/em&gt; piece of text is a hyperlink;&lt;/li&gt;
&lt;li&gt;Verify that when clicked, the hyperlink successfully confirmed email/activates the account
(depending on what confirmed/activated means per requirements);&lt;/li&gt;
&lt;li&gt;Test what happens if the link is clicked a second time;&lt;/li&gt;
&lt;li&gt;Test what happens if the link is clicked after 24 or 48 hrs;&lt;/li&gt;
&lt;li&gt;Test that the social network icons, actually link to the desired SN and
not someplace else;&lt;/li&gt;
&lt;li&gt;Test if new user accounts can be created via all specified social networks;&lt;/li&gt;
&lt;li&gt;Test what happens if there is an existing user, who registered with a password
and they (or somebody else) tries to register via social with an account that has
the same email address, aka account hijacking;&lt;/li&gt;
&lt;li&gt;Same as previous test but try to register a new user, using email address that
was previously used with social login;&lt;/li&gt;
&lt;li&gt;Test what happens if users forget their password - intentionally we don't have
the '[] Forgot my password' checkbox. This is both usability feature and missing
requirements;&lt;/li&gt;
&lt;li&gt;Test for simple SQL injections like
&lt;a href="http://php.net/manual/en/images/fa7c5b5f326e3c4a6cc9db19e7edbaf0-xkcd-bobby-tables.png"&gt;Bobby Tables&lt;/a&gt;.
&lt;em&gt;btw I was given this image as an answer which scored high on the geek-o-meter&lt;/em&gt;;&lt;/li&gt;
&lt;li&gt;Test for XSS - &lt;a href="https://twitter.com/dergeruhn/status/476764918763749376"&gt;Tweetdeck didn't&lt;/a&gt;;&lt;/li&gt;
&lt;li&gt;Test if non-activated/non-confirmed usernames expire after some time and can be used again;&lt;/li&gt;
&lt;li&gt;Test of fields tab order - something I haven't done in 15 or more years
but still valid and I've seen sites getting it wrong quite often;&lt;/li&gt;
&lt;li&gt;When trying to login test what happens when username/password is wrong or empty;&lt;/li&gt;
&lt;li&gt;Test if email is required for login - this isn't clear from the requirements
so it is a valid answer. Better answer is to clarify that;&lt;/li&gt;
&lt;li&gt;Test if username/email or password is case sensitive. Valid test and indeed I
recently saw a problem where upon registration users entered their emails using
some capital letters but they were lower-cased before saving to the DB. Later this
broke a piece of code which forgot to apply the lowercase on the input data. The code
was handling account reactivation;&lt;/li&gt;
&lt;li&gt;Test if the password field shows the actual password or not. I haven't seen this
in person but I'm certain there is some site which maybe used CSS and nice images
instead of the default ugly password field and that didn't work on all browsers;&lt;/li&gt;
&lt;li&gt;Test if you can copy&amp;amp;paste the masked password, probably trying to steal somebody
else's password. Last time I saw this was on early Windows 95 with the modem connection
dialog. Very briefly it allowed you to copy the text from the field and paste it into
Notepad to reveal the actual password;&lt;/li&gt;
&lt;li&gt;If we're on mobile (intentionally not specified) test for buffer overflows;
Actually test that everywhere and see what happens;&lt;/li&gt;
&lt;li&gt;Test if the social network buttons use the same action verb. In the example
we have &lt;em&gt;Log in&lt;/em&gt;, &lt;em&gt;Connect&lt;/em&gt; and &lt;em&gt;Sign in&lt;/em&gt;. This is sort of usability testing
and helping have a unified look and feel of the product;&lt;/li&gt;
&lt;li&gt;Test which of the &lt;em&gt;Log in&lt;/em&gt; and &lt;em&gt;Sign up&lt;/em&gt; tabs is active at the moment.
The example is intentionally left to look like a wireframe but it is important
for the user to easily tell where they are. Otherwise they'll call support or
even worse, simply give up on us;&lt;/li&gt;
&lt;li&gt;Test if all static files (images) will load if they are deployed onto CDN.
Not surprisingly I've seen &lt;a href="https://github.com/Nitrate/Nitrate/pull/80"&gt;this bug&lt;/a&gt;;&lt;/li&gt;
&lt;li&gt;In case we have a "[] Remember me" checkbox, test if it actually remembers
the user credentials. Yesterday I saw this same functionality not working on
a specialized desktop app in the corner case where you supply a different
connection endpoint (server) instead of the ones already provided. The user
defined value is accepted but not saved automatically;&lt;/li&gt;
&lt;li&gt;Test if the "Remember me" functionality actually saves your last credentials
or only the first ones you provided. There is a similar bug in 
&lt;a href="https://play.google.com/store/apps/details?id=com.xevica.grajdanite"&gt;Grajdanite&lt;/a&gt;,
where once you enter a wrong email, it is remembered and every time the form is
pre-filled with the previous value (which is wrong). I'm yet to report it though;&lt;/li&gt;
&lt;li&gt;Cross-browser testing - hmm, login and registration should work on all browsers
you say. It's not browser dependent, is it? Well yeah, login isn't browser dependent
unless we did something stupid like pre-handling the form submit via non-cross-platform
JavaScript or even
&lt;a href="https://github.com/gilsondev/pelican-clean-blog/pull/6"&gt;accidentally doing so&lt;/a&gt;;&lt;/li&gt;
&lt;li&gt;Test with Unicode characters, especially non Latin ones. It's been many years
since we had Unicode but quite a few apps haven't learned how to deal with Unicode
text properly.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;I'm certain there are more answers and I will update the list as I figure them out.
You can always post in the comments and tell me something I've missed.&lt;/p&gt;
&lt;h2&gt;How to Pass The Job Interview&lt;/h2&gt;
&lt;p&gt;This is a question I often see on &lt;a href="https://www.quora.com/profile/Alexander-Todorov"&gt;Quora&lt;/a&gt;.
&lt;em&gt;I have a job interview tomorrow. How do I test a login form (or whatever) ?&lt;/em&gt;&lt;/p&gt;
&lt;p&gt;If this section is what you're after I suspect you are a junior or wanna-be
software tester. As you've seen the interviewer isn't really interested in what you know already,
at least not as much. We're interested in getting to know how you
think in the course of 30-60 minutes.&lt;/p&gt;
&lt;p&gt;If you ever find yourself being asked a similar question just start thinking and
answering and don't stop. Vocalize your thoughts, even if you don't know what will
happen when testing a certain condition. Then keep going on and on. Look at the problem
from all angles, explain how you'd test various aspects and features of the SUT.
Then move on to the next bit. Always think about what you may have forgotten and
revisit your answers - this is what real QAs do - learn from mistakes.
Ask questions, don't ever assume anything. If something is unclear ask to be
clarified. For example I've seen a person who doesn't use social networks and
didn't know how social login/registration worked. They did good by asking me to
describe how that works.&lt;/p&gt;
&lt;p&gt;Your goal is to make the interviewer ask you to stop answering. Then tell them
a few more answers.&lt;/p&gt;
&lt;p&gt;However beware of cheating. You may cheat a little bit by
saying you will test this and that or design scenarios you have no clue about.
Maybe you read them in my blog or elsewhere. If the interviewer knows their job
(which they should) they will instantly ask you another question to verify what
you say. Don't forget the interviewer is probably an experienced tester and validating
assumptions is what they do every day.&lt;/p&gt;
&lt;p&gt;For example, if you told me something about security testing or SQL injection
or XSS I will ask you to explain that in more details. If you forgot to mention,
one of them, say XSS but only heard about SQL injection I will ask you about the
other one. This will immediately tell me if you have a clue what you are talking
about.&lt;/p&gt;
&lt;p&gt;Feel free to send me suggestions and answers in the comments below. You can find
the second part of this post at
&lt;a href="http://atodorov.org/blog/2016/04/16/how-to-hire-software-testers-pt-2/"&gt;How do you test a Sudoku solving function&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;Thanks for reading and happy testing!&lt;/p&gt;</summary><category term="QA"></category><category term="fedora.planet"></category></entry><entry><title>Beware of Double Stubs in RSpec</title><link href="http://atodorov.org/blog/2016/03/31/beware-of-double-stubs-in-rspec/" rel="alternate"></link><updated>2016-03-31T12:08:00+03:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-03-31:blog/2016/03/31/beware-of-double-stubs-in-rspec/</id><summary type="html">&lt;p&gt;I've been re-factoring some RSpec tests and encountered a method which has been
stubbed-out 2 times in a row. This of course led to problems when I tried to delete
some of the code, which I deemed unnecessary. Using
&lt;a href="http://blog.teamtreehouse.com/an-introduction-to-rspec"&gt;Treehouse's burger example&lt;/a&gt;
I've recreated my use-case. Comments are in the code below:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;span class="filename"&gt;burger_spec.rb&lt;/span&gt;&lt;pre&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Burger&lt;/span&gt;
  &lt;span class="kp"&gt;attr_reader&lt;/span&gt; &lt;span class="ss"&gt;:options&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;initialize&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="p"&gt;{})&lt;/span&gt;
    &lt;span class="vi"&gt;@options&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;options&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;apply_ketchup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;number&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="vi"&gt;@ketchup&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="vi"&gt;@options&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:ketchup&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;
    &lt;span class="c1"&gt;# the number is passed from the tests below to make it easier to&lt;/span&gt;
    &lt;span class="c1"&gt;# monitor execution of this method.&lt;/span&gt;
    &lt;span class="nb"&gt;printf&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;Ketchup applied %d times&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;number&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;apply_mayo_and_ketchup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;number&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="vi"&gt;@options&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:mayo&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;
    &lt;span class="n"&gt;apply_ketchup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;number&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;

  &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;has_ketchup_on_it?&lt;/span&gt;
    &lt;span class="vi"&gt;@ketchup&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;

&lt;span class="n"&gt;describe&lt;/span&gt; &lt;span class="no"&gt;Burger&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
  &lt;span class="n"&gt;describe&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;#apply_mayo_and_ketchup&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
    &lt;span class="n"&gt;context&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;with ketchup and single stubs&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
      &lt;span class="n"&gt;let&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:burger&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="no"&gt;Burger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:ketchup&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;

      &lt;span class="n"&gt;it&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;1: sets the mayo flag to true, ketchup is nil&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
        &lt;span class="c1"&gt;# this line stubs-out the apply_ketchup method&lt;/span&gt;
        &lt;span class="c1"&gt;# and @ketchup will remain nil b/c the original&lt;/span&gt;
        &lt;span class="c1"&gt;# method is not executed at all&lt;/span&gt;
        &lt;span class="n"&gt;expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;receive&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:apply_ketchup&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;apply_mayo_and_ketchup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="n"&gt;expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:mayo&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;has_ketchup_on_it?&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kp"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt;

      &lt;span class="n"&gt;it&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;2: sets the mayo and ketchup flags to true&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
        &lt;span class="c1"&gt;# this line stubs-out the apply_ketchup method&lt;/span&gt;
        &lt;span class="c1"&gt;# but in the end calls the non-stubbed out version as well&lt;/span&gt;
        &lt;span class="c1"&gt;# so that has_ketchup_on_it? will return true !&lt;/span&gt;
        &lt;span class="n"&gt;expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;receive&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:apply_ketchup&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;and_call_original&lt;/span&gt;
        &lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;apply_mayo_and_ketchup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="n"&gt;expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:mayo&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;has_ketchup_on_it?&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;

    &lt;span class="n"&gt;context&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;with ketchup and double stubs&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
      &lt;span class="n"&gt;let&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:burger&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt; &lt;span class="no"&gt;Burger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;new&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:ketchup&lt;/span&gt; &lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="p"&gt;}&lt;/span&gt;
      &lt;span class="n"&gt;before&lt;/span&gt; &lt;span class="p"&gt;{&lt;/span&gt;
        &lt;span class="c1"&gt;# this line creates a stub for the apply_ketchup method&lt;/span&gt;
        &lt;span class="n"&gt;allow&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;receive&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:apply_ketchup&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="p"&gt;}&lt;/span&gt;

      &lt;span class="n"&gt;it&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;3: sets the mayo flag to true, ketchup is nil&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
        &lt;span class="c1"&gt;# this line creates a second stub for the fake apply_ketchup method&lt;/span&gt;
        &lt;span class="c1"&gt;# @ketchup will remain nil b/c the original method which sets its value&lt;/span&gt;
        &lt;span class="c1"&gt;# isn&amp;#39;t actually executed. we may as well comment out this line and&lt;/span&gt;
        &lt;span class="c1"&gt;# this will not affect the test at all&lt;/span&gt;
        &lt;span class="n"&gt;expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;receive&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:apply_ketchup&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;apply_mayo_and_ketchup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;3&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="n"&gt;expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:mayo&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;has_ketchup_on_it?&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;be&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kp"&gt;nil&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt;

      &lt;span class="n"&gt;it&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;4: sets the mayo and ketchup flags to true&amp;quot;&lt;/span&gt; &lt;span class="k"&gt;do&lt;/span&gt;
        &lt;span class="c1"&gt;# this line creates a second stub for the fake apply_ketchup method.&lt;/span&gt;
        &lt;span class="c1"&gt;# .and_call_original will traverse up the stubs and call the original&lt;/span&gt;
        &lt;span class="c1"&gt;# method. If we don&amp;#39;t want to assert that the method has been called&lt;/span&gt;
        &lt;span class="c1"&gt;# or we don&amp;#39;t care about its parameters, but only the end result&lt;/span&gt;
        &lt;span class="c1"&gt;# that system state has been changed then this line is redundant!&lt;/span&gt;
        &lt;span class="c1"&gt;# Don&amp;#39;t stub &amp;amp; call the original, just call the original method, right?&lt;/span&gt;
        &lt;span class="c1"&gt;# Commenting out this line will cause a failure due to the first stub&lt;/span&gt;
        &lt;span class="c1"&gt;# in before() above. The first stub will execute and @ketchup will remain&lt;/span&gt;
        &lt;span class="c1"&gt;# nil! To set things straight also comment out the allow() line in&lt;/span&gt;
        &lt;span class="c1"&gt;# before()!&lt;/span&gt;
        &lt;span class="n"&gt;expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;receive&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="ss"&gt;:apply_ketchup&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;and_call_original&lt;/span&gt;
        &lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;apply_mayo_and_ketchup&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;4&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="n"&gt;expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;options&lt;/span&gt;&lt;span class="o"&gt;[&lt;/span&gt;&lt;span class="ss"&gt;:mayo&lt;/span&gt;&lt;span class="o"&gt;]&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="n"&gt;expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;burger&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;has_ketchup_on_it?&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to&lt;/span&gt; &lt;span class="n"&gt;eq&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="kp"&gt;true&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
      &lt;span class="k"&gt;end&lt;/span&gt;
    &lt;span class="k"&gt;end&lt;/span&gt;
  &lt;span class="k"&gt;end&lt;/span&gt;
&lt;span class="k"&gt;end&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;When I see a &lt;code&gt;.and_call_original&lt;/code&gt; method
after a stub I immediately delete it because in most of the cases this isn't
necessary. Why stub out something just to call it again later ? See my comments
above. Also the &lt;code&gt;expect to receive &amp;amp;&amp;amp; do action&lt;/code&gt;
sequence is a bit counter intuitive. I prefer the &lt;code&gt;do action &amp;amp; assert results&lt;/code&gt;
sequence instead.&lt;/p&gt;
&lt;p&gt;The problem here comes from the fact that RSpec has very flexible syntax for
creating stubs which makes it very easy to abuse them, especially when you
have no idea what you're doing. If you write tests with RSpec please make a
note of this and try to avoid this mistake.&lt;/p&gt;
&lt;p&gt;If you'd like to learn more about stubs see
&lt;a href="http://atodorov.org/blog/2015/11/23/bad-stub-design-in-dnf/"&gt;Bad Stub Design in DNF&lt;/a&gt;.&lt;/p&gt;</summary><category term="fedora.planet"></category><category term="Ruby"></category><category term="QA"></category></entry><entry><title>Hello World QA Challenge</title><link href="http://atodorov.org/blog/2016/03/25/hello-world-qa-challenge/" rel="alternate"></link><updated>2016-03-25T11:08:00+02:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-03-25:blog/2016/03/25/hello-world-qa-challenge/</id><summary type="html">&lt;p&gt;Recently I've been asked on Quora
"Do simple programs like hello world have any bugs" ? In particular if the
computer hardware and OS are healthy, will there be any bugs in a simple
hello-world program?&lt;/p&gt;
&lt;p&gt;I'm challenging you to tell me what
kinds of bugs have you seen which would easily apply to a very simple program!
Below are some I was able to think about.&lt;/p&gt;
&lt;h2&gt;Localization&lt;/h2&gt;
&lt;p&gt;Once we add a requirement to our system to work in environment which supports
multiple languages and input methods, not supporting them immediately becomes a bug,
although the SUT still functions correctly. For example, if using a French locale
I would expect the program to print "Bonjour le monde". Same for German, Spanish,
Italian, etc. It even becomes trickier with languages using non-latin script like
Bulgarian and Japanese for example. Depending on your environment you may not be
able to display non-latin script at all.
See also
&lt;a href="http://atodorov.org/blog/2014/03/17/how-do-you-test-thai-scalable-fonts/"&gt;How do you test fonts&lt;/a&gt;!&lt;/p&gt;
&lt;h2&gt;Packaging and distribution&lt;/h2&gt;
&lt;p&gt;This is an entire class of problems not directly related to the SUT but to the way
it is packaged and distributed to its target customers. For a Linux system it makes
sense to have an RPM or DEB packages. Dependency resolution and proper installation
and upgrade for these packages need to be tested and ensured.&lt;/p&gt;
&lt;p&gt;A famous example of a high impact packaging bug is
&lt;a href="https://code.djangoproject.com/ticket/19858"&gt;Django #19858&lt;/a&gt;. During an urgent
security release it was discovered that the source package was shipping byte-compiled
&lt;code&gt;*.pyc&lt;/code&gt; files made with a newer version of Python (2.7). Even worse there were
byte-compiled files without the corresponding source files.&lt;/p&gt;
&lt;p&gt;Being a security release everyone
rushed to upgrade immediately. Everyone who had Python 2.6 saw their website
produce &lt;code&gt;ImportError: Bad magic number&lt;/code&gt; and crash immediately after the upgrade!&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; byte-compiled files between different versions of Python are
incompatible!&lt;/p&gt;
&lt;p&gt;Another one is
&lt;a href="https://github.com/tschellenbach/Django-facebook/issues/262"&gt;django-facebook #262&lt;/a&gt;
in which version 4.3.0 suddenly grew from 200KiB to 23MiB in size, shipping a ton
of extra JPEG images.&lt;/p&gt;
&lt;h2&gt;Portability&lt;/h2&gt;
&lt;p&gt;There are so many different portability issues which may affect an otherwise
working program. You only need to add a requirement to build/execute on another
OS or CPU architecture - for example aarch64 (64-bit ARM).
This resulted in hundreds of bugs
reported by Dennis Gilmore, for example &lt;a href="https://bugzilla.redhat.com/show_bug.cgi?id=926850"&gt;RHBZ#926850&lt;/a&gt; which is also related to
packaging and the build chain.&lt;/p&gt;
&lt;p&gt;Then we have possibility for big endian vs. little endian issues especially if
we run on Power 8 CPU which supports both modes.&lt;/p&gt;
&lt;p&gt;Another one could be 16bit vs. 32bit vs 64bit memory addressing. For example
on platforms like IBM mainframe (s390) they reserved the most significant bit
to easily support applications expecting 24-bit addressing, as well as to
sidestep a problem with extending two instructions to handle 32-bit unsigned
addresses, which made the address space 31-bits!&lt;/p&gt;
&lt;h2&gt;Performance&lt;/h2&gt;
&lt;p&gt;Not all processors are created equal! Both Intel (x86_64), ARM and PowerPC
have different instruction sets and numbers of registers. Depending on what
sort of calculations you perform one of the architectures may be more suitable
than the other.&lt;/p&gt;
&lt;h2&gt;Typos&lt;/h2&gt;
&lt;p&gt;It not uncommon to mistype even common words like
"hello" and "world" and I've rarely seen QAs and developers running spell
checkers on all of their source strings. We do this for documentation and
occasionally for man pages but for the actual program output or widget labels -
almost never.&lt;/p&gt;
&lt;h2&gt;Challenge&lt;/h2&gt;
&lt;p&gt;I find the original question very interesting and a good metal exercise for
IT professionals. I will be going through Bugzilla
to find examples which illustrate the above points and even more possible problems
with a program as simple as hello world and will update this blog accordingly!&lt;/p&gt;
&lt;p&gt;Tell me what kinds of bugs have you seen which would easily apply to a very simple program!
It's best if you can post links to public bugs and/or detailed explanation.
Thanks!&lt;/p&gt;</summary><category term="fedora.planet"></category><category term="QA"></category></entry><entry><title>QA Switch from Waterfall to BDD</title><link href="http://atodorov.org/blog/2016/03/11/qa-switch-from-waterfall-to-bdd/" rel="alternate"></link><updated>2016-03-11T11:08:00+02:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-03-11:blog/2016/03/11/qa-switch-from-waterfall-to-bdd/</id><summary type="html">&lt;p&gt;For the last two weeks I've been experimenting with Behavior-Driven Development
(BDD) in order to find out what it takes for the Quality Assurance department
to switch from using the Waterfall method to BDD. Here are my initial
observations and thoughts for further investigation.&lt;/p&gt;
&lt;h2&gt;Background&lt;/h2&gt;
&lt;p&gt;Developing an entire Linux distribution (or any large product for that matter)
is a very complicated task. Traditionally QA has been involved in writing the
test plans for the proposed technology updates, then execute and maintain them
during the entire product life-cycle reporting and verifying tons of bugs
along the way. From the point of view of the entire product the process is
very close to the traditional waterfall development method. I will be using
the term waterfall to describe the old way of doing things and BDD the new one.
In particular I'm referring to the process of analyzing the proposed feature set
for the next major version of the product (e.g. Fedora) and designing the
necessary test plans documents and test cases.&lt;/p&gt;
&lt;p&gt;To get an idea about where does QA join the process see the
&lt;a href="https://fedoraproject.org/wiki/Releases/24/ChangeSet"&gt;Fedora 24 Change set&lt;/a&gt;.
When the planning phase starts we are given these "feature pages" from which
QA needs to distill test plans and test cases. The challenges with the
waterfall model are that QA joins the planning process rather late and there
is not enough time to iron out all the necessary details. Add to this the fact
that feature pages are often incomplete and vaguely described and sometimes
looking for the right answers is the hardest part of the job.&lt;/p&gt;
&lt;h2&gt;QA and BDD&lt;/h2&gt;
&lt;p&gt;Right now I'm focusing on using the
&lt;a href="https://github.com/cucumber/cucumber/wiki/Gherkin"&gt;Gherkin&lt;/a&gt;
&lt;em&gt;Given-When-Then&lt;/em&gt; language to
prepare feature descriptions and test scenarios from the above feature pages.
You can follow my work on &lt;a href="https://github.com/atodorov/bdd/"&gt;GitHub&lt;/a&gt; and
I will be using them as examples below. Also see examples from my
co-workers &lt;a href="https://github.com/tlamer/bdd"&gt;1&lt;/a&gt;,
&lt;a href="https://github.com/hroncok/BDD"&gt;2&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;With this experiment I want to verify how hard/easy it is for QA to write
test cases using BDD style documents and how is that different from the
traditional method. Since I don't have any experience (nor bias) towards BDD
I'm documenting my notes and items of interest.&lt;/p&gt;
&lt;h2&gt;Getting Started&lt;/h2&gt;
&lt;p&gt;It took me about 2 hours to get started. The essence of Gherkin is the
&lt;em&gt;Action &amp;amp; Response&lt;/em&gt; mechanism. &lt;strong&gt;Given&lt;/strong&gt; the system under test (SUT) is in a
known state and &lt;strong&gt;when&lt;/strong&gt; an action is taken &lt;strong&gt;then&lt;/strong&gt; we expect something
to happen in response to the action. This syntax made me think from the
point of view of the user. This way it was very easy to identify different
user roles and actions which will be attempted with the SUT. This also made
my test scenarios more explicit compared to what is described in the wiki pages.
IMO being explicit when designing tests is a good thing. I like it that way.&lt;/p&gt;
&lt;p&gt;OTOH the same explicitness can be achieved with the waterfall method as well.
The trouble is that this is often overlooked because
we're not in the mindset to analyze the various user roles and scenarios.
When writing test cases with waterfall the mindset is more focused on the
technical features, e.g. how the SUT exactly works and we end up missing
important interactions between the user and the system. At least I can recall
a few times that I've made that mistake.&lt;/p&gt;
&lt;p&gt;Tagging the scenarios is a good way of indicating
which scenario covers which roles. Depending on the tools you use it should
be possible to execute test scenarios for different roles (tags). In waterfall
we need to have a separate test plan for each user role, possibly duplicating
some of the test cases across test plans. A bit redundant
but more importantly easier to forget the bigger picture.&lt;/p&gt;
&lt;h2&gt;Big, Small &amp;amp; Undefined&lt;/h2&gt;
&lt;p&gt;BDD originates from TDD which in turn relies heavily on unit testing and
automation. This makes it very easy to use BDD 
test development (and even automate)
for self contained changes, especially ones which affect
only a single component (e.g. a single program). From the Fedora 24 changes
such are for example the systemd and system-python split.&lt;/p&gt;
&lt;p&gt;I happen to work in a team where we deal with large changes, which affect
multiple components and infrastructure. Both the
&lt;a href="https://fedoraproject.org/wiki/Releases/24/ChangeSet#Pungi_Refactor"&gt;Pungi Refactor&lt;/a&gt;
and
&lt;a href="https://fedoraproject.org/wiki/Releases/24/ChangeSet#Layered_Docker_Image_Build_Service"&gt;Layered Docker Image Build Service&lt;/a&gt;
for which I've written BDD style test scenarios are of this nature. This leads
to the following issues:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;QA doesn't always have the entire infrastructure stack in a
staging environment for testing so we need to test on the live infra;&lt;/li&gt;
&lt;li&gt;QA doesn't always have the necessary access permissions to execute
the tests and in some cases never will. For example it is very unlikely
that QA will be able to build a test release and push that for syncing
to the mirrors infrastructure to verify that there are no files left behind;&lt;/li&gt;
&lt;li&gt;Not being able to test independently means QA has to wait for something to happen
then verify the results (e.g. rel-eng builds new Docker images and pushes
them live). When something breaks this testing is often too late.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Complex changes are often not described into detail. As they affect multiple
infrastructure layers and components sometimes it is not known what the required
changes need to be. That's why we implement them in stages and have contingency
plans. However this makes it harder for QA to write the tests. 
Btw this is the same regardless of which development method is used.
The good thing is that by forcing you to think from the POV of the user and
in terms of action &amp;amp; response BDD helps identify these missing bits faster.&lt;/p&gt;
&lt;p&gt;For example, with Pungi (Fedora distro build tool),
the feature pages says that the produced directory
structure will be different from previous releases but it doesn't say what
is going to be different so we can't really test that. I know from
experience that this may break tools which rely on this structure like
virt-manager and anaconda and have added simple sanity tests for them.&lt;/p&gt;
&lt;p&gt;In the Docker feature page we have functional requirement for automatic
image rebuilds if one of the underlying components (e.g. RPM package) changes.
This is not described in details and so is the test scenario. I can easily
write a separate BDD feature document for this functionality alone.&lt;/p&gt;
&lt;p&gt;With the waterfall model when a feature isn't well defined QA often waits
for the devel team to implement the basic features and then writes test cases
based on the existing behavior. This is only good for regression testing
the next version but it can't show you something that is missing because
we're never going to look for it. BDD makes it easier to spot when we need
better definitions of scope and roles, even better functional requirements.&lt;/p&gt;
&lt;h2&gt;Automation and Integration&lt;/h2&gt;
&lt;p&gt;Having a small SUT is nice. For example we can easily write a
test script to install, upgrade and query RPM packages and verify the
systemd package split. We can easily prepare a test system and execute
the scripts to verify the expected results.&lt;/p&gt;
&lt;p&gt;OTOH complex features are hard to integrate with BDD automation tools.
For the Docker Image Build Service the straight forward script would
be to start building a new image, then change an underlying component
and see if it gets rebuilt, then ensure all the content comes from
the existing RPM repos, then push the image to the Docker registry
and verify it can be used by the user, etc, etc. 
All of these steps take a non-trivial amount of time. Sometimes hours.
You can also execute them in parallel to save time but how do you sync
back the results ?&lt;/p&gt;
&lt;p&gt;My preference for the moment is to kick-off individual
test suites for a particular BDD scenario and then aggregate the results back.
This also has a side benefit - for complex changes we can have layered
BDD feature documents, each one referencing another feature document.
Repeat this over and over until we get down to purely technical scenarios
which can be tested easily. Once the result are in go back the chain
and fill-in the rest. This way we can traverse all testing activities
from the unit testing level up to the infrastructure level.&lt;/p&gt;
&lt;p&gt;I actually like the back &amp;amp; forth traversing idea very much. I've always
wanted to know how does each individual testing effort relate to the
general product development strategy and in which areas the product is
doing well or not. You can construct the same chain of events with waterfall
as well. IMO BDD just makes it a bit more easier to think about it.&lt;/p&gt;
&lt;p&gt;Another problem I faced is how do I mark the scenarios as out of scope
for the current release ? I can tag them or split them into separate files
or maybe something else? I don't know which one is the best practice. In
waterfall I'll just disable the test cases or move them into a separate
test plan.&lt;/p&gt;
&lt;h2&gt;TODO&lt;/h2&gt;
&lt;p&gt;I will be writing more BDD test definitions in the upcoming 2 weeks to get
more experience with them. I still don't have a clear idea how to approach
BDD test writing when given a particular feature to work on. So far I've
used the functional requirements and items of concern (when present), in the
feature pages, as a starting point for my BDD test scenarios.&lt;/p&gt;
&lt;p&gt;I also want to get more feedback from the development teams and product
management folks.&lt;/p&gt;
&lt;h2&gt;Summary&lt;/h2&gt;
&lt;p&gt;BDD style test writing puts the tester into a mind set where it is easier
to see the big picture by visualizing different user roles and scenarios.
It makes it easier to define explicit test cases and highlights missing
details. It is easier for QA to join early in the planning process by
defining roles and thinking about all the possible interactions with the SUT.
This is the biggest benefit for me!&lt;/p&gt;
&lt;p&gt;Self-contained changes are easier to describe and test automatically.&lt;/p&gt;
&lt;p&gt;Bigger and complex features are harder to describe and even harder to
automate in one piece. Divide and conqueror is our best friend here!&lt;/p&gt;</summary><category term="fedora.planet"></category><category term="QA"></category></entry><entry><title>Floating-point precision error with Ruby</title><link href="http://atodorov.org/blog/2016/03/08/floating-point-precision-error-with-ruby/" rel="alternate"></link><updated>2016-03-08T11:08:00+02:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-03-08:blog/2016/03/08/floating-point-precision-error-with-ruby/</id><summary type="html">&lt;p&gt;One of my tests was faiing and it turned out this was caused by a
floating-point precision error. The functionality in question was a "Load more"
button with pagination which loads records from the database and the front-end displays them.&lt;/p&gt;
&lt;p&gt;Ruby and JavaScript were passing around a parameter
which was only used as part of the SQL queries.
Now the problem is that JavaScript doesn't have a &lt;code&gt;Time&lt;/code&gt; class and the parameter
was passed as string, then converted back to &lt;code&gt;Time&lt;/code&gt; in Ruby. The problem
comes from the intermediate conversion to &lt;code&gt;float&lt;/code&gt; which was used.&lt;/p&gt;
&lt;p&gt;Here's a little code snippet to demonstrate the problem:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;irb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="mo"&gt;06&lt;/span&gt;&lt;span class="mi"&gt;8&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;now&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="no"&gt;Time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;
&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;2016&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mo"&gt;03&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;08&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;54&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;26&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="mo"&gt;0200&lt;/span&gt;
&lt;span class="n"&gt;irb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="mo"&gt;06&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; 
&lt;span class="n"&gt;irb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="mo"&gt;070&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="no"&gt;Time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;now&lt;/span&gt;
&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;
&lt;span class="n"&gt;irb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="mo"&gt;071&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; 
&lt;span class="n"&gt;irb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="mo"&gt;072&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="no"&gt;Time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to_f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;now&lt;/span&gt;
&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kp"&gt;false&lt;/span&gt;
&lt;span class="n"&gt;irb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="mo"&gt;073&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; 
&lt;span class="n"&gt;irb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="mo"&gt;074&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to_f&lt;/span&gt;
&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;1457427266&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="mi"&gt;7206197&lt;/span&gt;
&lt;span class="n"&gt;irb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="mo"&gt;075&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; 
&lt;span class="n"&gt;irb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="mo"&gt;076&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strftime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;%Y-%m-%d %H:%M:%S.%9N&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;2016-03-08 10:54:26.720619705&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;irb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="mo"&gt;077&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; 
&lt;span class="n"&gt;irb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="mo"&gt;07&lt;/span&gt;&lt;span class="mi"&gt;9&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;*&lt;/span&gt; &lt;span class="no"&gt;Time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;at&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;to_f&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strftime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;%Y-%m-%d %H:%M:%S.%9N&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;2016-03-08 10:54:26.720619678&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;irb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="mi"&gt;080&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;As you can see the conversion to float and back to Time is off by a few
nano-seconds and the database either didn't return any records or was
returning the same set of records.
This isn't something you can usually see in production, right ? Unless you
have huge traffic and happen to have records created exactly at the same moment.&lt;/p&gt;
&lt;p&gt;The solution is to simply send &lt;code&gt;Time.now.strftime&lt;/code&gt; to the JavaScript and then
use &lt;code&gt;Time.parse&lt;/code&gt; to reconstruct the value.&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="n"&gt;irb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="mo"&gt;077&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; 
&lt;span class="n"&gt;irb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="mo"&gt;001&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="nb"&gt;require&lt;/span&gt; &lt;span class="s1"&gt;&amp;#39;time&amp;#39;&lt;/span&gt;
&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="kp"&gt;true&lt;/span&gt;
&lt;span class="n"&gt;irb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="mo"&gt;002&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="no"&gt;Time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;parse&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;now&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strftime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;%Y-%m-%d %H:%M:%S.%9N&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strftime&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s1"&gt;&amp;#39;%Y-%m-%d %H:%M:%S.%9N&amp;#39;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="o"&gt;=&amp;gt;&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;2016-03-08 10:54:26.720619705&amp;quot;&lt;/span&gt;
&lt;span class="n"&gt;irb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;main&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;&lt;span class="mo"&gt;003&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="o"&gt;&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;If you'd like to read more about floating point arithmetics please see
&lt;a href="http://floating-point-gui.de"&gt;http://floating-point-gui.de&lt;/a&gt;.&lt;/p&gt;</summary><category term="fedora.planet"></category><category term="Ruby"></category><category term="QA"></category></entry><entry><title>Puppet for Complete Beginners</title><link href="http://atodorov.org/blog/2016/03/01/puppet-for-complete-beginners/" rel="alternate"></link><updated>2016-03-01T15:08:00+02:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-03-01:blog/2016/03/01/puppet-for-complete-beginners/</id><summary type="html">&lt;p&gt;I guess everyone knows what &lt;a href="https://puppetlabs.com/"&gt;Puppet&lt;/a&gt; is but probably not
everyone knows how to write Puppet modules. This article outlines what I've
learned while adding a new module to an existing Puppet configuration without
having any previous knowledge beforehand and not reading the official
documentation (which I should have done).&lt;/p&gt;
&lt;h2&gt;Existing setup&lt;/h2&gt;
&lt;p&gt;The existing setup is a single git repository, which holds all of the Puppet
configuration for all hosts and environments. The main directory inside the
repo is &lt;code&gt;puppet/modules&lt;/code&gt;. I wanted to add a few Python scripts which automate
tasks inside &lt;a href="https://www.jetbrains.com/youtrack/"&gt;YouTrack&lt;/a&gt;.&lt;/p&gt;
&lt;h2&gt;What to do next&lt;/h2&gt;
&lt;p&gt;First step in understanding Puppet was to figure out what do I need to do ?&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Have my scripts inside the repository;&lt;/li&gt;
&lt;li&gt;Provide configuration file for credentials;&lt;/li&gt;
&lt;li&gt;Configure cron jobs;&lt;/li&gt;
&lt;li&gt;Install all of this on one of the existing systems.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;My directory layout looks like this&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;./puppet/modules/youtrack/
                        ./files/archive
                        ./manifests/init.pp
                        ./templates/youtrack.conf.erb
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;files/&lt;/code&gt; is where all the scripts go. They can be accessed from here later on.
&lt;code&gt;manifests/init.pp&lt;/code&gt; is the definition of this module - what gets installed where
and so on. &lt;code&gt;templates/&lt;/code&gt; is where templates go. These are usually config files
which use a placeholder for their values.&lt;/p&gt;
&lt;p&gt;My &lt;code&gt;files/archive&lt;/code&gt; is a simple executable Python script, which queries YouTrack
for old issues and archives them. It looks for a &lt;code&gt;youtrack.conf&lt;/code&gt; file at a
pre-defined location (the location on the host system) or at environment variables
for testing purposes.&lt;/p&gt;
&lt;p&gt;&lt;code&gt;templates/youtrack.conf.erb&lt;/code&gt; looks like this&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;[main]&lt;/span&gt;
&lt;span class="na"&gt;url&lt;/span&gt;  &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;lt;%= scope.lookupvar(&amp;#39;common::vars::youtrack_url&amp;#39;) %&amp;gt;&lt;/span&gt;
&lt;span class="na"&gt;user&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;lt;%= scope.lookupvar(&amp;#39;common::vars::youtrack_user&amp;#39;) %&amp;gt;&lt;/span&gt;
&lt;span class="na"&gt;pass&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="s"&gt;&amp;lt;%= scope.lookupvar(&amp;#39;common::vars::youtrack_pass&amp;#39;) %&amp;gt;&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;code&gt;manifests/init.pp&lt;/code&gt; looks like this&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;class youtrack {
  &lt;span class="nv"&gt;$youtrack_files&lt;/span&gt; =
    &amp;#39;/opt/devops/puppet/modules/youtrack/files&amp;#39;

  file { &amp;#39;/opt/youtrack.conf&amp;#39;:
    content =&amp;gt; template(&amp;#39;youtrack/youtrack.conf.erb&amp;#39;),
  }

  cron { &amp;#39;Archive issues older than 2 weeks&amp;#39;:
    ensure      =&amp;gt; present,
    command     =&amp;gt; &amp;quot;cd &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;youtrack_files&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt; &lt;span class="err"&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class="cp"&gt;${&lt;/span&gt;&lt;span class="n"&gt;youtrack_files&lt;/span&gt;&lt;span class="cp"&gt;}&lt;/span&gt;/archive&amp;quot;,
    environment =&amp;gt; [ &amp;#39;MAILTO=devops@example.com&amp;#39; ],
    user        =&amp;gt; &amp;#39;root&amp;#39;,
    minute      =&amp;gt; 0,
    hour        =&amp;gt; 8,
  }
}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Once Puppet applies this configuration on the host system it will&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Install the configuration template under &lt;code&gt;/opt/youtrack.conf&lt;/code&gt;
replacing the placeholder variables with actual values. Notice the
argument to &lt;code&gt;template()&lt;/code&gt; - it's of the form module_name/file_name;&lt;/li&gt;
&lt;li&gt;Add a cron job entry for my Python script.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; The host system is the Puppet master so I don't really need to
install my Python scripts into another location. I could if I wanted to but
this isn't necessary. Cron is executing the script from inside the git
checkout.&lt;/p&gt;
&lt;h2&gt;Bundle it all together&lt;/h2&gt;
&lt;p&gt;Our module is done. Now we need to instruct Puppet that we want to use it.
I have a &lt;code&gt;puppet/modules/role/manifests/pmaster.pp&lt;/code&gt; which defines what modules
get used on the Puppet master machine. &lt;code&gt;pmaster&lt;/code&gt; matches the hostname of the
system (that's how it's been configured to work). The module looks like this&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="n"&gt;role::pmaster&lt;/span&gt; {
  &lt;span class="n"&gt;include&lt;/span&gt; &lt;span class="n"&gt;youtrack&lt;/span&gt;

  ...
}
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;There is also a &lt;code&gt;puppet/modules/common/manifests/vars-static.pp&lt;/code&gt; file which
defines all the variables used in the templates. Simply add the necessary ones
at the bottom:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="x"&gt;@@ -197,4 +197,9 @@&lt;/span&gt;
&lt;span class="x"&gt;+&lt;/span&gt;
&lt;span class="x"&gt;+  &lt;/span&gt;&lt;span class="err"&gt;#&lt;/span&gt;&lt;span class="x"&gt; YouTrack automation&lt;/span&gt;
&lt;span class="x"&gt;+  &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;youtrack_url&lt;/span&gt;&lt;span class="x"&gt;  = &amp;#39;http://example.com&amp;#39;&lt;/span&gt;
&lt;span class="x"&gt;+  &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;youtrack_user&lt;/span&gt;&lt;span class="x"&gt; = &amp;#39;changeMe&amp;#39;&lt;/span&gt;
&lt;span class="x"&gt;+  &lt;/span&gt;&lt;span class="p"&gt;$&lt;/span&gt;&lt;span class="nv"&gt;youtrack_pass&lt;/span&gt;&lt;span class="x"&gt; = &amp;#39;changeMe&amp;#39;&lt;/span&gt;
&lt;span class="x"&gt;}&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;&lt;strong&gt;NOTE:&lt;/strong&gt; in reality this file is just a placeholder. The real values are not
stored in git but are configured manually on systems which need them. On the
Puppet master there are separate &lt;code&gt;XXX-vars.pp&lt;/code&gt; files for different environments
like devel, staging and production.&lt;/p&gt;</summary><category term="fedora.planet"></category></entry><entry><title>Ruby &amp; Time-based Testing</title><link href="http://atodorov.org/blog/2016/02/23/ruby-time-based-testing/" rel="alternate"></link><updated>2016-02-23T13:08:00+02:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-02-23:blog/2016/02/23/ruby-time-based-testing/</id><summary type="html">&lt;p&gt;Publishing this mostly for self reference.
Here are two blog posts on the topic of testing time
dependent code in Ruby applications:&lt;/p&gt;
&lt;p&gt;&lt;a href="http://metaskills.net/2012/08/07/synchronized-times-in-ruby-and-javascript-acceptance-tests-using-capybara-timecop-and-sinon-js/"&gt;Synchronized Times In Ruby &amp;amp; JavaScript Acceptance Tests Using Capybara, Timecop &amp;amp; Sinon.JS&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href="https://blog.pivotal.io/labs/labs/goodbye-timecop-hello-timehelpers"&gt;Move Over Timecop…Hello ActiveSupport::Testing::TimeHelpers&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;I haven't seen a module similar to timecop in Python, but frankly I've never needed one either.&lt;/p&gt;</summary><category term="fedora.planet"></category><category term="Ruby"></category><category term="QA"></category></entry><entry><title>Bulgaria Web Summit 2016 Report &amp; Videos</title><link href="http://atodorov.org/blog/2016/02/23/bulgaria-web-summit-2016-report-videos/" rel="alternate"></link><updated>2016-02-23T12:54:00+02:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-02-23:blog/2016/02/23/bulgaria-web-summit-2016-report-videos/</id><summary type="html">&lt;p&gt;&lt;img alt="Musala Room" src="/images/bws16_zoltan.jpg" title="Musala room" /&gt;&lt;/p&gt;
&lt;p&gt;Hello everyone, this year I've been moderator at
&lt;a href="http://bulgariawebsummit.com/"&gt;Bulgaria Web Summit&lt;/a&gt; again.
Here is a quick report of the even as seen from the room I was at.&lt;/p&gt;
&lt;p&gt;The morning sessions were dominated by database topics including
MariaDB, RocksDB and MammothDB. The MariaDB talk was particularly strong
while the rest were with average attendance.&lt;/p&gt;
&lt;p&gt;In the afternoon we switched to DevOps and Docker and the room exploded.
There were people sitting on the ground and standing around the walls. There
was not enough oxygen for everyone in the room.&lt;/p&gt;
&lt;p&gt;I have recorded all of the talks from this room. Most are in English.
You can watch them at
&lt;a href="https://www.youtube.com/watch?v=1f_4mRNVAX8&amp;amp;index=1&amp;amp;list=PLFjlI7p-h1hxBP3cIjEqePSeoBDHud5Db"&gt;my YouTube channel&lt;/a&gt;
and I hope to see you next year in Sofia.&lt;/p&gt;</summary><category term="events"></category><category term="fedora.planet"></category></entry><entry><title>FOSDEM 2016 Report</title><link href="http://atodorov.org/blog/2016/02/02/fosdem-2016-report/" rel="alternate"></link><updated>2016-02-02T22:54:00+02:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-02-02:blog/2016/02/02/fosdem-2016-report/</id><summary type="html">&lt;p&gt;Hello everyone, this year I've been to FOSDEM again. Here is a quick report
of what I did, saw and liked during the event.&lt;/p&gt;
&lt;h2&gt;Day 0 - Elixir &amp;amp; Erlang&lt;/h2&gt;
&lt;p&gt;Friday started with an unexpected shopping trip. The airline broke
my luggage and I had to buy a replacement. The irony is that just before taking off
I saw a guy with an
&lt;a rel="nofollow" href="http://www.amazon.com/gp/product/B006P65P1W/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=B006P65P1W&amp;linkCode=as2&amp;tag=atodorovorg-20&amp;linkId=4VNFFQEDPY5JXCLP"&gt;Osprey Meridian&lt;/a&gt;&lt;img src="http://ir-na.amazon-adsystem.com/e/ir?t=atodorovorg-20&amp;l=as2&amp;o=1&amp;a=B006P65P1W" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /&gt;
and thought how cool that was. The next day I was running around Brussels to
find the exact same model! I also searched to buy the book
&lt;a rel="nofollow" href="http://www.amazon.com/gp/product/0140238301/ref=as_li_tl?ie=UTF8&amp;camp=1789&amp;creative=390957&amp;creativeASIN=0140238301&amp;linkCode=as2&amp;tag=atodorovorg-20&amp;linkId=3I6DMH5CC6ZGNX5A"&gt;Teach Your Child How to Think&lt;/a&gt;&lt;img src="http://ir-na.amazon-adsystem.com/e/ir?t=atodorovorg-20&amp;l=as2&amp;o=1&amp;a=0140238301" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" /&gt;
by Edward De Bono but all 4 bookstores I checked were out of stock.&lt;/p&gt;
&lt;p&gt;With the luggage problem solved I headed to
&lt;a href="http://betacowork.com"&gt;BetaCowork&lt;/a&gt; for
&lt;a href="http://www.erlang-factory.com/brussels2016/"&gt;Brussels Erlang Factory Lite&lt;/a&gt;
where I learned a bit about Erlang and Elixir. I also managed to squeeze a meeting
with &lt;a href="http://www.betacowork.com/profile/122/gilbert-west/"&gt;Gilbert West&lt;/a&gt; talking about
open source bugs.&lt;/p&gt;
&lt;p&gt;I found particularly interesting the Elixir workshop and the talk
&lt;a href="http://www.erlang-factory.com/brussels2016/pieterjan-montens"&gt;Erlang In The Wild: A Governmental Web Application&lt;/a&gt;
by Pieterjan Montens. Later I've managed to get a hold of him and talk some more
about his experiences working for the government. As I figured out later we
are likely to have mutual friends.&lt;/p&gt;
&lt;p&gt;BetaCowork was hosting FOSDEM related events during the entire week.
There was a GNOME event and the Libre Office Italian team was there as well.
Next time definitely worth a longer visit.&lt;/p&gt;
&lt;p&gt;Friday night was reserved for a dinner with the Red Hat Eclipse team and
a fair amount of beer at Delirium afterwards where I've met my friend
&lt;a href="https://fedoraproject.org/wiki/User:Giannisk"&gt;Giannis Konstantinidis&lt;/a&gt;
and the new Fedora Ambassador for Albania -
&lt;a href="https://fedoraproject.org/wiki/User:Jonatoni"&gt;Jona Azizai&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;All-in-all pretty good Friday!&lt;/p&gt;
&lt;h2&gt;Day 1 - Testing and Automation&lt;/h2&gt;
&lt;p&gt;&lt;img alt="Testing and Automation" src="/images/fosdem/2014/testing_automation.jpg" title="Testing and Automation" /&gt;&lt;/p&gt;
&lt;p&gt;FOSDEM was hosting the
&lt;a href="https://fosdem.org/2016/schedule/track/testing_and_automation/"&gt;Testing and automation devroom&lt;/a&gt;
again. I've spent the entire Saturday there.&lt;/p&gt;
&lt;p&gt;Definitely the most interesting talk was
&lt;a href="https://fosdem.org/2016/schedule/event/closed_source_interop/"&gt;Testing interoperability with closed-source software through scriptable diplomacy&lt;/a&gt;
which introduced &lt;a href="http://frida.re"&gt;Frida&lt;/a&gt;. Frida is a testing tool which injects
a JavaScript VM into your process and you can write scripts driving the
application automatically. It was designed as means to control closed source
software but can definitely be used for open source apps as well.&lt;/p&gt;
&lt;p&gt;I've talked to both Karl and Ole about Frida and my use-case for
&lt;a href="http://atodorov.org/blog/2016/01/14/controlling-interactive-terminal-programs/"&gt;testing interactive terminal programs&lt;/a&gt;.
That should be easy to do with Frida - just hook into the read and write
functions and write some JavaScript or Python to run the test.
Later we talked about how exactly Frida attaches to the running process
and what external dependencies are needed if I'm to inject Frida
into the Fedora installation environment.&lt;/p&gt;
&lt;p&gt;In &lt;em&gt;Testing embedded systems&lt;/em&gt; Itamar Hassin talked about testing medical devices
and made a point about regulation, security and compliance. Basically you are not
allowed to ship non-application code on production system. However that code
is necessary instrumentation to allow external integration testing. I suspect most
developers and QA engineers will never have to deal with so strict
regulations but that is something to have in mind if you test software
in a heavily regulated industry.&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Testing complex software in CI&lt;/em&gt; was essentially a presentation about &lt;em&gt;cwrap&lt;/em&gt; which
I've seen at
&lt;a href="http://atodorov.org/blog/2014/02/03/fosdem-2014-report-day-2-testing-and-automation/"&gt;FOSDEM 2014&lt;/a&gt;.
It touched the topic from a slightly different angle though. Tests in any open source
project should have the following properties&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Be able to execute without the need of a complex environment;&lt;/li&gt;
&lt;li&gt;Enable full CI during code review (dependent on previous property);&lt;/li&gt;
&lt;li&gt;Be able to create complete integration tests.&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;The demo showed how you can execute Samba's test suite locally without
preparing a domain controller for example. This helps both devel and external
contributors. Now contrast this with how Red Hat QE will do the testing - 
they will create a bunch of virtual and bare metal machines, configure all
related services and then execute the same test scripts to verify that indeed
Samba works as expected.&lt;/p&gt;
&lt;p&gt;Btw I've been thinking what if I patch &lt;em&gt;cwrap&lt;/em&gt; to overwrite read and write ?
That will also make it possible to test interactive console programs,
wouldn't it?&lt;/p&gt;
&lt;p&gt;&lt;em&gt;Jenkins as Code&lt;/em&gt; by Marcin and Lukasz was a blast. I think there were
people standing alongside the walls. The guys shared their experience
with &lt;a href="https://github.com/jenkinsci/job-dsl-plugin"&gt;Jenkins Job DSL&lt;/a&gt;
plugin. The plugin is very flexible and powerful,
using Groovy as its programming language. The only drawback is that it is
sometimes too complex to use and requires a steep learning curve. Maybe
&lt;a href="http://docs.openstack.org/infra/jenkins-job-builder/"&gt;Jenkins Job Builder&lt;/a&gt;
is better suited if you don't need all that flexibility
and complexity. I've met both of them afterwards and talked a bit more
about open source bugs.&lt;/p&gt;
&lt;p&gt;At Saturday evening I've visited a panel discussion about
&lt;a href="https://www.eventbrite.com/e/startupbusaccelerate-the-impact-of-open-source-software-on-the-tech-industry-tickets-20869395925"&gt;the impact of open source on the tech industry&lt;/a&gt;
at &lt;a href="http://co-station.com"&gt;Co.Station&lt;/a&gt; organized by &lt;a href="http://europe.startupbus.com"&gt;The Startup Bus&lt;/a&gt;.
There was beer, pizza, entrepreneur networking and talking about startups
and open source. Do I need to say more? I will post a separate blog post
about the interesting start-ups I've found so stay tuned.&lt;/p&gt;
&lt;h2&gt;Day 2 - Ping-pong with BBC Open Source&lt;/h2&gt;
&lt;p&gt;&lt;img alt="ping-pong" src="/images/bbc_ping_pong.jpg" title="ping-pong" /&gt;&lt;/p&gt;
&lt;p&gt;Sunday was my lazy day. I've attended a few talks but nothing too interesting.
I've managed to go around the project stands, 
&lt;a href="https://fedorahosted.org/fedora-infrastructure/ticket/5085"&gt;filed a bug against FAS&lt;/a&gt;
and scored the highest ping-pong score for the day at the BBC Open Source stand.&lt;/p&gt;
&lt;p&gt;BBC has a long history of being involved with education in the UK and the
&lt;a href="https://www.microbit.co.uk"&gt;micro:bit&lt;/a&gt; is their latest project. I will love to
see this (or similar) delivered by the thousands here in Bulgaria so if you
think about sponsoring let me know.&lt;/p&gt;
&lt;p&gt;Accidentally I met
&lt;a href="https://fedoraproject.org/wiki/User:Msivak"&gt;Martin Sivak&lt;/a&gt; - a former
Anaconda developer whom I've worked with in the past. He is now at the
Virtualization Development team at Red Hat and we briefly talked about
the need for more oVirt testing. I have something in mind about this
which will be announced in the next 2 months so stay tuned.&lt;/p&gt;</summary><category term="events"></category><category term="fedora.planet"></category><category term="QA"></category></entry><entry><title>Using Multiple Software Collections</title><link href="http://atodorov.org/blog/2016/01/18/using-multiple-software-collections/" rel="alternate"></link><updated>2016-01-18T14:00:00+02:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-01-18:blog/2016/01/18/using-multiple-software-collections/</id><summary type="html">&lt;p&gt;&lt;a href="https://www.softwarecollections.org"&gt;Software Collections&lt;/a&gt; are never versions
of system wide packages used typically on Red Hat Enterprise Linux. They are
installed together with the system-wide versions and can be used to develop
applications without affecting the system tools.&lt;/p&gt;
&lt;p&gt;If you need to use a software collection then enable it like so:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;scl enable rh-ruby22 /bin/bash
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;You can enable a second (and third, etc) software collection by executing &lt;code&gt;scl&lt;/code&gt;
again:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;scl enable nodejs010 /bin/bash
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;After executing the above two commands I have:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span class="nv"&gt;$ &lt;/span&gt;which ruby
/opt/rh/rh-ruby22/root/usr/bin/ruby
&lt;span class="nv"&gt;$ &lt;/span&gt;which node
/opt/rh/nodejs010/root/usr/bin/node
&lt;/pre&gt;&lt;/div&gt;


&lt;p&gt;Now I can develop an application using Ruby 2.2 and Node.js 0.10.&lt;/p&gt;</summary><category term="fedora.planet"></category><category term="RHEL"></category><category term="tips"></category></entry><entry><title>Controlling Interactive Terminal Programs</title><link href="http://atodorov.org/blog/2016/01/14/controlling-interactive-terminal-programs/" rel="alternate"></link><updated>2016-01-14T16:03:00+02:00</updated><author><name>Alexander Todorov</name></author><id>tag:atodorov.org,2016-01-14:blog/2016/01/14/controlling-interactive-terminal-programs/</id><summary type="html">&lt;p&gt;Building on my previous experience about
&lt;a href="http://atodorov.org/blog/2015/12/25/capture-terminal-output-from-other-processes/"&gt;capturing terminal output from other processes&lt;/a&gt;
I wanted to create an automated test case for the initial-setup-text service
which would control &lt;code&gt;stdin&lt;/code&gt;. Something like
&lt;a href="https://fedorahosted.org/dogtail/"&gt;Dogtail&lt;/a&gt; but for text mode applications.&lt;/p&gt;
&lt;p&gt;What you have to do is attach &lt;code&gt;gdb&lt;/code&gt; to the process. Then you can &lt;code&gt;write&lt;/code&gt; to
any file descriptor that is already opened. &lt;strong&gt;WARNING:&lt;/strong&gt; writing directly to
stdin didn't quite work! Because (I assume) stdin is a tty the text was shown on
the console but the return character wasn't interpreted and the application wasn't
accepting the input string. What I had to do is replace the tty with a pipe and
it worked. However the input is not duplicated on the console this way!&lt;/p&gt;
&lt;p&gt;Another drawback is that I couldn't use &lt;code&gt;strace&lt;/code&gt; to log the output in combination
with &lt;code&gt;gdb&lt;/code&gt;. Once a process is under trace you can't trace it a second time! For this
simple test I was able to live with this by not inspecting the actual text printed
by initial-setup. Instead I'm validating the state of the system after setup is
complete. I've tried to &lt;code&gt;read&lt;/code&gt; from &lt;code&gt;stdout&lt;/code&gt; in gdb but that didn't work either.
If there's a way to make this happen I can convert this script to a mini-framework.&lt;/p&gt;
&lt;p&gt;Another unknown is interacting with &lt;code&gt;passwd&lt;/code&gt;. Probably for security reasons
it doesn't allow to mess around with its stdin but I didn't investigate deeper.&lt;/p&gt;
&lt;p&gt;I've used the
&lt;a href="https://github.com/ticpu/tools/blob/master/fdmanage.py"&gt;fdmanage.py&lt;/a&gt;
script which does most of the work for me. I've removed the extra bits
that I didn't need, added the &lt;code&gt;write()&lt;/code&gt; method and removed the original call to
&lt;code&gt;fcntl&lt;/code&gt; which puts gdb.stdout into non-blocking mode (that didn't work for me).&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;span class="filename"&gt;initial_setup_driver.py&lt;/span&gt;&lt;pre&gt;&lt;span class="c"&gt;#!/usr/bin/env python&lt;/span&gt;
&lt;span class="c"&gt;# -*- coding: utf-8 -*-&lt;/span&gt;
&lt;span class="c"&gt;#&lt;/span&gt;
&lt;span class="c"&gt;# fdmanage.py is a program to manage file descriptors of running programs&lt;/span&gt;
&lt;span class="c"&gt;# by using GDB to modify the running program.&lt;/span&gt;
&lt;span class="c"&gt;# https://github.com/ticpu/tools/blob/master/fdmanage.py&lt;/span&gt;
&lt;span class="c"&gt;# Copyright (C) 2015 Jérôme Poulin &amp;lt;jeromepoulin@gmail.com&amp;gt;&lt;/span&gt;
&lt;span class="c"&gt;#&lt;/span&gt;
&lt;span class="c"&gt;# This program is free software: you can redistribute it and/or modify&lt;/span&gt;
&lt;span class="c"&gt;# it under the terms of the GNU General Public License as published by&lt;/span&gt;
&lt;span class="c"&gt;# the Free Software Foundation, either version 3 of the License, or&lt;/span&gt;
&lt;span class="c"&gt;# (at your option) any later version.&lt;/span&gt;
&lt;span class="c"&gt;#&lt;/span&gt;
&lt;span class="c"&gt;# This program is distributed in the hope that it will be useful,&lt;/span&gt;
&lt;span class="c"&gt;# but WITHOUT ANY WARRANTY; without even the implied warranty of&lt;/span&gt;
&lt;span class="c"&gt;# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the&lt;/span&gt;
&lt;span class="c"&gt;# GNU General Public License for more details.&lt;/span&gt;
&lt;span class="c"&gt;#&lt;/span&gt;
&lt;span class="c"&gt;# You should have received a copy of the GNU General Public License&lt;/span&gt;
&lt;span class="c"&gt;# along with this program.  If not, see &amp;lt;http://www.gnu.org/licenses/&amp;gt;.&lt;/span&gt;
&lt;span class="c"&gt;#&lt;/span&gt;
&lt;span class="c"&gt;# Copyright (c) 2016 Alexander Todorov &amp;lt;atodorov@redhat.com&amp;gt;&lt;/span&gt;

&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;__future__&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;unicode_literals&lt;/span&gt;

&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;os&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;sys&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;select&lt;/span&gt;
&lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;subprocess&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Gdb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;object&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__init__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pid&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;verbose&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;False&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;pid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;str&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pid&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gdb&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Popen&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;
            &lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;gdb&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;-q&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;-p&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;pid&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt;
            &lt;span class="n"&gt;stdin&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PIPE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;stdout&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;PIPE&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;stderr&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="n"&gt;subprocess&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;STDOUT&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
            &lt;span class="n"&gt;close_fds&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
        &lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pid&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;pid&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;verbose&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;verbose&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__enter__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;__exit__&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;exc_type&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;exc_val&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;exc_tb&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="k"&gt;del&lt;/span&gt; &lt;span class="n"&gt;exc_type&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;exc_val&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;exc_tb&lt;/span&gt;

        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_command&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;detach&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_command&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;quit&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;wait&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

        &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;verbose&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;read&lt;/span&gt;&lt;span class="p"&gt;())&lt;/span&gt;
            &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;Program terminated.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;send_command&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;encode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;utf8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="n"&gt;b&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="se"&gt;\n&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;flush&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;send_command_expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_command&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;command&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;while&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="k"&gt;try&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;data&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdout&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;readline&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;decode&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;utf8&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;verbose&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="k"&gt;print&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
                &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="s"&gt;&amp;quot; = &amp;quot;&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                    &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;data&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;split&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;=&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)[&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;strip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
            &lt;span class="k"&gt;except&lt;/span&gt; &lt;span class="ne"&gt;IOError&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;select&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;select&lt;/span&gt;&lt;span class="p"&gt;([&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;gdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;stdout&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="p"&gt;[],&lt;/span&gt; &lt;span class="p"&gt;[],&lt;/span&gt; &lt;span class="mf"&gt;0.1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;close_fd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fd&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_command&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;call close(&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s"&gt;)&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fd&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;dup2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;old_fd&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;new_fd&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_command&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;call dup2(&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s"&gt;, &lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s"&gt;)&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;old_fd&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="nb"&gt;int&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;new_fd&lt;/span&gt;&lt;span class="p"&gt;)))&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;open_file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mode&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="mi"&gt;66&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="n"&gt;fd&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_command_expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;call open(&amp;quot;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;, &lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s"&gt;)&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;mode&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

        &lt;span class="k"&gt;return&lt;/span&gt; &lt;span class="n"&gt;fd&lt;/span&gt;

    &lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;fd&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;txt&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
        &lt;span class="bp"&gt;self&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_command&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;#39;call write(&lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s"&gt;, &amp;quot;&lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;, &lt;/span&gt;&lt;span class="si"&gt;%d&lt;/span&gt;&lt;span class="s"&gt;)&amp;#39;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fd&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;txt&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;txt&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;__name__&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;__main__&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
    &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;time&lt;/span&gt;
    &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="nn"&gt;tempfile&lt;/span&gt;

    &lt;span class="c"&gt;# these are specific to initial-setup-text&lt;/span&gt;
    &lt;span class="n"&gt;steps&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="p"&gt;[&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;1&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c"&gt;# License information&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;2&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c"&gt;# Accept license&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;c&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c"&gt;# Continue back to the main hub&lt;/span&gt;

        &lt;span class="s"&gt;&amp;quot;3&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="c"&gt;# Timezone settings&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;8&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;  &lt;span class="c"&gt;# Europe&lt;/span&gt;
        &lt;span class="s"&gt;&amp;quot;43&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c"&gt;# Sofia&lt;/span&gt;

&lt;span class="c"&gt;# passwd doesn&amp;#39;t allow us to overwrite its file descriptors&lt;/span&gt;
&lt;span class="c"&gt;# either aborts or simply doesn&amp;#39;t work&lt;/span&gt;
&lt;span class="c"&gt;#        &amp;quot;4\\n&amp;quot;,      # Root password&lt;/span&gt;
&lt;span class="c"&gt;#        &amp;quot;redhat\\n&amp;quot;,&lt;/span&gt;
&lt;span class="c"&gt;#        &amp;quot;redhat\\n&amp;quot;,&lt;/span&gt;
&lt;span class="c"&gt;#        &amp;quot;no\\n&amp;quot;,     # password is weak&lt;/span&gt;
&lt;span class="c"&gt;#        &amp;quot;123\\n&amp;quot;,&lt;/span&gt;
&lt;span class="c"&gt;#        &amp;quot;123\\n&amp;quot;,&lt;/span&gt;
&lt;span class="c"&gt;#        &amp;quot;no\\n&amp;quot;,     # password is too short&lt;/span&gt;
&lt;span class="c"&gt;#        &amp;quot;Th1s-Is-a-Str0ng-Password!\\n&amp;quot;,&lt;/span&gt;
&lt;span class="c"&gt;#        &amp;quot;Th1s-Is-a-Str0ng-Password!\\n&amp;quot;,&lt;/span&gt;

        &lt;span class="s"&gt;&amp;quot;c&lt;/span&gt;&lt;span class="se"&gt;\\&lt;/span&gt;&lt;span class="s"&gt;n&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="c"&gt;# Continue to exit&lt;/span&gt;
    &lt;span class="p"&gt;]&lt;/span&gt;

    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="o"&gt;!=&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;print&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;USAGE: &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt; &amp;lt;PID&amp;gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;__file__&lt;/span&gt;
        &lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;exit&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="n"&gt;tmp_dir&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;tempfile&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mkdtemp&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
    &lt;span class="n"&gt;pipe&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;path&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;join&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tmp_dir&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="s"&gt;&amp;quot;pipe&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;mkfifo&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pipe&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="k"&gt;with&lt;/span&gt; &lt;span class="n"&gt;Gdb&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;sys&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;argv&lt;/span&gt;&lt;span class="p"&gt;[&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;],&lt;/span&gt; &lt;span class="bp"&gt;True&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="k"&gt;as&lt;/span&gt; &lt;span class="n"&gt;gdb&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="n"&gt;fd&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;open_file&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pipe&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c"&gt;# O_RDWR&lt;/span&gt;
        &lt;span class="n"&gt;gdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;dup2&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fd&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt; &lt;span class="c"&gt;# replace STDIN with a PIPE&lt;/span&gt;
        &lt;span class="n"&gt;gdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;close_fd&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fd&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="c"&gt;# set a breakpoint before continuing&lt;/span&gt;
        &lt;span class="n"&gt;break_point_num&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;gdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_command_expect&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;break read&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

        &lt;span class="c"&gt;# now execute the process step-by-step&lt;/span&gt;
        &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
        &lt;span class="n"&gt;len_steps&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;len&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;steps&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
        &lt;span class="k"&gt;for&lt;/span&gt; &lt;span class="n"&gt;txt&lt;/span&gt; &lt;span class="ow"&gt;in&lt;/span&gt; &lt;span class="n"&gt;steps&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
            &lt;span class="n"&gt;gdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;write&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;txt&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;+=&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;
            &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;i&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="n"&gt;len_steps&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
                &lt;span class="n"&gt;gdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_command&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;delete &lt;/span&gt;&lt;span class="si"&gt;%s&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;&lt;/span&gt; &lt;span class="o"&gt;%&lt;/span&gt; &lt;span class="n"&gt;break_point_num&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;gdb&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;send_command&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s"&gt;&amp;quot;continue&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
            &lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;sleep&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

    &lt;span class="c"&gt;# clean up&lt;/span&gt;
    &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;unlink&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;pipe&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
    &lt;span class="n"&gt;os&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;rmdir&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;tmp_dir&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/pre&gt;&lt;/div&gt;</summary><category term="fedora.planet"></category><category term="QA"></category></entry></feed>