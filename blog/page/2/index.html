
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>atodorov.org</title>
  <meta name="author" content="Alexander Todorov">

  
  <meta name="description" content="MaistorPlus
solves the common problem of finding a reliable builder or handyman.
An online platform that brings master craftsmen and homeowners &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://atodorov.org/blog/page/2/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="http://feeds.feedburner.com/atodorov" rel="alternate" title="atodorov.org" type="application/atom+xml">
  <script type="text/javascript">
// (c) 2013 - Alexander Todorov, http://atodorov.org
// Published under GNU GPLv3
var uri = window.location.toString();
if (uri.indexOf("?") > 0) {
    var clean_uri = uri.substring(0, uri.indexOf("?"));
    window.history.replaceState({}, document.title, clean_uri);
}
</script>
<!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=Russo+One" rel="stylesheet" type="text/css" />

  
  <script type="text/javascript">
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-37979549-1']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
  </script>


</head>

<body   >
  <header role="banner"><hgroup>
<div id="logo-container">
<div id="logo">atodorov.org</div>
<div id="logo-sub"><em>
<a href="/blog/categories/django/">django</a>,
<a href="/blog/categories/qa/">qa</a>,
<a href="/blog/categories/amazon/">cloud</a>,
<a href="/blog/categories/rhel/">red hat</a>,
<a href="/blog/categories/start-up/">start-up</a>
</em></div>
</div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="http://feeds.feedburner.com/atodorov" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:atodorov.org" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/give-away/">Give Away List</a></li>
  <li><a href="/projects/">Projects</a></li>
  <li><a href="http://amzn.to/11ep6dD">Now reading: The E-Myth Revisited: Why Most Small Businesses Don't Work ...</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/08/what-runs-your-startup-maistorplus/">What Runs Your Start-up - MaistorPlus</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-08T12:52:00+03:00" pubdate data-updated="true">Apr 8<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/04/08/what-runs-your-startup-maistorplus/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/startup/maistorplus.jpg" alt="MaistorPlus logo" style="float:left; margin-right: 15px;"/></p>

<p><a href="http://www.meisterplus.com/%D0%BC%D0%B0%D0%B9%D1%81%D1%82%D0%BE%D1%80%D0%B8">MaistorPlus</a>
solves the common problem of finding a reliable builder or handyman.
An online platform that brings master craftsmen and homeowners together.</p>

<p>The process is really easy. Homeowners post jobs on the website and receive
offers from relevant tradesmen. After the job is done homeowners leave feedback
and recommendations. With this feature homeowners can compare tradesmen profiles,
offers and ratings and confidently choose who they want to hire.</p>

<p>The team is also runner up at the Start IT Smart
<a href="http://www.3challenge.com/startups/season-3/">3Challenge</a>.
<a href="http://meisterplus.com/about/team">Boris Sanchez</a> shared their technical mojo.</p>

<h2>Main Technologies</h2>

<p>Main technologies used are PHP, Symfony 2.1 and PostgreSQL.</p>

<p>MaistorPlus is a traditional web platform developed with the
<a href="http://symfony.com/">Symfony framework</a>. Web pages are rendered by Twig -
a straightforward, flexible and easy to extend templating engine, which is
integrated into the Symfony framework by default and works server-side with PHP
in order to generate dynamic content, based on data stored in the database.
Web pages also use jQuery and <a href="http://sizzlejs.com/">Sizzle.js</a> and feature modern graphics.
Everything is beautifully styled with CSS.</p>

<h2>Why Not Something Else</h2>

<blockquote><p>The original development team already had experience with Symfony, Zend, Spring and<br/>some other web application development frameworks. We opted for Symfony for two<br/>main reasons. First, Symfony is constantly improving, and has a strong and<br/>continuously growing community that offers 3rd party add-on components for free.<br/>Second, PHP is a bit easier to &#8220;learn as you go&#8221; then Java. The members of our<br/>design team didn&#8217;t have a lot of prior programming experience, so we wanted to<br/>make sure we set a low barrier of entry for them, as we didn&#8217;t have the enough<br/>development staff to have a distinct separation between design creation and design<br/>integration in our team.</p><p>For the initial prototype we used the MySQL database management system. After a<br/>while we wanted to add spatial features to the business logic, and discovered that<br/>MySQL does not have proper support for spatial indexing. We therefore decided to<br/>migrate to PostgreSQL, which supports spatial data with add-ons like PostGIS.</p><footer><strong>Boris Sanchez</strong></footer></blockquote>


<h2>Want More Info?</h2>

<p>MaistorPlus is going to organize a Beta Testing next month. You are welcome to
<a href="http://meisterplus.com/blog">subscribe</a> to their monthly newsletter or follow them on
<a href="https://www.facebook.com/MaistorPlus">Facebook</a> / <a href="https://twitter.com/MaistorPlus">Twitter</a>.</p>

<p>If youâ€™d like to hear more from <em>MaistorPlus</em> please comment below.
I will ask them to follow this thread and reply to your questions.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/06/using-django-built-in-template-tags-and-filters-in-code/">Using Django Built-in Template Tags and Filters in Code</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-06T22:26:00+03:00" pubdate data-updated="true">Apr 6<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/04/06/using-django-built-in-template-tags-and-filters-in-code/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In case you are wondering how to use Django&#8217;s
<a href="https://docs.djangoproject.com/en/dev/ref/templates/builtins/">built-in template tags and filters</a>
in your source code, not inside a template here is how:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">django.template.defaultfilters</span> <span class="kn">import</span> <span class="o">*</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
</span><span class='line'><span class="s">u&#39;1.0 KB&#39;</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">filesizeformat</span><span class="p">(</span><span class="mi">1020</span><span class="p">)</span>
</span><span class='line'><span class="s">u&#39;1020 bytes&#39;</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">filesizeformat</span><span class="p">(</span><span class="mi">102412354</span><span class="p">)</span>
</span><span class='line'><span class="s">u&#39;97.7 MB&#39;</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>All built-ins live in <code>pythonX.Y/site-packages/django/template/defaultfilters.py</code>.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/06/tip-renaming-model-fields-in-django/">Tip: Renaming Model Fields in Django</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-06T01:18:00+03:00" pubdate data-updated="true">Apr 6<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/04/06/tip-renaming-model-fields-in-django/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Did you ever have to re-purpose a column in your database schema?
Here&#8217;s a quick and easy way to do this if you happen to be using Django.</p>

<h2>Scenario</h2>

<p>I had an integer field in my model called <code>lines</code> which counted the lines of
code in a particular tar.gz package. I figured the file size is a better indicator
so decided to start using it. I was not planning to use the old field anymore and
I didn&#8217;t care about the data it was holding. So I decided to re-purpose it
as the <code>size</code> field.</p>

<h2>Possible methods</h2>

<p>Looking around I figured several different ways to do this:</p>

<ol>
<li>Continue using the existing <code>lines</code> field and keep referencing the old name in the code.
This is no-brainer but feels awkward and is a disaster waiting to happen;</li>
<li>Add new <code>size</code> field and remove the old <code>lines</code> field. This involves modification to
the DB schema and requires at least a backup with possible down time. Not something
I will jump at right away;</li>
<li>Add a <code>size</code> property in the model class which will persist to <code>self.lines</code>.
This is a quick way to go but I&#8217;m not sure if one can use the property with the
Django QuerySet API (objects.filter(), objects.update(), etc.) I suspect not.
If you don&#8217;t filter by the property or use it in bulk operations this method is fine though;</li>
<li>Change the field name to <code>size</code> but continue to use the <code>lines</code> DB column;
Mind my wording here :);</li>
<li>Rename the column in the DB schema and then update the model class field.</li>
</ol>


<h2>How I did it</h2>

<p>I decided to go for option 4 above:
change the field name to <code>size</code> but continue to use the <code>lines</code> DB column.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='diff'><span class='line'><span class="gh">diff --git a/models.py b/models.py</span>
</span><span class='line'><span class="gh">index e06d2b2..18cad6f 100644</span>
</span><span class='line'><span class="gd">--- a/models.py</span>
</span><span class='line'><span class="gi">+++ b/models.py</span>
</span><span class='line'><span class="gu">@@ -667,7 +667,7 @@ class Package(models.Model):</span>
</span><span class='line'><span class="gd">-    lines = models.IntegerField(default=None, null=True, blank=True)</span>
</span><span class='line'><span class="gi">+    size  = models.IntegerField(default=None, null=True, blank=True, db_column=&#39;lines&#39;)</span>
</span></code></pre></td></tr></table></div></figure>


<ol>
<li>Removed all references to <code>lines</code> from the code except the model class. This served as clean up as well.</li>
<li>Renamed the model field to <code>size</code> but continued using the <code>lines</code> DB column as shown above.
Django&#8217;s <em>db_column</em> option makes this possible.</li>
<li>From the Django shell (./manage.py shell) reset <code>size</code> to None (NULL) for all objects;</li>
<li>Finally implement my new code and functionality behind the <code>size</code> field.</li>
</ol>


<p>The entire process happened for under 10 minutes. I will also opt for renaming the DB column at a later time.
This is to sync the naming used in Python code and in MySQL in case I ever need to use raw SQL or anything but Django.</p>

<p>If you were me, how would you do this? Please share in the comments below.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/04/03/what-runs-your-startup-ucha.se/">What Runs Your Start-up - Ucha.se</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-04-03T10:57:00+03:00" pubdate data-updated="true">Apr 3<span>rd</span>, 2013</time>
        
         | <a href="/blog/2013/04/03/what-runs-your-startup-ucha.se/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/startup/uchase.jpg" alt="Ucha.se logo" style="float:left;margin-right:10px;"/></p>

<p><a href="http://ucha.se/">Ucha.se</a> makes learning fun. It is an online platform,
on which pupils and students learn and prepare for school. Pupils learn faster,
improve their results and get inspired. The platform allows students to watch
videos, take tests, ask questions and share comments. Learning is represented
with gamification components like drawings, playful narration, dashboards with
the best students, etc. It is available on the web and is extending to mobile.
Ucha.se is well recognized by the parents and teachers in Bulgaria.
In November 2012 Ucha.se was awarded as the best website in Bulgaria in the
field of Education and Science.</p>

<p>Nikolay Zheynov is leading the IT team which maintains and expands the web platform.
He shared with me some of the internals.</p>

<h2>Main Technologies</h2>

<p>Main technologies used are PHP, MySQL, Nginx, jQuery and jQueryUI.</p>

<p>Server-side development is done with PHP 5. The main reason for choosing PHP is
that the IT team working on the platform had long experience with the language.
Ucha.se has developed their own PHP framework which is constantly expanding.
This allows flexible programming and easier application maintenance.
Nginx is the web server of choice.</p>

<p>MySQL 5 is used for the database because PHP + MySQL is like bread and butter.
While the site usage was growing the team had to optimize their DB layer and switched
from MyISAM storage engine to InnoDB.</p>

<p>On the client-side standard web technologies are used - HTML5, CSS3 and JavaScript.
The main goal when doing the website design was to match expectation from different
user groups - pupils, teachers, parents and students.
jQuery and jQueryUI are widely used on the client side.</p>

<h2>Why Not Something Else?</h2>

<blockquote><p>True to our agile approach to incrementally enhance the product and the technology<br/>that goes along with it, we strongly believe in the scaling on demand practices.<br/>Ucha.se&#8217;s own framework reflects exactly to that. It allows us to meet our growing<br/>user demands and provides at the same time, the dev-team with enough flexibility to<br/>quickly react on new business opportunities and technological (r)evolutions.</p><footer><strong>Nikolay Zheynov</strong></footer></blockquote>


<h2>Want More Info?</h2>

<p>If youâ€™d like to hear more from <em>Ucha.se</em> please comment below.
I will ask them to follow this thread and reply to your questions.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/29/bug-in-the-fridge/">Bug in the Fridge</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-29T15:09:00+02:00" pubdate data-updated="true">Mar 29<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/29/bug-in-the-fridge/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/liebherr_kbgb_3864.jpg" alt="Liebherr KBGB 3864" style="float:left; margin-right: 20px;" /></p>

<p>Once you&#8217;ve been into
<a target="_blank" href="http://www.amazon.com/s/?_encoding=UTF8&camp=1789&creative=390957&field-keywords=quality%20assurance&linkCode=ur2&rh=i%3Aaps%2Ck%3Aquality%20assurance&sprefix=quality%20ass%2Caps%2C273&tag=atodorovorg-20&url=search-alias%3Daps">Quality Assurance</a><img src="https://www.assoc-amazon.com/e/ir?t=atodorovorg-20&l=ur2&o=1" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />
for 5+ years you start to notice <a href="/blog/categories/bugs/">bugs everywhere</a>
and develop a sixth sense for it. Today I found a bug in my
<a target="_blank" href="http://www.amazon.com/s/?_encoding=UTF8&camp=1789&creative=390957&field-keywords=liebherr&linkCode=ur2&rh=n%3A2619525011%2Ck%3Aliebherr&sprefix=Liebherr%2Caps%2C273&tag=atodorovorg-20&url=search-alias%3Dappliances">Liebherr</a><img src="https://www.assoc-amazon.com/e/ir?t=atodorovorg-20&l=ur2&o=1" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />
KBGB 3864 refrigerator, caused by what looks like a race-condition.</p>

<p>This appliance starts beeping in case the door is left open for more than 60 seconds.
The alarm stops if door is closed or can be muted manually while the door is still open.</p>

<h2>The Bug</h2>

<p>It happened so that I had the door open for nearly one minute and as it was closing
I heard a beep. This time however the beeping didn&#8217;t stop after the door had closed.
The alarm continued beeping with the door closed so I tried to re-open and close it again.
It didn&#8217;t stop! I had to open the door and manually mute the alarm for it to stop.</p>

<div style="display:block; clear:both;">&nbsp;</div>


<h2>The Root Cause</h2>

<p>While not entirely sure, I think the reason for this malfunction
was a race-condition. The alarm went on at nearly the same time when the
controlling timer should have gone off (when closing the door).</p>

<h2>Steps To Reproduce</h2>

<p>I tried reproducing several times afterwards by opening and closing the door
at the last possible moment. I used a stop-watch to time my actions. However
I wasn&#8217;t able to reproduce twice. Every time I tried, there was only one single
beep as the door was closing and no more.</p>

<p>I guess then, like we say in QE, <em>WORKS FOR ME</em>!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/27/what-runs-your-startup-useful-at-night/">What Runs Your Start-up - Useful at Night</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-27T12:00:00+02:00" pubdate data-updated="true">Mar 27<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/27/what-runs-your-startup-useful-at-night/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img style="float: left; margin-right: 10px;" src="/images/startup/usefulatnight.png" alt="Useful at Night logo" /></p>

<p><a href="http://usefulatnight.com/">Useful at Night</a> is a mobile guide for nightlife
empowering real time discovery of cool locations, allowing nightlife players
to identify opinion leaders. Through geo-location and data aggregation
capabilities, the application allows useful exploration of cities, places and
parties.</p>

<p><a href="http://about.me/velev">Evelin Velev</a> was kind enough to share what technologies
his team uses to run their star-up.</p>

<br/>


<h2>Main Technologies</h2>

<p>Main technologies used are Node.js, HTML 5 and NoSQL.</p>

<p>Back-end application servers are written in Node.js and hosted at Heroku,
coupled with <a href="http://www.redistogo.com/">RedisToGo</a> for caching and
CouchDB served by <a href="https://cloudant.com/">Cloudant</a> for storage.</p>

<p>Their mobile front-end supports both iOS and Android platforms and is built using
HTML5 and a homemade UI framework called RAPID. There are some native parts developed
in Objective-C and Java respectively.</p>

<p>In addition <em>Useful at Night</em> uses MongoDB for metrics data with a custom metrics solution
written in Node.js; Amazon S3 for storing different assets; and a custom storage solution
called Divan (simple CouchDB like).</p>

<h2>Why Not Something Else?</h2>

<blockquote><p>We chose Node.js for our application servers, because it enables us to build efficient<br/>distributed systems while sharing significant amounts of code between client and server.<br/>Things get really interesting when you couple Node.js with Redis for data structure<br/>sharing and message passing, as the two technologies play very well together.</p><p>We chose CouchDB as our main back-end because it is the most schema-less data-store that<br/>supports secondary indexing. Once you get fluent with its map-reduce views, you can<br/>compute an index out of practically anything. For comparison, even MongoDB requires<br/>that you design your documents as to enable certain indexing patterns. Put otherwise,<br/>we&#8217;d say CouchDB is a data-store that enables truly lean engineering - we have never had<br/>to re-bake or migrate our data since day one, while we&#8217;re constantly experimenting with<br/>new ways to index, aggregate and query it.</p><p>We chose HTML5 as our front-end technology, because it&#8217;s cross-platform and because we<br/>believe it&#8217;s &#8230; almost ready. Things are still really problematic on Android, but iOS<br/>boasts a gorgeous web presentation platform, and Windows 8 is also joining the game with<br/>a very good web engine. Obviously we&#8217;re constantly running into issues and limitations,<br/>mostly related to the unfortunate fact that in spite of some recent developments,<br/>a web app is still mostly single threaded. However, we&#8217;re getting there, and we&#8217;re proud<br/>to say we&#8217;re running a pretty graphically complex hybrid app with near-native GUI performance<br/>on the iPhone 4S and above.</p></blockquote>


<h2>Want More Info?</h2>

<p>If you&#8217;d like to hear more from <em>Useful at Night</em> please comment below. I will ask them
to follow this thread and reply to your questions.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/27/what-runs-your-startup/">What Runs Your Start-up</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-27T12:00:00+02:00" pubdate data-updated="true">Mar 27<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/27/what-runs-your-startup/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I am starting a new section called
<a href="/blog/categories/what-runs/">What Runs Your Start-up</a> where I will
write about the technologies running behind some interesting
start-up companies and why they made their technological choices.
The articles will be short and to the point. Interested readers
can engage in discussion with start-up owners in the comments later.</p>

<p>I am starting with a dozen companies from the Bulgarian start-up eco-system
and will present one or two start-ups per week.
If you&#8217;d like to read about a company which is not listed here or want to
promote your own just let me know.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/26/to-fork-or-not-to-fork-the-mate-story/">To Fork or Not to Fork - the MATE Story</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-26T10:46:00+02:00" pubdate data-updated="true">Mar 26<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/26/to-fork-or-not-to-fork-the-mate-story/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/MATE.png" title="MATE Desktop" alt="&quot;MATE Desktop&quot;" /></p>

<p>In the open source world
<a href="https://en.wikipedia.org/wiki/Fork_%28software_development%29">forking</a>
is a common concept, largely endorsed by GitHub&#8217;s fork &amp; pull requests work-flow.
Forking a large and successful project and creating a new one, with its own
eco-system is rare though.</p>

<p>Recently I came across the <a href="http://mate-desktop.org">MATE</a> desktop environment
which is a fork of GNOME 2. Even more interesting is that they forked lots of
standard GNOME <a href="http://mate-desktop.org/applications/">applications</a> as well.
Being behind the <a href="http://www.redhat.com/products/enterprise-linux/">world&#8217;s leading enterprise OS</a>
where maintaining a private fork is sometimes necessary I wondered why MATE had to do this.</p>

<p>Here are some interesting responses from
<a href="http://ml.mate-desktop.org/pipermail/mate-dev/2013-March/000090.html">mate-dev</a>:</p>

<blockquote><p>Well, MATE is born in a time of fear, so Perberos forked almost all <br/>GNOME 2 applications. Currently, we are dropping a lot of packages to <br/>focus our effort on what we need really.<br/>&#8230;<br/>The main reason of this is to have a base set of apps in GTK 2. Another <br/>reason, most GNOME apps (like Evince) are suffering mockups that dont <br/>follow the traditional idea of MATE.</p><p>When MATE will be GTK3, we&#8217;ll consider again if keeping or not such <br/>applications.</p><footer><strong>Stefano Karapetsas</strong> <cite><a href='http://ml.mate-desktop.org/pipermail/mate-dev/2013-March/000091.html'>ml.mate-desktop.org/pipermail/&hellip;</a></cite></footer></blockquote>




<blockquote><p>A similar question was also asked not long after the MATE forum was <br/>created, which was probably somewhere early in 2012. Steve Zesch <br/>answered that we would be sure that we wouldn&#8217;t be affected by <br/>feature/UI choices of the GNOME developers, which we would have been if <br/>MATE relied on GNOME 3 applications. He used Caja as an example. Caja <br/>looked -of course- similar to Nautilus. It had some features Nautilus 3 <br/>didn&#8217;t, but the reverse was true as well. Nautilus 3 looked better, <br/>though, so it was not very surprising that we got (and get) this <br/>question. But Steve&#8217;s example of Caja turned out to be pretty much spot <br/>on, when Nautilus 3.6 was released, and almost all of the changes were <br/>removed features (it was even described by a former GNOME developer as <br/>&#8216;vandalism&#8217;). Canonical decided to use 3.4 for Ubuntu 12.10, although <br/>the original plan was to include 3.6. Linux Mint forked 3.4 as Nemo.</p><p>And there&#8217;s no good reason for this, as far as I can see. The interfaces <br/>of Gnome have always been simple enough not to be overwhelming for <br/>novice users, but at the same time powerful enough for the power users. <br/>Which is a fine - and rare - balance. They completely messed it up in <br/>Gnome 3. <br/>&#8230;<br/>So although Gedit, Evince and GNOME Terminal are fine now, I doubt it&#8217;s <br/>safe to assume they will stay that way. Especially since we&#8217;ve already <br/>seen what happened to the fallback mode of Gnome 3 (completely removed, <br/>although many people use it and Ubuntu&#8217;s Unity depends on it) and <br/>Nautilus (vandalised).<br/>&#8230;<br/>Well, ok, that was a big rant. But to summarise my post (and Stefano&#8217;s): <br/>it was a decision that had to be taken quickly, and from the integration <br/>and control viewpoint, it seems like was a good idea after all. <br/>Especially now many deprecated underlying technologies have been replaced.</p><footer><strong>Michael Steenbeek</strong> <cite><a href='http://ml.mate-desktop.org/pipermail/mate-dev/2013-March/000092.html'>ml.mate-desktop.org/pipermail/&hellip;</a></cite></footer></blockquote>




<blockquote><p>Well, when two teams are maintaining applications with very little <br/>differences, that can be considered a waste of time and effort. It was <br/>very easy to say about the MATE applications as well, before we knew <br/>what GNOME would do to its applications. Now GNOME is removing more and <br/>more features from its applications and changing their GUI to a tablet <br/>interface, it turned to be the right decision.</p><footer><strong>Michael Steenbeek</strong> <cite><a href='http://ml.mate-desktop.org/pipermail/mate-dev/2013-March/000095.html'>ml.mate-desktop.org/pipermail/&hellip;</a></cite></footer></blockquote>



</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/25/the-silicon-prairie-movie/">The Silicon Prairie Movie</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-25T11:44:00+02:00" pubdate data-updated="true">Mar 25<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/25/the-silicon-prairie-movie/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><blockquote><p>Not all innovation needs to come out of Silicon Valley!</p></blockquote>


<p>I&#8217;ve just watched <a href="http://www.siliconprairiefilm.com/">Silicon Prairie</a>
(download for free or as much as you can afford).
Last fall, a team of journalists and activists joined reddit&#8217;s Internet 2012 Bus Tour
and traveled from Denver, CO to Danville, KY to capture the Internetâ€™s role in the
US Midwest&#8217;s growing Silicon Prairie. Nimblebot, a digital agency, shot and produced a
mini-documentary showcasing the journey. I particularly liked several companies listed
below.</p>

<h2>AgLocal</h2>

<p><a href="https://www.aglocal.com/">AgLocal</a> connects quality meat producers with high-margin
buyers. This can work very well in Bulgaria. Most food and agriculture producers in
the country are small and mid-sized farms who struggle to sell their produce or work with
middlemen for a low margin. On the other hand there are more and more people, especially in
big cities who would like to pay for locally produced food but don&#8217;t know where to buy it from
or don&#8217;t have the time to visit a farm to buy it (like myself). Last but not least what big supermarket
chains sell is simply too expensive and crappy.</p>

<p>As far as I know there are several attempts at such kind of companies/organizations here
but they are small and not widely popular.</p>

<h2>Homes For Hackers</h2>

<p><a href="http://www.homesforhackers.com/">Homes For Hackers</a> in Kansas City is offering 3 months
of rent-free, Google Fiber-connected start-up space to entrepreneurs. I have already heard
several people discussing similar ideas in Bulgaria, mostly because cost of living here,
hence cost of failure is very low. I wish them good luck.</p>

<h2>SparkFun Electronics</h2>

<p><a href="https://www.sparkfun.com/">SparkFun</a> is an online retail store that sells the bits and
pieces to make your electronics projects possible. According to the movie they create
open source hardware and even shipped to Antarctica which is cool.</p>

<p>Once again this business model can work in Bulgaria. We had lots of electronics produce back in the
past and still have. There is still talented people in this area
who will be looking for a job if their companies close shop due to Chinese competition.</p>

<p>Watch the movie and tell me which ones you like ? Do you think Bulgaria can have its
Silicon areas outside <a href="http://sofiavalley.com">Sofia Valley</a> ?</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/24/upcoming-hackatons-in-sofia/">Upcoming Hackatons in Sofia</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-24T22:02:00+02:00" pubdate data-updated="true">Mar 24<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/24/upcoming-hackatons-in-sofia/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><a href="https://en.wikipedia.org/wiki/Hackathon">Hackatons</a>
have been organized in Sofia and generally through Bulgaria for the
past several years but as far as I know they were mostly underground events.
There are two upcoming events which are somewhat different.</p>

<h2>&#8220;Record Voting&#8221; Hackaton</h2>

<p><img src="/images/opengov.jpg" alt="hackaton logo" /></p>

<p>Organized by <a href="http://iped.bg/en">INSTITUTE FOR PUBLIC ENVIRONMENT DEVELOPMENT</a>
this hackaton is the first I know of, which will focus on government provided data.
The objective is to process data
(<a href="http://results.cik.bg/el2011_t1.zip">sample</a>) from the 2011 elections
and find persons who were able to vote in the last minute, between 20:00-21:00 hours thus
changing the election results by 20% in their voting section.</p>

<p>The event starts at 09:29 on 30th Mar 2013 @ <a href="http://www.betahaus.bg">betahaus Sofia</a>.
More info in Bulgarian <a href="http://bogomil.info/4805">here</a> and
<a href="http://iped.bg/bg/news-read/news1c">here</a>.</p>

<p>I&#8217;d love to attend but will be visiting a conference about mobile devices in
another town at the same time :(. If you do attend, let me know how fun it was.</p>

<p>Dare to read more on the topic about open government? I recommend starting with
<em>Open Government: Collaboration, Transparency, and Participation in Practice by
Daniel Lathrop and Laurel Ruma</em> (
<a href="http://www.amazon.com/gp/product/0596804350/ref=as_li_ss_tl?ie=UTF8&camp=1789&creative=390957&creativeASIN=0596804350&linkCode=as2&tag=atodorovorg-20">Amazon</a><img src="http://www.assoc-amazon.com/e/ir?t=atodorovorg-20&l=as2&o=1&a=0596804350" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />
|
<a href="http://www.dpbolvw.net/click-7040110-11260198?url=http%3A%2F%2Fshop.oreilly.com%2Fproduct%2F9780596804367.do%3Fcmp%3Daf-none-book-product_cj_9780596804350_%25zp&cjsku=9780596804367" target="_top">O&#8217;Reilly</a><img src="http://www.tqlkg.com/image-7040110-11260198" width="0" height="0" border="0" style="display:none; margin:0;padding:0"/>
). This is an excellent book with tons of examples and easy to read.</p>

<h2>HackFMI</h2>

<p><img src="/images/hackfmi/cropped-hackfmi.png" title="HackFMI" alt="HackFMI" /></p>

<p>FMI stands for <em>Faculty of Mathematics and Informatics at the Sofia University</em>
(not where I graduated). It&#8217;s one of the
best, arguably the best, places to study for an IT career. Like most other universities in Bulgaria
its administration and processes suck big time!</p>

<p><a href="http://hackfmi.com/">HackFMI</a> is the first ever hackaton which will focus on students
improving faculty/university systems and processes. This is HUGE! As far as I know it is also the first
hackaton which is supported by academia.</p>

<p>I have already <a href="https://github.com/Hackfmi/Organization-Details/pull/2">volunteered</a> to be
a mentor at HackFMI. I am looking forward to this. It will be fun. See you there!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/21/django-queryset-tip-search-and-order-by-exact-match/">Django QuerySet Tip - Search and Order by Exact Match</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-21T22:56:00+02:00" pubdate data-updated="true">Mar 21<span>st</span>, 2013</time>
        
         | <a href="/blog/2013/03/21/django-queryset-tip-search-and-order-by-exact-match/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>How do you order Django QuerySet results so that first item is the
exact match if using <code>contains</code> or <code>icontains</code> ? Both solutions were proposed on the
<a href="https://groups.google.com/d/topic/django-users/OCNmIXrRgag/discussion">django-users</a>
mailing list.</p>

<figure class='code'><figcaption><span>Solution by Tom Evans, example is mine  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="kn">from</span> <span class="nn">django.db.models</span> <span class="kn">import</span> <span class="n">Q</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">Package</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span>
</span><span class='line'>        <span class="n">Q</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;Django&#39;</span><span class="p">)</span> <span class="o">|</span> <span class="n">Q</span><span class="p">(</span><span class="n">name__icontains</span><span class="o">=</span><span class="s">&#39;Django&#39;</span><span class="p">)</span>
</span><span class='line'>    <span class="p">)</span><span class="o">.</span><span class="n">extra</span><span class="p">(</span>
</span><span class='line'>        <span class="n">select</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;match&#39;</span> <span class="p">:</span> <span class="s">&#39;name = &quot;Django&quot;&#39;</span><span class="p">}</span>
</span><span class='line'>    <span class="p">)</span><span class="o">.</span><span class="n">order_by</span><span class="p">(</span><span class="s">&#39;-match&#39;</span><span class="p">,</span> <span class="s">&#39;name&#39;</span><span class="p">)</span>
</span><span class='line'><span class="p">[</span><span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">Django</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">appomatic_django_cms</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">appomatic_django_filer</span><span class="o">&gt;</span><span class="p">,</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">appomatic_django_vcs</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">BabelDjango</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">BDD4Django</span><span class="o">&gt;</span><span class="p">,</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">blanc</span><span class="o">-</span><span class="n">django</span><span class="o">-</span><span class="n">admin</span><span class="o">-</span><span class="n">skin</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">bootstrap</span><span class="o">-</span><span class="n">django</span><span class="o">-</span><span class="n">forms</span><span class="o">&gt;</span><span class="p">,</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">capistrano</span><span class="o">-</span><span class="n">django</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">ccnmtldjango</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">collective</span><span class="o">.</span><span class="n">django</span><span class="o">&gt;</span><span class="p">,</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">csdjango</span><span class="o">.</span><span class="n">contactform</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">cykooz</span><span class="o">.</span><span class="n">djangopaste</span><span class="o">&gt;</span><span class="p">,</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">cykooz</span><span class="o">.</span><span class="n">djangorecipe</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">d51</span><span class="o">.</span><span class="n">django</span><span class="o">.</span><span class="n">virtualenv</span><span class="o">.</span><span class="n">test_runner</span><span class="o">&gt;</span><span class="p">,</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">django</span><span class="o">-</span><span class="mi">4</span><span class="n">store</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">django</span><span class="o">-</span><span class="mi">503</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">django</span><span class="o">-</span><span class="n">absolute</span><span class="o">&gt;</span><span class="p">,</span>
</span><span class='line'><span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">django</span><span class="o">-</span><span class="n">abstract</span><span class="o">-</span><span class="n">templates</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Package</span><span class="p">:</span> <span class="n">django</span><span class="o">-</span><span class="n">account</span><span class="o">&gt;</span><span class="p">,</span>
</span><span class='line'><span class="s">&#39;...(remaining elements truncated)...&#39;</span><span class="p">]</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Another one:</p>

<blockquote><p>I&#8217;m not sure this is the right way, but you could drop the Q objects, use<br/>only icontains and sort by the length of &#8216;name&#8217;</p><footer><strong>Gabriel</strong> <cite><a href='https://groups.google.com/d/topic/django-users/OCNmIXrRgag/discussion'>groups.google.com/d/topic/&hellip;</a></cite></footer></blockquote>




<figure class='code'><figcaption><span>Example is mine  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="n">packages</span> <span class="o">=</span> <span class="p">[</span><span class="n">p</span><span class="o">.</span><span class="n">name</span> <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">Package</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">name__icontains</span><span class="o">=</span><span class="s">&#39;Dancer&#39;</span><span class="p">)]</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">packages</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="nb">len</span><span class="p">)</span>
</span><span class='line'><span class="p">[</span><span class="s">u&#39;Dancer&#39;</span><span class="p">,</span> <span class="s">u&#39;Dancer2&#39;</span><span class="p">,</span> <span class="s">u&#39;breakdancer&#39;</span><span class="p">,</span> <span class="s">u&#39;Task::Dancer&#39;</span><span class="p">,</span> <span class="s">u&#39;App::Dancer2&#39;</span><span class="p">,</span> <span class="s">u&#39;Dancer::Routes&#39;</span><span class="p">,</span>
</span><span class='line'><span class="s">u&#39;DancerX::Routes&#39;</span><span class="p">,</span> <span class="s">u&#39;DancerX::Config&#39;</span><span class="p">,</span> <span class="s">u&#39;Task::DWIM::Dancer&#39;</span><span class="p">,</span> <span class="s">u&#39;Dancer::Plugin::CDN&#39;</span><span class="p">,</span>
</span><span class='line'><span class="s">u&#39;Dancer::Plugin::Feed&#39;</span><span class="p">,</span> <span class="s">u&#39;Dancer::Plugin::LDAP&#39;</span><span class="p">,</span> <span class="s">u&#39;Dancer::Plugin::Lucy&#39;</span><span class="p">,</span>
</span><span class='line'><span class="s">&#39;...(remaining elements truncated)...&#39;</span><span class="p">]</span>
</span><span class='line'><span class="o">&gt;&gt;&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>That&#8217;s all folks. If you have other more interesting sorting needs please comment below.
Thanks!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/20/virtualization-platforms-supported-by-red-hat-enterprise-linux/">Virtualization Platforms Supported by Red Hat Enterprise Linux</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-20T15:04:00+02:00" pubdate data-updated="true">Mar 20<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/20/virtualization-platforms-supported-by-red-hat-enterprise-linux/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>This is mostly for my own reference, to have a handy list
of supported virtualization platforms by Red Hat Enterprise Linux.</p>

<h2>Software virtualization solutions</h2>

<p>A guest RHEL operating system is supported if it runs on the following
platforms:</p>

<ul>
<li>Xen shipped with RHEL Server</li>
<li>KVM shipped with RHEL Server or RHEV for Servers</li>
<li><a href="https://hardware.redhat.com/VMware">VMware</a> ESX/vSphere</li>
<li><a href="https://hardware.redhat.com/Microsoft">Microsoft Hyper-V</a></li>
</ul>


<p>Red Hat does not support Citrix XenServer. However, customers can
<a href="http://otb.bg">buy RHEL Server</a> and use it with Citrix XenServer
with the understanding that Red Hat will only support technical
issues that can be reproduced on bare metal.</p>

<p>The
<a href="http://www.redhat.com/resourcelibrary/articles/enterprise-linux-virtualization-support">official virtualization support matrix</a>
shows which host/guest operating systems combinations are supported.</p>

<h2>Hardware partitioning</h2>

<p>Red Hat supports RHEL on hardware partitioning and virtualization solutions such as:</p>

<ul>
<li><a href="https://hardware.redhat.com/list.cgi?product=Red+Hat+Hardware+Certification&amp;quicksearch=IBM+System+Z">IBM System Z</a></li>
<li><a href="https://hardware.redhat.com/list.cgi?product=Red+Hat+Hardware+Certification&amp;quicksearch=IBM+POWER">IBM Power</a></li>
<li><a href="https://hardware.redhat.com/list.cgi?product=Red+Hat+Hardware+Certification&amp;quicksearch=PRIMEQUEST">Fujitsu PRIMEQUEST</a></li>
<li><a href="https://hardware.redhat.com/list.cgi?product=Red+Hat+Hardware+Certification&amp;quicksearch=Virtage">Hitachi Virtage</a></li>
</ul>


<p>Unfortunately the <a href="https://access.redhat.com/knowledge/articles/263573">recently updated</a>
hardware catalog
<a href="https://bugzilla.redhat.com/show_bug.cgi?id=923802">doesn&#8217;t allow to filter by hardware partitioning vs. virtualization platform</a>
so you need to know what you are looking for to find it :(.</p>

<h2>Red Hat Enterprise Linux as a guest on the Cloud</h2>

<p>Multiple public cloud providers are supported. Comprehensive list can be found here:
http://www.redhat.com/solutions/cloud-computing/public-cloud/find-partner/</p>

<p>You can also try <a href="http://redhat.force.com/finder/">Red Hat Partner Locator&#8217;s</a>
advanced search. However at the time of this writing there are no partners
listed in the Cloud / Virtualization category.</p>

<p><strong>Warning:</strong> It is known that Amazon uses Xen with custom
modifications (not sure what version) and HP Cloud uses KVM but there
is not much public record about hypervisor technology used by most cloud providers.
Red Hat has partner agreements with these vendors and will commercially support
only their platforms. This means that if you decide to use upstream Xen or anything
else not listed above, you are on your own. <strong>You have been warned!</strong></p>

<h2>Unsupported but works</h2>

<p>I&#8217;m not a big fan of running on top of unsupported environments
and I don&#8217;t have the need to do so.
I&#8217;ve heard about people running CentOS (RHEL compatible) on VirtualBox
but I have no idea how well it works.</p>

<p>If you are using a different virtualization platform
(like LXC, OpenVZ, UML,
<a target="_blank" href="http://www.amazon.com/s/?_encoding=UTF8&camp=1789&creative=390957&field-brandtextbin=Parallels%20Software&linkCode=ur2&node=229534&tag=atodorovorg-20">Parallels</a><img src="https://www.assoc-amazon.com/e/ir?t=atodorovorg-20&l=ur2&o=1" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />
or other) let me know if CentOS/Fedora works on it.
Alternatively I can give it a try if you can provide me with ssh/VNC access to the machine.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/19/bug-in-nokia-software-shows-wrong-caller-id/">Bug in Nokia Software Shows Wrong Caller ID</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-19T09:57:00+02:00" pubdate data-updated="true">Mar 19<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/19/bug-in-nokia-software-shows-wrong-caller-id/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>During the past month one of my cell phones,
<a target="_blank" href="http://www.amazon.com/s/?_encoding=UTF8&camp=1789&creative=390957&field-keywords=Nokia&linkCode=ur2&tag=atodorovorg-20&url=search-alias%3Daps">Nokia</a><img src="https://www.assoc-amazon.com/e/ir?t=atodorovorg-20&l=ur2&o=1" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />
<a href="http://www.amazon.com/gp/product/B001SEAOC6/ref=as_li_ss_tl?ie=UTF8&camp=1789&creative=390957&creativeASIN=B001SEAOC6&linkCode=as2&tag=atodorovorg-20">5800 XpressMusic</a><img src="http://www.assoc-amazon.com/e/ir?t=atodorovorg-20&l=as2&o=1&a=B001SEAOC6" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />
, was not showing the caller name when a friend was calling.
The number in the contacts list was correct but the name wasn&#8217;t showing,
nor the custom assigned ringing tone. It turned out to be a bug!</p>

<p>The story behind this is that accidentally the same number was saved again
in the contacts list, but without a name assigned to it.
The software was matching the later one, so no custom ringing tone,
no name shown. Removing the duplicate entry fixed the issue. Software version of this
phone is</p>

<pre><code>v 21.0.025
RM-356
02-04-09
</code></pre>

<p>I wondered what will happen with multiple duplicates and if this was fixed in a later
software version so I tested with another phone,
<a href="http://www.amazon.com/gp/product/B002RXEI6U/ref=as_li_ss_tl?ie=UTF8&camp=1789&creative=390957&creativeASIN=B002RXEI6U&linkCode=as2&tag=atodorovorg-20">Nokia 6303</a><img src="http://www.assoc-amazon.com/e/ir?t=atodorovorg-20&l=as2&o=1&a=B002RXEI6U" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />.
Software version is</p>

<pre><code>V 07.10
25-03-10
RM-638
</code></pre>

<ul>
<li>Step 0 - add the number to the contacts list, with name <code>Buddy 1</code></li>
<li>Step 1 - add the same number to the contacts, with <strong>empty name</strong>.
<strong>Result</strong>: You get a warning this number is already present for <code>Buddy 1</code>!
When receiving a call, <code>Buddy 1</code> is displayed.</li>
<li>Step 2 - edit the empty name contact and change the name to <code>Buddy 2</code>.
<strong>Result</strong>: when receiving a call <code>Buddy 2</code> is displayed.</li>
<li>Step 3 - add the same number again, with name <code>Buddy 0</code>. This is the latest entry
but it is sorted before the previous two (this is important).
<strong>Result</strong>: You get a warning that this number is already present for <code>Buddy 1</code> and <code>Buddy 2</code>.
When receiving a call <code>Buddy 0</code> is displayed.</li>
</ul>


<p><strong>Summary</strong>: so it looks like Nokia fixed the issue with empty names, by simply ignoring them
but when multiple duplicate contacts are available it displays the name of the last entered in the
contact list, independent of name sort order.</p>

<p><del>
Later today or tomorrow I will test on
<a href="http://www.amazon.com/gp/product/B005MOW7S2/ref=as_li_ss_tl?ie=UTF8&camp=1789&creative=390957&creativeASIN=B005MOW7S2&linkCode=as2&tag=atodorovorg-20">Nokia 700</a><img src="http://www.assoc-amazon.com/e/ir?t=atodorovorg-20&l=as2&o=1&a=B005MOW7S2" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />
which runs Symbian OS and update this post with more results.
</del></p>

<p><strong>Updated on 2013-03-19 23:50</strong></p>

<p>Finally managed to test on
<a href="http://www.amazon.com/gp/product/B005MOW7S2/ref=as_li_ss_tl?ie=UTF8&camp=1789&creative=390957&creativeASIN=B005MOW7S2&linkCode=as2&tag=atodorovorg-20">Nokia 700</a><img src="http://www.assoc-amazon.com/e/ir?t=atodorovorg-20&l=as2&o=1&a=B005MOW7S2" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />.
Software version is:</p>

<pre><code>Release
Nokia Belle Feature pack 1
Software version
112.010.1404
Software version date
2012-03-30
Type
RM-670
</code></pre>

<p><strong>Result</strong>: If a duplicate contact entry is present it doesn&#8217;t matter if the name is empty or not.
Both times no name was displayed when receiving a call. Looks like Nokia is not paying attention to
regressions at all.</p>

<h2>Android and iPhone</h2>

<p>I don&#8217;t own any
<a target="_blank" href="http://www.amazon.com/s/?_encoding=UTF8&camp=1789&creative=390957&field-keywords=Android&linkCode=ur2&tag=atodorovorg-20&url=search-alias%3Delectronics">Android</a><img src="https://www.assoc-amazon.com/e/ir?t=atodorovorg-20&l=ur2&o=1" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />
or
<a target="_blank" href="http://www.amazon.com/s/?_encoding=UTF8&camp=1789&creative=390957&field-keywords=iPhone&linkCode=ur2&rh=n%3A172282%2Ck%3AiPhone&tag=atodorovorg-20&url=search-alias%3Delectronics">iPhone</a><img src="https://www.assoc-amazon.com/e/ir?t=atodorovorg-20&l=ur2&o=1" width="1" height="1" border="0" alt="" style="border:none !important; margin:0px !important;" />
devices so I&#8217;m not able to test on them. If you have one, please let me know if this bug is still present
and how does the software behave when multiple contacts share the same number or have empty names! Thanks!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/14/django-social-auth-tip-reminder-of-login-provider/">Django-social-auth Tip: Reminder of Login Provider</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-14T12:04:00+02:00" pubdate data-updated="true">Mar 14<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/14/django-social-auth-tip-reminder-of-login-provider/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Every now and then users forget their passwords. This is why I prefer using
OAuth and social network accounts like GitHub or Twitter. But what do you do
when somebody forgets which OAuth provider they used to login to your site?
Your website needs a reminder. This is how to implement one if using
django-social-auth.</p>

<h2>Back-end</h2>

<p>Create a similar view on your Django back-end</p>

<figure class='code'><figcaption><span>views.py  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">ajax_social_auth_provider_reminder</span><span class="p">(</span><span class="n">request</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">        Remind the user which social auth provider they used to login.</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">if</span> <span class="ow">not</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="p">:</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">&quot;Not a POST&quot;</span><span class="p">,</span> <span class="n">mimetype</span><span class="o">=</span><span class="s">&#39;text/plain&#39;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">403</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">email</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">POST</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;email&#39;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">)</span>
</span><span class='line'>    <span class="n">email</span> <span class="o">=</span> <span class="n">email</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
</span><span class='line'>    <span class="k">if</span> <span class="ow">not</span> <span class="n">email</span> <span class="ow">or</span> <span class="p">(</span><span class="n">email</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="s">&quot;@&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">&quot;Invalid address!&quot;</span><span class="p">,</span> <span class="n">mimetype</span><span class="o">=</span><span class="s">&#39;text/plain&#39;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">try</span><span class="p">:</span>
</span><span class='line'>        <span class="n">user</span> <span class="o">=</span> <span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">email</span><span class="o">=</span><span class="n">email</span><span class="p">,</span> <span class="n">is_active</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="s">&#39;pk&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>    <span class="k">except</span><span class="p">:</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">&quot;No user with address &#39;</span><span class="si">%s</span><span class="s">&#39; found!&quot;</span> <span class="o">%</span> <span class="n">email</span><span class="p">,</span> <span class="n">mimetype</span><span class="o">=</span><span class="s">&#39;text/plain&#39;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">providers</span> <span class="o">=</span> <span class="p">[]</span>
</span><span class='line'>    <span class="k">for</span> <span class="n">sa</span> <span class="ow">in</span> <span class="n">UserSocialAuth</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">user</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span><span class="o">.</span><span class="n">only</span><span class="p">(</span><span class="s">&#39;provider&#39;</span><span class="p">):</span>
</span><span class='line'>        <span class="n">providers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">sa</span><span class="o">.</span><span class="n">provider</span><span class="o">.</span><span class="n">title</span><span class="p">())</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">providers</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span><span class='line'>        <span class="n">send_templated_mail</span><span class="p">(</span>
</span><span class='line'>            <span class="n">template_name</span><span class="o">=</span><span class="s">&#39;social_provider_reminder&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="n">from_email</span><span class="o">=</span><span class="s">&#39;Difio &lt;reminder@dif.io&gt;&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="n">recipient_list</span><span class="o">=</span><span class="p">[</span><span class="n">email</span><span class="p">],</span>
</span><span class='line'>            <span class="n">context</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;providers&#39;</span> <span class="p">:</span> <span class="n">providers</span><span class="p">},</span>
</span><span class='line'>        <span class="p">)</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">&quot;Reminder sent to &#39;</span><span class="si">%s</span><span class="s">&#39;&quot;</span> <span class="o">%</span> <span class="n">email</span><span class="p">,</span> <span class="n">mimetype</span><span class="o">=</span><span class="s">&#39;text/plain&#39;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span><span class='line'>    <span class="k">else</span><span class="p">:</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">HttpResponse</span><span class="p">(</span><span class="s">&quot;User found but no social providers found!&quot;</span><span class="p">,</span> <span class="n">mimetype</span><span class="o">=</span><span class="s">&#39;text/plain&#39;</span><span class="p">,</span> <span class="n">status</span><span class="o">=</span><span class="mi">400</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>This example assumes it is called via POST request which contains the email address.
All responses are handled at the front-end via JavaScript. If a user with the specified
email address exists this address will receive a reminder listing all social auth providers
associated with the user account.</p>

<h2>Front-end</h2>

<p>On the browser side I like to use <a href="http://dojotoolkit.org">Dojo</a>.
Here is a simple script which connects to a form and POSTs the data
back to the server.</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='javascript'><span class='line'><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dojo&quot;</span><span class="p">]);</span>
</span><span class='line'><span class="nx">require</span><span class="p">([</span><span class="s2">&quot;dijit&quot;</span><span class="p">]);</span>
</span><span class='line'>
</span><span class='line'><span class="kd">function</span> <span class="nx">sendReminderForm</span><span class="p">(){</span>
</span><span class='line'>    <span class="kd">var</span> <span class="nx">form</span> <span class="o">=</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="s2">&quot;reminderForm&quot;</span><span class="p">);</span>
</span><span class='line'>
</span><span class='line'>    <span class="nx">dojo</span><span class="p">.</span><span class="nx">connect</span><span class="p">(</span><span class="nx">form</span><span class="p">,</span> <span class="s2">&quot;onsubmit&quot;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">event</span><span class="p">){</span>
</span><span class='line'>        <span class="nx">dojo</span><span class="p">.</span><span class="nx">stopEvent</span><span class="p">(</span><span class="nx">event</span><span class="p">);</span>
</span><span class='line'>        <span class="nx">dijit</span><span class="p">.</span><span class="nx">byId</span><span class="p">(</span><span class="s2">&quot;dlgForgot&quot;</span><span class="p">).</span><span class="nx">hide</span><span class="p">();</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">xhrArgs</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>            <span class="nx">form</span><span class="o">:</span> <span class="nx">form</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">handleAs</span><span class="o">:</span> <span class="s2">&quot;text&quot;</span><span class="p">,</span>
</span><span class='line'>            <span class="nx">load</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">){</span><span class="nx">alert</span><span class="p">(</span><span class="nx">data</span><span class="p">);},</span>
</span><span class='line'>            <span class="nx">error</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">error</span><span class="p">,</span> <span class="nx">ioargs</span><span class="p">){</span><span class="nx">alert</span><span class="p">(</span><span class="nx">ioargs</span><span class="p">.</span><span class="nx">xhr</span><span class="p">.</span><span class="nx">responseText</span><span class="p">);}</span>
</span><span class='line'>        <span class="p">};</span>
</span><span class='line'>        <span class="kd">var</span> <span class="nx">deferred</span> <span class="o">=</span> <span class="nx">dojo</span><span class="p">.</span><span class="nx">xhrPost</span><span class="p">(</span><span class="nx">xhrArgs</span><span class="p">);</span>
</span><span class='line'>    <span class="p">});</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'><span class="nx">dojo</span><span class="p">.</span><span class="nx">ready</span><span class="p">(</span><span class="nx">sendReminderForm</span><span class="p">);</span>
</span></code></pre></td></tr></table></div></figure>


<p>You can try this out at <a href="http://www.dif.io">Difio</a> and let me know how it works for you!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/07/python-twitter-django-social-auth-hello-new-user/">Python Twitter + Django-social-auth == Hello New User</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-07T21:47:00+02:00" pubdate data-updated="true">Mar 7<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/07/python-twitter-django-social-auth-hello-new-user/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I have been experimenting with the <a href="https://pypi.python.org/pypi/twitter">twitter</a>
module for Python and decided to combine it with
<a href="https://github.com/omab/django-social-auth">django-social-auth</a> to welcome new
users who join <a href="http://www.dif.io">Difio</a>. In this post I will show you how to
tweet on behalf of the user when they join your site and send them a welcome email.</p>

<h2>Configuration</h2>

<p>In django-social-auth the authentication workflow is handled by an operations
pipeline where custom functions can be added or default items can be removed to
provide custom behavior. This is how our pipeline looks:</p>

<figure class='code'><figcaption><span>settings.py  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">SOCIAL_AUTH_PIPELINE</span> <span class="o">=</span> <span class="p">(</span>
</span><span class='line'>    <span class="s">&#39;social_auth.backends.pipeline.social.social_auth_user&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="c">#&#39;social_auth.backends.pipeline.associate.associate_by_email&#39;,</span>
</span><span class='line'>    <span class="s">&#39;social_auth.backends.pipeline.user.get_username&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;social_auth.backends.pipeline.user.create_user&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;social_auth.backends.pipeline.social.associate_user&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;social_auth.backends.pipeline.social.load_extra_data&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;social_auth.backends.pipeline.user.update_user_details&#39;</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;myproject.tasks.welcome_new_user&#39;</span>
</span><span class='line'><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>This is the default plus an additional method at the end to welcome new users.</p>

<p>You also have to create and configure a Twitter application so that users
can login with Twitter OAuth to your site.
<a href="http://django-social-auth.readthedocs.org/en/latest/backends/index.html">RTFM</a>
for more information on how to do this.</p>

<h2>Custom pipeline actions</h2>

<p>This is how the custom pipeline action should look:</p>

<figure class='code'><figcaption><span>myproject/tasks.py  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">urlparse</span> <span class="kn">import</span> <span class="n">parse_qs</span>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">welcome_new_user</span><span class="p">(</span><span class="n">backend</span><span class="p">,</span> <span class="n">user</span><span class="p">,</span> <span class="n">social_user</span><span class="p">,</span> <span class="n">is_new</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">new_association</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">        Part of SOCIAL_AUTH_PIPELINE. Works with django-social-auth==0.7.21 or newer</span>
</span><span class='line'><span class="sd">        @backend - social_auth.backends.twitter.TwitterBackend (or other) object</span>
</span><span class='line'><span class="sd">        @user - User (if is_new) or django.utils.functional.SimpleLazyObject (if new_association)</span>
</span><span class='line'><span class="sd">        @social_user - UserSocialAuth object</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>    <span class="k">if</span> <span class="n">is_new</span><span class="p">:</span>
</span><span class='line'>        <span class="n">send_welcome_email</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="n">user</span><span class="o">.</span><span class="n">email</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">first_name</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">if</span> <span class="n">backend</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="s">&#39;twitter&#39;</span><span class="p">:</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">is_new</span> <span class="ow">or</span> <span class="n">new_association</span><span class="p">:</span>
</span><span class='line'>            <span class="n">access_token</span> <span class="o">=</span> <span class="n">social_user</span><span class="o">.</span><span class="n">extra_data</span><span class="p">[</span><span class="s">&#39;access_token&#39;</span><span class="p">]</span>
</span><span class='line'>            <span class="n">parsed_tokens</span> <span class="o">=</span> <span class="n">parse_qs</span><span class="p">(</span><span class="n">access_token</span><span class="p">)</span>
</span><span class='line'>            <span class="n">oauth_token</span> <span class="o">=</span> <span class="n">parsed_tokens</span><span class="p">[</span><span class="s">&#39;oauth_token&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>            <span class="n">oauth_secret</span> <span class="o">=</span> <span class="n">parsed_tokens</span><span class="p">[</span><span class="s">&#39;oauth_token_secret&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
</span><span class='line'>            <span class="n">tweet_on_join</span><span class="o">.</span><span class="n">delay</span><span class="p">(</span><span class="n">oauth_token</span><span class="p">,</span> <span class="n">oauth_secret</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="bp">None</span>
</span></code></pre></td></tr></table></div></figure>


<p>This code works with django-social-auth==0.7.21 or newer. In older versions the
<code>new_association</code> parameter is missing as
<a href="https://groups.google.com/forum/?fromgroups=#!topic/django-social-auth/Nxf-0iRD27Y">I discovered</a>.
If you use an older version you won&#8217;t be able to distinguish between newly created
accounts and ones which have associated another OAuth backend. You are warned!</p>

<h2>Tweet &amp; email</h2>

<p>Sending the welcome email is out of the scope of this post. I am using
<a href="https://github.com/bradwhittington/django-templated-email">django-templated-email</a>
to define how emails look and sending them via Amazon SES. See
<a href="/blog/2013/02/28/email-logging-django-redhat-openshift-amazon-ses/">Email Logging for Django on RedHat OpenShift With Amazon SES</a>
for more information on how to configure emailing with SES.</p>

<p>Here is how the Twitter code looks:</p>

<figure class='code'><figcaption><span>myproject/tasks.py  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">import</span> <span class="nn">twitter</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">celery.task</span> <span class="kn">import</span> <span class="n">task</span>
</span><span class='line'><span class="kn">from</span> <span class="nn">settings</span> <span class="kn">import</span> <span class="n">TWITTER_CONSUMER_KEY</span><span class="p">,</span> <span class="n">TWITTER_CONSUMER_SECRET</span>
</span><span class='line'>
</span><span class='line'><span class="nd">@task</span>
</span><span class='line'><span class="k">def</span> <span class="nf">tweet_on_join</span><span class="p">(</span><span class="n">oauth_token</span><span class="p">,</span> <span class="n">oauth_secret</span><span class="p">):</span>
</span><span class='line'>    <span class="sd">&quot;&quot;&quot;</span>
</span><span class='line'><span class="sd">        Tweet when the user is logged in for the first time or</span>
</span><span class='line'><span class="sd">        when new Twitter account is associated.</span>
</span><span class='line'>
</span><span class='line'><span class="sd">        @oauth_token - string</span>
</span><span class='line'><span class="sd">        @oauth_secret - string</span>
</span><span class='line'><span class="sd">    &quot;&quot;&quot;</span>
</span><span class='line'>    <span class="n">t</span> <span class="o">=</span> <span class="n">twitter</span><span class="o">.</span><span class="n">Twitter</span><span class="p">(</span>
</span><span class='line'>            <span class="n">auth</span><span class="o">=</span><span class="n">twitter</span><span class="o">.</span><span class="n">OAuth</span><span class="p">(</span>
</span><span class='line'>                <span class="n">oauth_token</span><span class="p">,</span> <span class="n">oauth_secret</span><span class="p">,</span>
</span><span class='line'>                <span class="n">TWITTER_CONSUMER_KEY</span><span class="p">,</span> <span class="n">TWITTER_CONSUMER_SECRET</span>
</span><span class='line'>            <span class="p">)</span>
</span><span class='line'>        <span class="p">)</span>
</span><span class='line'>    <span class="n">t</span><span class="o">.</span><span class="n">statuses</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="s">&#39;Started following open source changes at http://www.dif.io!&#39;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>This will post a new tweet on behalf of the user, telling everyone they joined
your website!</p>

<p><strong>NOTE:</strong>
<code>tweet_on_join</code> and <code>send_welcome_email</code> are Celery tasks, not ordinary Python
functions. This has the advantage of being able to execute these actions async
and not slow down the user interface.</p>

<p>Are you doing something special when a user joins your website? Please share
your comments below. Thanks!</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/03/06/tip-delete-user-profiles-django-social-auth/">Tip: Delete User Profiles With Django-social-auth</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-03-06T21:02:00+02:00" pubdate data-updated="true">Mar 6<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/03/06/tip-delete-user-profiles-django-social-auth/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Common functionality for websites is the &#8216;DELETE ACCOUNT&#8217; or &#8216;DISABLE ACCOUNT&#8217;
button. This is how to implement it if using
<a href="https://github.com/omab/django-social-auth">django-social-auth</a>.</p>

<figure class='code'><figcaption><span>views.py  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="n">delete_objects_for_user</span><span class="p">(</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span> <span class="c"># optional</span>
</span><span class='line'><span class="n">UserSocialAuth</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">user</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="p">)</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
</span><span class='line'><span class="n">User</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">pk</span><span class="o">=</span><span class="n">request</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">pk</span><span class="p">)</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">is_active</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</span><span class='line'><span class="k">return</span> <span class="n">HttpResponseRedirect</span><span class="p">(</span><span class="n">reverse</span><span class="p">(</span><span class="s">&#39;django.contrib.auth.views.logout&#39;</span><span class="p">))</span>
</span></code></pre></td></tr></table></div></figure>


<p>This snippet does the following:</p>

<ul>
<li>Delete (or archive) all objects for the current user;</li>
<li>Delete the social auth profile(s) because there is no way to disable them.
DSA will create new objects if the user logs in again;</li>
<li>Disable the <code>User</code> object. You could also delete it but mind foreign keys;</li>
<li>Clear the email for the <code>User</code> object - if a new user is created after deletion
we don&#8217;t want duplicated email addresses in the database;</li>
<li>Finally redirect the user to the logout view.</li>
</ul>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/28/email-logging-django-redhat-openshift-amazon-ses/">Email Logging for Django on RedHat OpenShift With Amazon SES</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-02-28T23:19:00+02:00" pubdate data-updated="true">Feb 28<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/02/28/email-logging-django-redhat-openshift-amazon-ses/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Sending email in the cloud can be tricky. IPs of cloud providers are blacklisted
because of frequent abuse. For that reason I use
<a href="http://aws.amazon.com/ses/">Amazon SES</a> as my email backend. Here is how to
configure <a href="https://www.djangoproject.com/">Django</a> to send emails to site admins
when something goes wrong.</p>

<figure class='code'><figcaption><span>settings.py  </span></figcaption>
 <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c"># Valid addresses only.</span>
</span><span class='line'><span class="n">ADMINS</span> <span class="o">=</span> <span class="p">(</span>
</span><span class='line'>    <span class="p">(</span><span class="s">&#39;Alexander Todorov&#39;</span><span class="p">,</span> <span class="s">&#39;atodorov@example.com&#39;</span><span class="p">),</span>
</span><span class='line'><span class="p">)</span>
</span><span class='line'>
</span><span class='line'><span class="n">LOGGING</span> <span class="o">=</span> <span class="p">{</span>
</span><span class='line'>    <span class="s">&#39;version&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;disable_existing_loggers&#39;</span><span class="p">:</span> <span class="bp">False</span><span class="p">,</span>
</span><span class='line'>    <span class="s">&#39;handlers&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s">&#39;mail_admins&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>            <span class="s">&#39;level&#39;</span><span class="p">:</span> <span class="s">&#39;ERROR&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;class&#39;</span><span class="p">:</span> <span class="s">&#39;django.utils.log.AdminEmailHandler&#39;</span>
</span><span class='line'>        <span class="p">}</span>
</span><span class='line'>    <span class="p">},</span>
</span><span class='line'>    <span class="s">&#39;loggers&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>        <span class="s">&#39;django.request&#39;</span><span class="p">:</span> <span class="p">{</span>
</span><span class='line'>            <span class="s">&#39;handlers&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;mail_admins&#39;</span><span class="p">],</span>
</span><span class='line'>            <span class="s">&#39;level&#39;</span><span class="p">:</span> <span class="s">&#39;ERROR&#39;</span><span class="p">,</span>
</span><span class='line'>            <span class="s">&#39;propagate&#39;</span><span class="p">:</span> <span class="bp">True</span><span class="p">,</span>
</span><span class='line'>        <span class="p">},</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Used as the From: address when reporting errors to admins</span>
</span><span class='line'><span class="c"># Needs to be verified in Amazon SES as a valid sender</span>
</span><span class='line'><span class="n">SERVER_EMAIL</span> <span class="o">=</span> <span class="s">&#39;django@example.com&#39;</span>
</span><span class='line'>
</span><span class='line'><span class="c"># Amazon Simple Email Service settings</span>
</span><span class='line'><span class="n">AWS_SES_ACCESS_KEY_ID</span> <span class="o">=</span> <span class="s">&#39;xxxxxxxxxxxx&#39;</span>
</span><span class='line'><span class="n">AWS_SES_SECRET_ACCESS_KEY</span> <span class="o">=</span> <span class="s">&#39;xxxxxxxx&#39;</span>
</span><span class='line'><span class="n">EMAIL_BACKEND</span> <span class="o">=</span> <span class="s">&#39;django_ses.SESBackend&#39;</span>
</span></code></pre></td></tr></table></div></figure>


<p>You also need the <a href="https://github.com/hmarr/django-ses">django-ses</a>
dependency.</p>

<p>See <a href="http://docs.djangoproject.com/en/dev/topics/logging">http://docs.djangoproject.com/en/dev/topics/logging</a> for
more details on how to customize your logging configuration.</p>

<p>I am using this configuration successfully at RedHat&#8217;s OpenShift PaaS environment.
Other users have
<a href="https://openshift.redhat.com/community/forums/express/missing-email-on-500-ise-w-django">reported</a>
it works for them too. Should work with any other PaaS provider.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/26/performance-test-amazon-ebs-vs-instance-storage-pt1/">Performance Test: Amazon EBS vs. Instance Storage, Pt.1</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-02-26T23:02:00+02:00" pubdate data-updated="true">Feb 26<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/02/26/performance-test-amazon-ebs-vs-instance-storage-pt1/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>I&#8217;m exploring the possibility to speed-up my cloud database so I&#8217;ve run some
basic tests against storage options available to Amazon EC2 instances.
The instance was <a href="http://aws.amazon.com/ec2/instance-types/">m1.large</a>
with High I/O performance and two additional disks with the same size:</p>

<ul>
<li>/dev/xvdb - type EBS</li>
<li>/dev/xvdc - type instance storage</li>
</ul>


<p>Both are Xen para-virtual disks. The difference is that EBS is persistent
across reboots while instance storage is ephemeral.</p>

<h2>hdparm</h2>

<p>For a quick test I used <code>hdparm</code>. The manual says:</p>

<pre><code>-T  Perform timings of cache reads for benchmark and comparison purposes.
    This displays the speed of reading directly from the Linux buffer cache
    without disk access. This measurement is essentially an indication of
    the throughput of the processor, cache, and memory of the system under test.

-t  Perform timings of device reads for benchmark and comparison purposes.
    This displays the speed of reading through the buffer cache to the disk
    without any prior caching of data. This measurement is an indication of how
    fast the drive can sustain sequential data reads under Linux, without any
    filesystem overhead.
</code></pre>

<p>The results of 3 runs of hdparm are shown below:</p>

<pre><code># hdparm -tT /dev/xvdb /dev/xvdc

/dev/xvdb:
 Timing cached reads:   11984 MB in  1.98 seconds = 6038.36 MB/sec
 Timing buffered disk reads:  158 MB in  3.01 seconds =  52.52 MB/sec

/dev/xvdc:
 Timing cached reads:   11988 MB in  1.98 seconds = 6040.01 MB/sec
 Timing buffered disk reads:  1810 MB in  3.00 seconds = 603.12 MB/sec


# hdparm -tT /dev/xvdb /dev/xvdc

/dev/xvdb:
 Timing cached reads:   11892 MB in  1.98 seconds = 5991.51 MB/sec
 Timing buffered disk reads:  172 MB in  3.00 seconds =  57.33 MB/sec

/dev/xvdc:
 Timing cached reads:   12056 MB in  1.98 seconds = 6075.29 MB/sec
 Timing buffered disk reads:  1972 MB in  3.00 seconds = 657.11 MB/sec


# hdparm -tT /dev/xvdb /dev/xvdc

/dev/xvdb:
 Timing cached reads:   11994 MB in  1.98 seconds = 6042.39 MB/sec
 Timing buffered disk reads:  254 MB in  3.02 seconds =  84.14 MB/sec

/dev/xvdc:
 Timing cached reads:   11890 MB in  1.99 seconds = 5989.70 MB/sec
 Timing buffered disk reads:  1962 MB in  3.00 seconds = 653.65 MB/sec
</code></pre>

<p><strong>Result:</strong>
Sequential reads from instance storage are 10x faster compared to EBS on average.</p>

<h2>IOzone</h2>

<p>I&#8217;m running MySQL and sequential data reads are probably over idealistic scenario.
So I found another benchmark suite, called <a href="http://iozone.org">IOzone</a>.
I used the 3-414 version built from the official SRPM.</p>

<p>IOzone performs multiple tests. I&#8217;m interested in read/re-read, random-read/write,
read-backwards and stride-read.</p>

<p>For this round of testing I&#8217;ve tested with ext4 filesystem with and without journal
on both types of disks. I also experimented running Iozone inside a ramfs mounted
directory. However I didn&#8217;t have the time to run the test suite multiple times.</p>

<p>Then I used
<a href="http://code.google.com/p/iozone-results-comparator/">iozone-results-comparator</a> to
visualize the results. (I had to do a minor fix to the code to run inside virtualenv
and install all missing dependencies).</p>

<p>Raw IOzone output, data visualization and the modified tools are available in the
<a href="http://s3.amazonaws.com/atodorov/blog/aws_disk_benchmark_w_iozone.tar.bz2">aws_disk_benchmark_w_iozone.tar.bz2</a>
file (size 51M).</p>

<p><strong>Graphics</strong></p>

<p>EBS without journal(Baseline) vs. Instance Storage without journal(Set1)
<img src="/images/aws_iozone/ebs_woj_vs_is_woj.png" title="EBS vs. Instance Storage" alt="EBS vs. Instance Storage" /></p>

<p>Instance Storage without journal(Baseline) vs. Ramfs(Set1)
<img src="/images/aws_iozone/ebs_woj_vs_is_woj.png" title="IS vs. Ramfs" alt="IS vs. Ramfs" /></p>

<p><strong>Results</strong></p>

<ul>
<li>ext4 journal has no effect on reads, causes slow down when writing to disk. This
is expected;</li>
<li>Instance storage is faster compared to EBS but not much.
If I understand the results correctly, read performance is similar in some cases;</li>
<li>Ramfs is definitely the fastest but read performance compared to instance storage
is not two-fold (or more) as I expected;</li>
</ul>


<p><strong>Conclusion</strong></p>

<p>Instance storage appears to be faster (and this is expected) but I&#8217;m still not sure if
my application will gain any speed improvement or how much if migrated to read from
instance storage (or ramfs) instead of EBS. I will be performing more real-world
test next time, by comparing execution time for some of my largest SQL queries.</p>

<p>If you have other ideas how to adequately measure I/O performance in the AWS cloud,
please use the comments below.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/21/tip-generating-directory-listings-with-wget/">Tip: Generating Directory Listings With Wget</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-02-21T12:12:00+02:00" pubdate data-updated="true">Feb 21<span>st</span>, 2013</time>
        
         | <a href="/blog/2013/02/21/tip-generating-directory-listings-with-wget/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Today I was looking to generate a list of all files under remote site directory,
including sub directories. I found no built-in options for this in
<a href="https://www.gnu.org/software/wget/">wget</a>. This is how I did it:</p>

<pre><code>wget http://example.com/dir/ --spider -r -np 2&gt;&amp;1 | grep http:// | tr -s ' ' | cut -f3 -d' '
</code></pre>

<p>I managed to retrieve 12212 entries from the URL I was exploring.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
      <h1 class="entry-title"><a href="/blog/2013/02/20/how-large-are-my-mysql-tables/">How Large Are My MySQL Tables</a></h1>
    
    
      <p class="meta">
        








  


<time datetime="2013-02-20T12:03:00+02:00" pubdate data-updated="true">Feb 20<span>th</span>, 2013</time>
        
         | <a href="/blog/2013/02/20/how-large-are-my-mysql-tables/#disqus_thread">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p><img src="/images/database.jpg" alt="database" style="display:block;clear:both;"/>
Image CC-BY-SA, <a href="http://www.flickr.com/photos/theredproject/3332644561/">Michael Mandiberg</a></p>

<p>I found two good blog posts about investigating MySQL internals:
<a href="http://www.mysqlperformanceblog.com/2008/03/17/researching-your-mysql-table-sizes/">Researching your MySQL table sizes</a> and
<a href="http://www.mysqlperformanceblog.com/2008/02/04/finding-out-largest-tables-on-mysql-server/">Finding out largest tables on MySQL Server</a>.
Using the queries against my site <a href="http://www.dif.io">Difio</a> showed:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="n">mysql</span><span class="o">&gt;</span> <span class="k">SELECT</span> <span class="n">CONCAT</span><span class="p">(</span><span class="n">table_schema</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="k">table_name</span><span class="p">),</span>
</span><span class='line'>    <span class="o">-&gt;</span>        <span class="n">CONCAT</span><span class="p">(</span><span class="n">ROUND</span><span class="p">(</span><span class="n">table_rows</span> <span class="o">/</span> <span class="mi">1000000</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;M&#39;</span><span class="p">)</span>                                    <span class="k">rows</span><span class="p">,</span>
</span><span class='line'>    <span class="o">-&gt;</span>        <span class="n">CONCAT</span><span class="p">(</span><span class="n">ROUND</span><span class="p">(</span><span class="n">data_length</span> <span class="o">/</span> <span class="p">(</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span> <span class="p">),</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;G&#39;</span><span class="p">)</span>                    <span class="k">DATA</span><span class="p">,</span>
</span><span class='line'>    <span class="o">-&gt;</span>        <span class="n">CONCAT</span><span class="p">(</span><span class="n">ROUND</span><span class="p">(</span><span class="n">index_length</span> <span class="o">/</span> <span class="p">(</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span> <span class="p">),</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;G&#39;</span><span class="p">)</span>                   <span class="n">idx</span><span class="p">,</span>
</span><span class='line'>    <span class="o">-&gt;</span>        <span class="n">CONCAT</span><span class="p">(</span><span class="n">ROUND</span><span class="p">((</span> <span class="n">data_length</span> <span class="o">+</span> <span class="n">index_length</span> <span class="p">)</span> <span class="o">/</span> <span class="p">(</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span> <span class="o">*</span> <span class="mi">1024</span> <span class="p">),</span> <span class="mi">2</span><span class="p">),</span> <span class="s1">&#39;G&#39;</span><span class="p">)</span> <span class="n">total_size</span><span class="p">,</span>
</span><span class='line'>    <span class="o">-&gt;</span>        <span class="n">ROUND</span><span class="p">(</span><span class="n">index_length</span> <span class="o">/</span> <span class="n">data_length</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>                                           <span class="n">idxfrac</span>
</span><span class='line'>    <span class="o">-&gt;</span> <span class="k">FROM</span>   <span class="n">information_schema</span><span class="p">.</span><span class="n">TABLES</span>
</span><span class='line'>    <span class="o">-&gt;</span> <span class="k">ORDER</span>  <span class="k">BY</span> <span class="n">data_length</span> <span class="o">+</span> <span class="n">index_length</span> <span class="k">DESC</span><span class="p">;</span>
</span><span class='line'><span class="o">+</span><span class="c1">----------------------------------------+-------+-------+-------+------------+---------+</span>
</span><span class='line'><span class="o">|</span> <span class="n">CONCAT</span><span class="p">(</span><span class="n">table_schema</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="k">table_name</span><span class="p">)</span>  <span class="o">|</span> <span class="k">rows</span>  <span class="o">|</span> <span class="k">DATA</span>  <span class="o">|</span> <span class="n">idx</span>   <span class="o">|</span> <span class="n">total_size</span> <span class="o">|</span> <span class="n">idxfrac</span> <span class="o">|</span>
</span><span class='line'><span class="o">+</span><span class="c1">----------------------------------------+-------+-------+-------+------------+---------+</span>
</span><span class='line'><span class="o">|</span> <span class="n">difio</span><span class="p">.</span><span class="n">difio_advisory</span>                   <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">04</span><span class="n">M</span> <span class="o">|</span> <span class="mi">3</span><span class="p">.</span><span class="mi">17</span><span class="k">G</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="k">G</span> <span class="o">|</span> <span class="mi">3</span><span class="p">.</span><span class="mi">17</span><span class="k">G</span>      <span class="o">|</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">00</span> <span class="o">|</span>
</span><span class='line'><span class="o">+</span><span class="c1">----------------------------------------+-------+-------+-------+------------+---------+</span>
</span></code></pre></td></tr></table></div></figure>


<p>The table of interest is <code>difio_advisory</code> which had 5 <code>longtext</code> fields. Those fields were
not used for filtering or indexing the rest of the information.
They were just storage fields - a `nice&#8217; side effect of using Django&#8217;s ORM.</p>

<p>I have migrated the data to Amazon S3 and stored it in JSON format there. After dropping these
fields the table was considerably smaller:</p>

<figure class='code'> <div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='sql'><span class='line'><span class="o">+</span><span class="c1">----------------------------------------+-------+-------+-------+------------+---------+</span>
</span><span class='line'><span class="o">|</span> <span class="n">CONCAT</span><span class="p">(</span><span class="n">table_schema</span><span class="p">,</span> <span class="s1">&#39;.&#39;</span><span class="p">,</span> <span class="k">table_name</span><span class="p">)</span>  <span class="o">|</span> <span class="k">rows</span>  <span class="o">|</span> <span class="k">DATA</span>  <span class="o">|</span> <span class="n">idx</span>   <span class="o">|</span> <span class="n">total_size</span> <span class="o">|</span> <span class="n">idxfrac</span> <span class="o">|</span>
</span><span class='line'><span class="o">+</span><span class="c1">----------------------------------------+-------+-------+-------+------------+---------+</span>
</span><span class='line'><span class="o">|</span> <span class="n">difio</span><span class="p">.</span><span class="n">difio_advisory</span>                   <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">01</span><span class="n">M</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="k">G</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="k">G</span> <span class="o">|</span> <span class="mi">0</span><span class="p">.</span><span class="mi">00</span><span class="k">G</span>      <span class="o">|</span>    <span class="mi">0</span><span class="p">.</span><span class="mi">90</span> <span class="o">|</span>
</span><span class='line'><span class="o">+</span><span class="c1">----------------------------------------+-------+-------+-------+------------+---------+</span>
</span></code></pre></td></tr></table></div></figure>


<p>For those interested I&#8217;m using <a href="https://github.com/e-loue/django-storages">django-storages</a>
on the back-end to save the data in S3 when generated. On the front-end I&#8217;m using
<a href="http://dojotoolkit.com">dojo.xhrGet</a> to load the information directly into the browser.</p>

<p>I&#8217;d love to hear your feedback in the comments section below. Let me know
what you found for your own databases. Were there any issues? How did you deal
with them?</p>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/3/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    
<section>
  
  <a href="https://github.com/atodorov">@atodorov</a> on GitHub
  
</section>


<section>
  
    <a href="http://twitter.com/atodorov_" class="twitter-follow-button" data-show-count="true">Follow @atodorov_</a>
  

  <h1>Latest Tweets</h1>
  <ul id="tweets">
    <li class="loading">Status updating&#8230;</li>
  </ul>
  <script type="text/javascript">
    $.domReady(function(){
      getTwitterFeed("atodorov_", 5, false);
    });
  </script>
  <script src="/javascripts/twitter.js" type="text/javascript"> </script>
</section>

<section>
    <h1>Trending Posts</h1>
<!-- AddThis Trending Content BEGIN -->
<div id="addthis_trendingcontent"></div>
<script type="text/javascript" src="//s7.addthis.com/js/300/addthis_widget.js#pubid=ra-5103cc5a2bc6ba17"></script>
<script type="text/javascript">
addthis.box("#addthis_trendingcontent", {
    feed_title : "",
    feed_type : "trending",
    feed_period : "month",
    num_links : 5,
    height : "auto",
    width : "auto"});
</script>
<!-- AddThis Trending Content END -->
</section><section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/06/14/personal-experience-with-credit-card-fraud-pt2/">Personal Experience With Credit Card Fraud, Part 2</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/09/another-day-at-the-office/">Another Day At The Office</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/07/software-developer-employee-vs-contractor-part-1/">Software Developer - Employee vs. Contractor, Part 1</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/06/02/sofiavalley-ui-bug/">SofiaValley UI bug</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/31/call-of-the-open-source-guru/">Call of the Open Source Guru</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/30/why-vmware-multi-hypervisor-manager-architecture-is-wrong/">Why VMware Multi-Hypervisor Manager Architecture Is Wrong</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/30/configuring-anonymous-ftp-uploads-on-red-hat-enterprise-linux-6/">Configuring Anonymous FTP Uploads On Red Hat Enterprise Linux 6</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/27/it-jobs-prediction-quality-engineering-devops-augmented-reality/">IT Jobs Prediction: Quality Engineering, DevOps, Augmented Reality</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/23/balkan-venture-forum-sofia-post-mortem/">Balkan Venture Forum Sofia Post-mortem</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/05/17/linux-and-python-tools-to-compare-images/">Linux and Python Tools To Compare Images</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Disclaimer</h1>
  <p>
Some of the links contained within this site have my referral id (e.g., Amazon), which provides me with a small commission for each sale. Thank you for your support.
  </p>
</section>
<section>
<h1></h1>
<iframe width="260" height="420" scrolling="no" frameborder="no" allowtransparency="true" src="http://www.econt.com/voffice/en/240x400/?mediator=http%3A%2F%2Fatodorov.org"></iframe>
</section>



  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  <a rel="license" href="http://creativecommons.org/licenses/by-sa/3.0/deed.en_US">CC-BY-SA</a>
  &amp;
  <a rel="license" href="http://opensource.org/licenses/MIT">MIT</a>
  2013 &diams; Alexander Todorov
  &diams;
  <a href="/about/">About Me</a>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'atodorov';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>



<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) {return;}
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/all.js#appId=212934732101925&xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>



  <script type="text/javascript">
    (function() {
      var script = document.createElement('script'); script.type = 'text/javascript'; script.async = true;
      script.src = 'https://apis.google.com/js/plusone.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(script, s);
    })();
  </script>



  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
